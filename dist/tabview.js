var TabView=function(){function e(){return(e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function n(e,n){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(i)return(i=i.call(e)).next.bind(i);if(Array.isArray(e)||(i=function(e,n){if(e){if("string"==typeof e)return t(e,n);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?t(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){i&&(e=i);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return function(){function t(){return Math.random().toString(36).slice(2)}function i(e,t,n){var i;return function(){var r=this,l=arguments,a=function(){i=null,n||e.apply(r,l)},o=n&&!i;clearTimeout(i),i=setTimeout(a,t),o&&e.apply(r,l)}}var r,l=(r={},{addListener:function(e,t){void 0===r[e]&&(this._listeners[e]=[]),this._listeners[e].push(t)},attach:function(e,t){this.addListener(e,t)},on:function(e,t){this.addListener(e,t)},fire:function(e,t,n){if("string"==typeof e&&(e={type:e,data:t,target:n}),e.target||(e.target=this),!e.type)throw new Error("Type error");if(r[e.type]instanceof Array)for(var i=r[e.type],l=0,a=i.length;l<a;l++)i[l].call(this,e)},trigger:function(e,t){this.fire(e,t)},removeListener:function(e,t){if(r[e]instanceof Array)for(var n=r[e],i=0,l=n.length;i<l;i++)if(n[i]===t){n.splice(i,1);break}},off:function(e,t){this.removeListener(e,t)}});function a(e,t,n){var i=n.target,r=n.title,l=n.bg,a=document.createElement("button");return a.className="tab-link",a.setAttribute("href","#!"),a.setAttribute("id",e),a.setAttribute("title",r),a.setAttribute("name","tab-link"),a.setAttribute("draggable","true"),a.setAttribute("data-tab",t),a.setAttribute("data-target",i),a.style.position="relative",a.style.outline="none",a.style.height="100%",a.style.width="auto",a.style.border="0 none transparent",a.style.fontSize="12px",a.style.fontWeight="500",a.style.margin="0",a.style.padding="0",a.style.boxShadow="none",a.style.background=l||"inherit",a.style.color="inherit",a.style.cursor="pointer",a.style.display="block",a.style.transition="background .4s",a.style.borderRadius=style?"8px 1px 0px 0px":"1px 1px 0px 0px",a.addEventListener("click",function(){select(t)}),a}function o(e,n,i){var r=document.createElement("button");return r.id=t(),r.setAttribute("name",e),r.style.height="100%",r.style.border="0 none transparent",r.style.background="transparent",r.style.color="white",r.marginRight=r.marginLeft="2px",r.style.padding="2px",r.style.paddingLeft=r.style.paddingRight="7px",r.style.cursor="pointer",r.style.fontWeight="900",r.style.fontSize="14px",r.style.float=i||"none",r.style.outline="none",r.innerHTML=n,r.style.borderRadius="4px 4px",r}function s(){var e=document.createElement("span");return e.setAttribute("name","tab-footer"),e.innerHTML=settings.footer,e.className="tab-footer",e.style.left="0",e.style.right="0",e.style.bottom="0",e.style.padding="2px",e.style.display="flex",e.style.justifyContent="center",e.style.alignItems="center",e}function d(){var e=document.createElement("span");return e.setAttribute("name","tab-banner"),e.innerHTML="string"==typeof settings.banner?settings.banner:settings.banner.innerHTML,e.style.display="flex",e.style.padding="5px",e.style.justifyContent="center",e.style.alignItems="center",e.className="tab-banner",e.style.background="green",e}return{createTabs:function(r,c){var u,y,p,f,b,g,m,v,h,x,E,k,w=new Map,A={};function L(n,r){v=e({},r);var a=r.loadFromMarkup?function(e,t){if("string"==typeof e&&(e=document.getElementById(e)),!e||!e.children)throw new Error("Invalid element to load markup");var n=e.children;if(!n||0===n.length)return(void 0)();var i=e.querySelector(".tab-banner"),r=e.querySelector(".tab-footer"),l=e.querySelector(".tab-links").children,a=e.querySelector(".tab-pages").children,o={banner:i.innerHTML,footer:r.innerHTML,tabs:[]};for(i&&i.remove(),r&&r.remove();l.length>0;){var s=l[0],d=a[0];s&&(o.tabs.push({id:""!==s.id?s.id:null,label:s.textContent,title:s.getAttribute("title"),closable:s.getAttribute("closable"),target:s.getAttribute("data-target"),selected:s.getAttribute("selected"),html:d?d.innerHTML:"",bg:d?d.style.background:"#0bc",style:s.getAttribute("tab-style")}),s.remove(),d.remove())}return o}(n):null;a&&(v=Object.assign(v,a)),function(e){v=Object.assign({limit:void 0,banner:void 0,footer:void 0,closeOnClick:void 0,infiniteScroll:!1,fancy:!1,add:!1,theme:"",tabHeight:32,leftTooltip:"&lt;",rightTooltip:"&gt;",addTooltip:"+",data:null},e)}(v),(f=o("left-nav-button","&lt;","left")).addEventListener("click",function(){U(!1)}),(b=o("add-tab-button","+","left")).style.visibility=v.add?"visible":"hidden",b.addEventListener("click",function(){l.fire("add-tab-click",t())}),y=function(){var e=document.createElement("div");return e.setAttribute("id",t()),e.style.position="absolute",e.style.top="0",e.style.bottom="0",e.style.left="60px",e.style.right="30px",e.style.overflow="hidden",e.style.padding="0px",e.style.margin="0px",e.style.paddingRight="7px",e.style.background="inherit",e.style.display="flex",e.className="tab-bar",e}();var c,h=((c=document.createElement("div")).style.position="relative",c.style.height="100%",c.style.height="100%",c.style.width="100%",c.style.border="none",c.style.padding="none",c.className="tabbar-wrapper",c);h.append(y),h.appendChild(f),h.appendChild(b),m=y.id,p=o("right-nav-button","&gt;","right"),h.appendChild(p),p.addEventListener("click",function(){U(!0)});var A,L=((A=document.createElement("div")).setAttribute("id",t()),A.style.position="relative",A.className="tab-panel",A.style.width="100%",A.style.height="100%",A.style.overflow="hidden",A.style.margin="0",A.style.top="0",A.style.background="",A);g=L.id;var B=function(e,t,n){var i,r;void 0===n&&(n={}),n.banner&&(i=d()),n.footer&&(r=s());var l=document.createDocumentFragment(),a=document.createElement("table");a.style.width=a.style.height="100%",l.append(a);var o=document.createElement("thead");a.append(o);var c=document.createElement("tr");c.style.minHeight="0px",c.style.maxHeight="80px",o.append(c);var u=document.createElement("th");u.style.textAlign="left",u.style.padding="0",i?u.append(i):c.style.display="none",c.appendChild(u);var y=document.createElement("tbody");a.append(y);var p=document.createElement("tr");p.style.minHeight="24px",p.style.height=n.tabHeight+"px",p.style.padding="0",y.append(p);var f=document.createElement("td");f.style.overflow="hidden",f.style.whiteSpace="nowrap",f.style.textAlign="left",f.style.padding="0",f.append(e),p.appendChild(f),a.style.borderCollapse=p.style.borderCollapse=f.style.borderCollapse="collapse",a.style.border=p.style.border=f.style.border="0 none transparent";var b=document.createElement("tr");y.append(b),(f=document.createElement("td")).append(t),f.style.textAlign="left",f.style.padding="0",b.appendChild(f);var g=document.createElement("tr");y.append(g),(f=document.createElement("td")).style.textAlign="left",f.style.padding="0",g.appendChild(f),g.style.minHeight="24px",g.style.height=n.tabHeight+"px";var m=document.createElement("tr");return y.append(m),f=document.createElement("td"),m.appendChild(f),m.style.maxHeight="24px",(f=document.createElement("td")).style.padding="0",r?f.append(r||document.createTextNode("")):m.style.display="none",m.appendChild(f),(f=document.createElement("td")).style.padding="0",m.appendChild(f),n.bottom?(g.firstElementChild.nextSibling.appendChild(e),p.style.display="none"):g.style.display="none",l}(y.parentElement,L,v),T="object"==typeof n?n:document.getElementById(n);x=T.id,T.append(B),H(v.theme),function(){var e=O();window.addEventListener("resize",function(){i(function(){if(!u)return!1;D(u.linkButton)?(C(),_(u.linkButton)):_(u.linkButton),I()},200)()}),e.addEventListener("keyup",function(e){!function(e){var t=u.button;if(t)switch(e.keyCode){case 37:t.previousSibling&&q(t.previousSibling);break;case 39:t.nextSibling&&q(t.nextSibling);break;case 38:break;case 40:t.blur()}}(e)},!0),e.addEventListener("drop",function(e){e.preventDefault(),k=e.clientX,function(e){e.preventDefault();var t=e.dataTransfer.getData("text"),n=function(e){try{for(;"tab-link"!==e.name;)e=e.parentElement;return e}catch(e){return S(w.size-1).linkButton}}(e.target),i=document.getElementById(t);E>k?n.before(i):n.after(i)}(e)},!0),e.addEventListener("dragover",function(e){e.preventDefault()},!0),e.addEventListener("dragstart",function(e){var t;E=e.clientX,(t=e).dataTransfer.setData("text",t.target.id)})}(),v.tabs&&function(e){if(e){var t=null;e.forEach(function(e){e.selected&&(t=e.id);var n=R(z(e).id);n.innerHTML="function"==typeof e.html?e.html():e.html,n.setAttribute("contenteditable",!0),n.style.overflow="auto",n.style.zIndex="100"}),t&&q(t)}}(v.tabs),M(j(),!1),M(N(),!1)}function S(e){for(var t,i=null,r=0,l=n(w.values());!(t=l()).done;){if(r===e){i=t.value;break}r++}return i}function C(){var e=S(w.size-1).linkButton,t=W()[0];if(t.previousSibling){var n=t.previousSibling||t;n.getBoundingClientRect().width<y.getBoundingClientRect().right-e.getBoundingClientRect().right&&_(n)}}function I(){if(!v.infiniteScroll){var e=W(),t=e[0],n=e[e.length-1];if(t){var i=N(),r=j();t.previousSibling?B(i,!0):B(r,!1),B(i,!!n.nextSibling)}}}function B(e,t){e.style.visibility=t?"visible":"hidden"}function T(){var e=W(),t=e[0],n=e[e.length-1];t&&(M(j(),!!t.previousSibling),M(N(),!!n.nextSibling))}function H(e){var t="#ddd",n="#222",i="#ddd",r="#003355";switch(e){case"dark":n="#002255",r="#003355",t="#fff";break;case"black":n="#111",r="#333",t="#fff";break;case"blue":n="rgba(8, 68, 117, 1)",r="rgba(10, 100, 186, 1)";break;case"green":n="rgba(0, 149, 120, 1)",r="#054";break;case"red":n="rgb(120, 0, 30)",r="rgb(123, 0, 50)";break;case"white":n="#bcd",t="#000",i="#eee";break;default:n="rgba(10, 100, 186, 1)",r="rgba(10, 100, 206, 1)",t="#fff"}!function(e){var t=document.getElementById(x).querySelector("table");t.style.background=e.bg,t.style.color=e.color,f.style.color=p.style.color=b.style.color=e.color}(h={bg:n,color:t,activecolor:i,activeBg:r})}function M(e,t){e.style.visibility=t?"visible":"hidden"}function R(e){var t=w.get(e);return document.getElementById(t.pageId)}function N(){return p}function j(){return f}function O(){return document.getElementById(m)}function z(e){void 0===e&&(e={});var n=Object.keys(A).length,i=e.tabId||t(),r="tab-btn-"+i,l="tab-page-"+i,o=e.label||"Tab"+Number(n+1),s=Object.assign({buttonId:r,target:l,label:o,title:e.title||o,html:e.html||"",closable:e.close||!0,data:e.data||null,icon:e.icon||"",bg:e.bg||"inherit",color:e.color||"inherit",fancy:v.fancy},e),d=function(e,t,n,i){var r=document.createElement("div");return r.setAttribute("id",e),r.setAttribute("data-tab",t),r.setAttribute("data-trigger",n),r.innerHTML=i.text||"",r.style.position="absolute",r.style.padding="8px 16px",r.style.visibility="hidden",r.style.overflow="auto",r.style.top=r.style.bottom=r.style.left=r.style.right="0",r.style.background=i.bg||"",r}(s.target,i,r,s);document.getElementById(g).appendChild(d);var c=a(r,i,s),y=function(e){var t=document.createElement("label");return t.setAttribute("name","tab-link-label-wraper"),t.style.display="flex",t.style.alignContent="center",t.style.alignItems="center",t.style.padding="2px",t.style.height="100%",t.style.width="100%",t.style.color="inherit",t.style.background="transparent",t.style.cursor="pointer",t}(),p=function(e){var t=document.createElement("span");return t.style.marginRight="7px",t.style.color="#b00",t.style.fontWeight="bold",t.innerHTML=e.icon||"kb",t.style.float="left",t}(s),f=function(e,t){var n=document.createElement("label");return n.setAttribute("name","tab-link-label"),n.className="tab-link-label",n.style.margin="0",n.style.paddingRight="2px",n.style.paddingLeft="2px",n.style.verticalAlign="middle",n.style.padding="0",n.style.color="inherit",n.style.maxWidth="80px",n.style.overflow="hidden",n.style.whiteSpace="nowrap",n.style.background="",n.style.cursor="pointer",n.style.fontSize="inherit",n.style.fontWeight="inherit",n.append(document.createTextNode(e)),n.setAttribute("title",t||e),n}(s.label,s.title),b=function(e){var t=document.createElement("a");return t.innerHTML="&times",t.setAttribute("name","close-button"),t.setAttribute("title","close"),t.style.borderRadius="50%",t.style.visibility="hidden",t.style.height=t.style.width="20px",t.style.float="right",t.style.marginRight="2px",t.style.marginLeft="5px",t.style.display="flex",t.style.padding="2px 0px 0px 4px",t.style.alignContent="center",t.style.alignItems="center",t.style.fontSize="18px",t.style.color="#efefef",t.style.fontWeight="700",t.style.background="transparent",t.addEventListener("mouseenter",function(){t.style.background="#555"}),t.addEventListener("mouseleave",function(){t.style.background=""}),t.addEventListener("click",function(t){close(e),t.stopImmediatePropagation()}),t}(i);return s.closable||(b.style.display="none",y.style.paddingRight="7px"),y.append(p),y.append(f),y.append(b),c.append(y),c.addEventListener("mouseenter",function(){u.linkButton.id!==c.id&&(b.style.visibility="visible")}),c.addEventListener("mouseleave",function(){u.linkButton.id!==c.id&&(b.style.visibility="hidden")}),A[c.id]=c,(u=u)?u.linkButton.after(c):O().appendChild(c),w.set(i,{id:i,label:s.label,text:s.text,title:s.title,linkId:s.buttonId,pageId:s.target,data:s.data,selected:s.selected,linkButton:c,page:d}),u=w.get(i),I(),q(c),u}function q(e,t){var i=null;if(console.log(typeof e),console.log(e instanceof HTMLElement),!e)throw new Error("Invalid tab address:");if("string"==typeof e)i=document.getElementById(e);else{if(!e.id)throw new Error("Invalid Button or ID");i=e}if("function"==typeof t&&!1===t())return!1;for(var r,a=n(w.values());!(r=a()).done;){var o=r.value;o.linkButton.id===i.id?(o.selected=!0,u=o,document.getElementById(o.pageId).style.visibility="visible",o.linkButton.lastChild.lastChild.style.visibility="visible"):(o.selected=!1,document.getElementById(o.pageId).style.visibility="hidden",o.linkButton.lastChild.lastChild.style.visibility="hidden")}return function(e,t){if(e&&e.parentElement){for(var n=e.parentElement.children,i=0;i<n.length;i++)n[i].classList.remove("active"),n[i].style.background=t.bg,n[i].style.color=t.color;e.classList.add("active"),e.style.background=t.activeBg,e.style.color=t.activecolor}}(i,h),D(i)||_(i),l.fire("select",u),u}function D(e){var t=e.getBoundingClientRect(),n=O();if(!n)return!1;var i=n.getBoundingClientRect();return t.left>=i.left&&t.right<=i.right}function W(){var e=O();return!!e&&Array.prototype.slice.call(e.querySelectorAll("button")).filter(function(e){return D(e)})}function U(e){v.infiniteScroll?function(e){var t=O();if(t){var n=t.querySelectorAll("button");n.length>1&&(e?n[n.length-1].after(n[0]):n[0].before(n[n.length-1]))}}(e):(function(e){var t=W(),n=t[0],i=t[t.length-1];if(e&&i&&i.nextSibling)n.style.display="none";else if(!e&&n&&n.previousSibling)n.previousSibling.style.display="";else{var r=O();if(!r)return;var l=r.querySelectorAll("button");l.length>0&&(l[l.length-1].style.display="")}}(e),T())}function _(e){if(!D(e)){for(var t=w.size,n=0;!(D(e)||(N().click(),++n>t)););for(n=0;!D(e);){if(j().click(),n++,D(e))return;if(n>t)break}}}return L(r,c),{init:L,add:z,close:function(e){var t=e;if(!e)throw new Error("Invalid tab address:");"string"==typeof id||e.id&&(t=e.id);var n=w.get(t);if(n){var i=n.linkButton,r=i.nextSibling,a=i.previousSibling;return l.fire("before_close",n),i.remove(),document.getElementById(n.pageId).remove(),u=null,w.delete(t),l.fire("close",n),r&&"BUTTON"===r.tagName?q(r):a&&"BUTTON"===a.tagName&&q(a),T(),U(!0),t}},setTheme:H,getTheme:function(){return v.theme},destroy:function(){removeListeners()}}},randomId:t,Emitter:{fire:function(e,t,n,i,r){var l=n||document,a=new CustomEvent(e,{detail:t,cancelable:i||!1,bubbles:r||!1});l.dispatchEvent(a)},on:function(e,t,n){(n||document).addEventListener(e,t)},off:function(e,t,n){(n||document).removeEventListener(e,t)}},Event:l,debounce:i}}()}();
//# sourceMappingURL=tabview.js.map
