{"version":3,"file":"tabview.umd.js","sources":["../index.js"],"sourcesContent":["'use strict';\r\n/* jshint esversion: 8 */\r\nconst TabView = (function () {\r\n    function randomId() {\r\n        return Math.random().toString(36).slice(2);\r\n    }\r\n    // Returns a function, that, as long as it continues to be invoked, will not\r\n    // be triggered. The function will be called after it stops being called for\r\n    // N milliseconds. If `immediate` is passed, trigger the function on the\r\n    // leading edge, instead of the trailing.\r\n    function debounce(func, wait, immediate) {\r\n        let timeout;\r\n        return function () {\r\n            const context = this;\r\n            const args = arguments;\r\n            const later = function () {\r\n                timeout = null;\r\n                if (!immediate) func.apply(context, args);\r\n            };\r\n            const callNow = immediate && !timeout;\r\n            clearTimeout(timeout);\r\n            timeout = setTimeout(later, wait);\r\n            if (callNow) func.apply(context, args);\r\n        };\r\n    }\r\n\r\n    const Emitter = (function () {\r\n        return {\r\n            fire(event, data, context, cancelable, bubbles) {\r\n                const cntx = context || document;\r\n                const myEvent = new CustomEvent(event, {\r\n                    detail: data,\r\n                    cancelable: cancelable || false,\r\n                    bubbles: bubbles || false,\r\n                });\r\n                cntx.dispatchEvent(myEvent);\r\n            },\r\n            on(event, listener, context) {\r\n                const cntx = context || document;\r\n                cntx.addEventListener(event, listener);\r\n            },\r\n            off(event, listener, context) {\r\n                const cntx = context || document;\r\n                cntx.removeEventListener(event, listener);\r\n            },\r\n        };\r\n    })();\r\n\r\n    const Event = function () {\r\n        const _listeners = {};\r\n        return {\r\n            addListener(type, listener) {\r\n                if (typeof _listeners[type] === 'undefined') {\r\n                    _listeners[type] = [];\r\n                }\r\n                _listeners[type].push(listener);\r\n            },\r\n            attach(type, listener) {\r\n                this.addListener(type, listener);\r\n            },\r\n            on(type, listener) {\r\n                this.addListener(type, listener);\r\n            },\r\n\r\n            fire(event, data, target) {\r\n                if (typeof event === 'string') {\r\n                    event = {\r\n                        type: event,\r\n                        data,\r\n                        target,\r\n                    };\r\n                }\r\n                if (!event.target) {\r\n                    event.target = this;\r\n                }\r\n                if (!event.type) {\r\n                    // falsy\r\n                    throw new Error('Type error');\r\n                }\r\n                if (_listeners[event.type] instanceof Array) {\r\n                    const listeners = _listeners[event.type];\r\n                    for (let i = 0, len = listeners.length; i < len; i++) {\r\n                        listeners[i].call(this, event);\r\n                    }\r\n                }\r\n            },\r\n            trigger(type, listener) {\r\n                this.fire(type, listener);\r\n            },\r\n\r\n            removeListener(type, listener) {\r\n                if (_listeners[type] instanceof Array) {\r\n                    const listeners = _listeners[type];\r\n                    for (let i = 0, len = listeners.length; i < len; i++) {\r\n                        if (listeners[i] === listener) {\r\n                            listeners.splice(i, 1);\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            off(type, listener) {\r\n                this.removeListener(type, listener);\r\n            },\r\n        };\r\n    };\r\n\r\n    function createTabButton(linkId, tabId, { target, fancy, title, bg }) {\r\n        const tabBtn = document.createElement('button');\r\n        tabBtn.className = 'tab-link';\r\n        tabBtn.setAttribute('href', '#!');\r\n        tabBtn.setAttribute('id', linkId);\r\n        tabBtn.setAttribute('title', title);\r\n        tabBtn.setAttribute('name', 'tab-link');\r\n        tabBtn.setAttribute('draggable', 'true');\r\n        tabBtn.setAttribute('data-tab', tabId);\r\n        tabBtn.setAttribute('data-target', target);\r\n        tabBtn.style.position = 'relative';\r\n        tabBtn.style.outline = 'none';\r\n        tabBtn.style.height = '100%';\r\n        tabBtn.style.width = 'auto';\r\n        tabBtn.style.border = '0 none transparent';\r\n        tabBtn.style.fontSize = '12px';\r\n        tabBtn.style.fontWeight = '500';\r\n        tabBtn.style.margin = '0';\r\n        tabBtn.style.padding = '0';\r\n        tabBtn.style.boxShadow = 'none';\r\n        tabBtn.style.background = bg || 'inherit';\r\n        tabBtn.style.color = 'inherit';\r\n        tabBtn.style.cursor = 'pointer';\r\n        tabBtn.style.display = 'block';\r\n        tabBtn.style.transition = 'background .4s';\r\n        if (fancy) {\r\n            tabBtn.style.borderRadius = '8px 1px 0px 0px';\r\n        } else {\r\n            tabBtn.style.borderRadius = '1px 1px 0px 0px';\r\n        }\r\n\r\n        return tabBtn;\r\n    }\r\n    function createCloseButton() {\r\n        const closeBtn = document.createElement('a');\r\n        closeBtn.innerHTML = '&times';\r\n        closeBtn.setAttribute('name', 'close-button');\r\n        closeBtn.setAttribute('title', 'close');\r\n        closeBtn.style.borderRadius = '50%';\r\n        closeBtn.style.visibility = 'hidden';\r\n        closeBtn.style.height = closeBtn.style.width = '20px';\r\n        closeBtn.style.float = 'right';\r\n        closeBtn.style.marginRight = '2px';\r\n        closeBtn.style.marginLeft = '5px';\r\n        closeBtn.style.display = 'flex';\r\n        closeBtn.style.padding = '2px 0px 0px 4px';\r\n        closeBtn.style.alignContent = 'center';\r\n        closeBtn.style.alignItems = 'center';\r\n        closeBtn.style.fontSize = '18px';\r\n        closeBtn.style.color = '#efefef';\r\n        closeBtn.style.fontWeight = '700';\r\n        closeBtn.style.background = 'transparent';\r\n        closeBtn.addEventListener('mouseenter', () => {\r\n            closeBtn.style.background = '#555';\r\n        });\r\n        closeBtn.addEventListener('mouseleave', () => {\r\n            closeBtn.style.background = '';\r\n        });\r\n\r\n        return closeBtn;\r\n    }\r\n    function createLabel(text, title) {\r\n        const label = document.createElement('label');\r\n        label.setAttribute('name', 'tab-link-label');\r\n        label.className = 'tab-link-label';\r\n        label.style.margin = '0';\r\n        label.style.paddingRight = '2px';\r\n        label.style.paddingLeft = '2px';\r\n        label.style.verticalAlign = 'middle';\r\n        label.style.padding = '0';\r\n        label.style.color = 'inherit';\r\n        label.style.maxWidth = '80px';\r\n        label.style.overflow = 'hidden';\r\n        label.style.whiteSpace = 'nowrap';\r\n        label.style.background = '';\r\n        label.style.cursor = 'pointer';\r\n        label.style.fontSize = 'inherit';\r\n        label.style.fontWeight = 'inherit';\r\n        label.append(document.createTextNode(text));\r\n        label.setAttribute('title', title || text);\r\n        return label;\r\n    }\r\n    function createTabBarWraper() {\r\n        const tabbarContainer = document.createElement('div');\r\n        tabbarContainer.style.position = 'relative';\r\n        tabbarContainer.style.height = '100%';\r\n        tabbarContainer.style.height = '100%';\r\n        tabbarContainer.style.width = '100%';\r\n        tabbarContainer.style.border = 'none';\r\n        tabbarContainer.style.padding = 'none';\r\n        tabbarContainer.className = 'tabbar-wrapper';\r\n        return tabbarContainer;\r\n    }\r\n    function createBar() {\r\n        const tabBar = document.createElement('div');\r\n        tabBar.setAttribute('id', randomId());\r\n        tabBar.style.position = 'absolute';\r\n        tabBar.style.top = '0';\r\n        tabBar.style.bottom = '0';\r\n        tabBar.style.left = '60px';\r\n        tabBar.style.right = '30px';\r\n        tabBar.style.overflow = 'hidden';\r\n        tabBar.style.padding = '0px';\r\n        tabBar.style.margin = '0px';\r\n        tabBar.style.paddingRight = '7px';\r\n        tabBar.style.background = 'inherit';\r\n        tabBar.style.display = 'flex';\r\n        tabBar.className = 'tab-bar';\r\n        return tabBar;\r\n    }\r\n    function createButton(name, text, float) {\r\n        const btn = document.createElement('button');\r\n        btn.id = randomId();\r\n        btn.setAttribute('name', name);\r\n        btn.style.position = 'relative';\r\n        btn.style.height = '100%';\r\n        btn.style.border = '0 none transparent';\r\n        btn.style.background = 'transparent';\r\n        btn.style.color = 'white';\r\n        btn.style.marginRight = btn.style.marginLeft = '2px';\r\n        btn.style.padding = '2px';\r\n        btn.style.paddingLeft = btn.style.paddingRight = '7px';\r\n        btn.style.cursor = 'pointer';\r\n        btn.style.fontWeight = '900';\r\n        btn.style.fontSize = '14px';\r\n        btn.style.float = float || 'none';\r\n        btn.style.outline = 'none';\r\n        btn.style.borderRadius = '4px 4px';\r\n        btn.innerHTML = text;\r\n        return btn;\r\n    }\r\n    function createImage(options) {\r\n        const img = document.createElement('span');\r\n        img.style.marginRight = '7px';\r\n        img.style.color = '#b00';\r\n        img.style.fontWeight = 'bold';\r\n        img.innerHTML = options.icon || 'kb';\r\n        img.style.float = 'left';\r\n        return img;\r\n    }\r\n    function createLabelContainer(options) {\r\n        const labelContainer = document.createElement('label');\r\n        labelContainer.setAttribute('name', 'tab-link-label-wraper');\r\n        labelContainer.style.display = 'flex';\r\n        labelContainer.style.alignContent = 'center';\r\n        labelContainer.style.alignItems = 'center';\r\n        labelContainer.style.padding = '2px';\r\n        labelContainer.style.height = '100%';\r\n        labelContainer.style.width = '100%';\r\n        labelContainer.style.color = 'inherit';\r\n        labelContainer.style.background = 'transparent';\r\n        labelContainer.style.cursor = 'pointer';\r\n\r\n        return labelContainer;\r\n    }\r\n    function createTable(tabBarWrapper, pagePanel, settings = {}) {\r\n        let banner;\r\n        let footer;\r\n        if (settings.banner) {\r\n            banner = addBanner();\r\n        }\r\n        if (settings.footer) {\r\n            footer = addFooter();\r\n        }\r\n        const doc = document.createDocumentFragment();\r\n        const table = document.createElement('table');\r\n        table.style.width = table.style.height = '100%';\r\n        doc.append(table);\r\n\r\n        const thead = document.createElement('thead');\r\n        table.append(thead);\r\n\r\n        const bannerRow = document.createElement('tr');\r\n        bannerRow.style.minHeight = '0px';\r\n        bannerRow.style.maxHeight = '80px';\r\n        thead.append(bannerRow);\r\n        const th = document.createElement('th');\r\n        // th.setAttribute('colspan',3);\r\n        th.style.textAlign = 'left';\r\n        th.style.padding = '0';\r\n        if (banner) {\r\n            th.append(banner);\r\n        } else {\r\n            bannerRow.style.display = 'none';\r\n        }\r\n        bannerRow.appendChild(th);\r\n\r\n        const tbody = document.createElement('tbody');\r\n        table.append(tbody);\r\n\r\n        const linkRow = document.createElement('tr');\r\n        linkRow.style.minHeight = '24px';\r\n        linkRow.style.height = `${settings.tabHeight}px`;\r\n        linkRow.style.padding = '0';\r\n        tbody.append(linkRow);\r\n\r\n        let td = document.createElement('td');\r\n        td.style.overflow = 'hidden';\r\n        td.style.whiteSpace = 'nowrap';\r\n        td.style.textAlign = 'left';\r\n        td.style.padding = '0';\r\n        td.append(tabBarWrapper);\r\n        linkRow.appendChild(td);\r\n        table.style.borderCollapse =\r\n            linkRow.style.borderCollapse =\r\n            td.style.borderCollapse =\r\n                'collapse';\r\n        table.style.border =\r\n            linkRow.style.border =\r\n            td.style.border =\r\n                '0 none transparent';\r\n\r\n        const pageRow = document.createElement('tr');\r\n        tbody.append(pageRow);\r\n        td = document.createElement('td');\r\n        td.append(pagePanel);\r\n        td.style.textAlign = 'left';\r\n        td.style.padding = '0';\r\n        pageRow.appendChild(td);\r\n\r\n        const linkRow2 = document.createElement('tr');\r\n        tbody.append(linkRow2);\r\n        td = document.createElement('td');\r\n        td.style.textAlign = 'left';\r\n        td.style.padding = '0';\r\n        linkRow2.appendChild(td);\r\n        linkRow2.style.minHeight = '24px';\r\n        linkRow2.style.height = `${settings.tabHeight}px`;\r\n\r\n        const footerRow = document.createElement('tr');\r\n        tbody.append(footerRow);\r\n        td = document.createElement('td');\r\n        footerRow.appendChild(td);\r\n        footerRow.style.maxHeight = '24px';\r\n        td = document.createElement('td');\r\n        td.style.padding = '0';\r\n        if (footer) {\r\n            td.append(footer || document.createTextNode(''));\r\n        } else {\r\n            footerRow.style.display = 'none';\r\n        }\r\n        footerRow.appendChild(td);\r\n        td = document.createElement('td');\r\n        td.style.padding = '0';\r\n        footerRow.appendChild(td);\r\n        if (settings.bottom) {\r\n            linkRow2.firstElementChild.nextSibling.appendChild(tabBarWrapper);\r\n            linkRow.style.display = 'none';\r\n        } else {\r\n            linkRow2.style.display = 'none';\r\n        }\r\n        return doc;\r\n    }\r\n    function createPage(pageId, tabId, linkId, options) {\r\n        const page = document.createElement('div');\r\n        page.setAttribute('id', pageId);\r\n        page.setAttribute('data-tab', tabId);\r\n        page.setAttribute('data-trigger', linkId);\r\n        page.innerHTML = options.text || '';\r\n        page.style.position = 'absolute';\r\n        page.style.padding = '8px 16px';\r\n        page.style.visibility = 'hidden';\r\n        page.style.overflow = 'auto';\r\n        page.style.top =\r\n            page.style.bottom =\r\n            page.style.left =\r\n            page.style.right =\r\n                '0';\r\n        // page.style.top='0'; do not specify top!!!\r\n        page.style.background = options.bg || '';\r\n        return page;\r\n    }\r\n    function createPagePanel() {\r\n        const panel = document.createElement('div');\r\n        panel.setAttribute('id', randomId());\r\n        panel.style.position = 'relative';\r\n        panel.className = 'tab-panel';\r\n        panel.style.width = '100%';\r\n        panel.style.height = '100%';\r\n        panel.style.overflow = 'hidden';\r\n        panel.style.margin = '0';\r\n        panel.style.top = '0';\r\n        panel.style.background = '';\r\n        return panel;\r\n    }\r\n    function loadFromMarkup(el, fn) {\r\n        if (typeof el === 'string') {\r\n            el = document.getElementById(el);\r\n        }\r\n        if (!el || !el.children) {\r\n            throw new Error('Invalid element to load markup');\r\n        }\r\n        const markup = el.children;\r\n        // let doc=document.createDocumentFragment();\r\n        if (!markup || markup.length === 0) return fn();\r\n        const banner = el.querySelector('.tab-banner');\r\n        const footer = el.querySelector('.tab-footer');\r\n        const links = el.querySelector('.tab-links').children;\r\n        const pages = el.querySelector('.tab-pages').children;\r\n        const data = {\r\n            banner: banner.innerHTML,\r\n            footer: footer.innerHTML,\r\n            tabs: [],\r\n        };\r\n        if (banner) banner.remove();\r\n        if (footer) footer.remove();\r\n\r\n        while (links.length > 0) {\r\n            const node = links[0];\r\n            const page = pages[0];\r\n            if (!node) continue;\r\n            data.tabs.push({\r\n                id: node.id !== '' ? node.id : null,\r\n                label: node.textContent,\r\n                title: node.getAttribute('title'),\r\n                closable: node.getAttribute('closable'),\r\n                target: node.getAttribute('data-target'),\r\n                selected: node.getAttribute('selected'),\r\n                html: page ? page.innerHTML : '',\r\n                bg: page ? page.style.background : '#0bc',\r\n                style: node.getAttribute('tab-style'),\r\n            });\r\n            node.remove();\r\n            page.remove();\r\n        }\r\n        return data;\r\n    }\r\n    function addFooter() {\r\n        const footer = document.createElement('span');\r\n        footer.setAttribute('name', 'tab-footer');\r\n        footer.innerHTML = settings.footer;\r\n        footer.className = 'tab-footer';\r\n        footer.style.left = '0';\r\n        footer.style.right = '0';\r\n        footer.style.bottom = '0';\r\n        footer.style.padding = '2px';\r\n        footer.style.display = 'flex';\r\n        footer.style.justifyContent = 'center';\r\n        footer.style.alignItems = 'center';\r\n        // footer.style.background='#030';\r\n        // footer.style.borderTop='1px solid #020';\r\n\r\n        return footer;\r\n    }\r\n    function addBanner() {\r\n        const banner = document.createElement('span');\r\n        banner.setAttribute('name', 'tab-banner');\r\n        banner.innerHTML =\r\n            typeof settings.banner === 'string'\r\n                ? settings.banner\r\n                : settings.banner.innerHTML;\r\n        banner.style.display = 'flex';\r\n        banner.style.padding = '5px';\r\n        banner.style.justifyContent = 'center';\r\n        banner.style.alignItems = 'center';\r\n        banner.className = 'tab-banner';\r\n        banner.style.background = 'green';\r\n\r\n        return banner;\r\n    }\r\n    function mountTab(el, doc, tabPagePanel) {\r\n        // const container = typeof el === 'object' ? el : document.getElementById(el);\r\n        container.appendChild(tabPagePanel);\r\n        const tabbar = doc.querySelector('div');\r\n        let banner;\r\n        let footer;\r\n        if (settings.banner) {\r\n            banner = addBanner(container);\r\n            container.prepend(banner);\r\n        }\r\n        if (settings.bottom) {\r\n            container.lastChild.after(doc);\r\n        } else {\r\n            container.lastChild.before(doc);\r\n        }\r\n        if (settings.footer) {\r\n            footer = addFooter(container);\r\n            container.lastChild.after(footer);\r\n        }\r\n        // container.style.height='100%';\r\n        // container.style.width='100%';\r\n        container.style.top =\r\n            container.style.bottom =\r\n            container.style.left =\r\n            container.style.right =\r\n                '0';\r\n        const bannerBox = banner ? banner.getBoundingClientRect() : null;\r\n        const bannerBottom = banner ? bannerBox.bottom - bannerBox.top : 0;\r\n\r\n        const footerBox = footer ? footer.getBoundingClientRect() : null;\r\n        const footerTop = footer ? footerBox.bottom - footerBox.top : 0;\r\n\r\n        if (settings.bottom) {\r\n            // tab bar is at bottom oftab window\r\n            tabbar.style.bottom = `${footerTop}px`;\r\n        } else {\r\n            tabbar.style.top = `${bannerBottom}px`;\r\n        }\r\n        tabbar.style.border = '0px none transparent';\r\n        tabPagePanel.style.border = '0px none transparent';\r\n    }\r\n    function applySelection(el, options) {\r\n        if (!el || !el.parentElement) {\r\n            return;\r\n        }\r\n        const tablinks = el.parentElement.children;\r\n        // console.log(el.parentElement.parentElement);\r\n        for (let i = 0; i < tablinks.length; i++) {\r\n            tablinks[i].classList.remove('active');\r\n            tablinks[i].style.background = options.bg;\r\n            tablinks[i].style.color = options.color;\r\n            // tablinks[i].lastChild.lastChild.style.visibility = \"hidden\";\r\n        }\r\n\r\n        el.classList.add('active');\r\n        el.style.background = options.activeBg;\r\n        el.style.color = options.activecolor;\r\n        // el.lastChild.lastChild.style.visibility = \"visible\";\r\n    }\r\n    const createTabs = function (el, options) {\r\n        const tabIndex = -1;\r\n        const currentIndex = 0;\r\n        const customEvent = new Event();\r\n        let selectedTab;\r\n        let tabBar;\r\n        let rightBtn;\r\n        let leftBtn;\r\n        let addBtn;\r\n        let pagePanelId;\r\n        let tabBarId;\r\n        let themeOptions;\r\n        let tabSettings;\r\n        let container;\r\n        let tabButtonsCount;\r\n        let dragStartPoint;\r\n        let dragStopPoint;\r\n        const tabs = new Map();\r\n        const buttons = {};\r\n        const links = {};\r\n        const pages = {};\r\n        const hiddenTabs = [];\r\n\r\n        init(el, options);\r\n        /**\r\n         * Initialize tab container\r\n         * @param {HTMLElement} el HTMLElement to attach tabs\r\n         * @param {Object} options Additional settings\r\n         * @returns void\r\n         */\r\n        function init(el, options) {\r\n            container =\r\n                typeof el === 'object' && el instanceof HTMLElement\r\n                    ? el\r\n                    : document.getElementById(el);\r\n            themeOptions = options;\r\n            const data = options.loadFromMarkup ? loadFromMarkup(el) : null;\r\n            if (data) {\r\n                themeOptions = Object.assign(themeOptions, data);\r\n            }\r\n            applySettings(themeOptions);\r\n            leftBtn = createButton('left-nav-button', '&lt;', 'left');\r\n            // leftNavId = leftBtn.id;\r\n            leftBtn.addEventListener('mousedown', () => {\r\n                scroll(false);\r\n            });\r\n\r\n            addBtn = createButton('add-tab-button', '+', 'left');\r\n            // addBtnId = addBtn.id;\r\n            if (themeOptions.add) {\r\n                addBtn.style.visibility = 'visible';\r\n            } else {\r\n                addBtn.style.visibility = 'hidden';\r\n            }\r\n            addBtn.addEventListener('mousedown', () => {\r\n                customEvent.fire('add-tab-click', randomId());\r\n            });\r\n            tabBar = createBar();\r\n            tabBarId = tabBar.id;\r\n\r\n            const tabBarWraper = createTabBarWraper();\r\n            tabBarWraper.append(tabBar);\r\n            tabBarWraper.appendChild(leftBtn);\r\n            tabBarWraper.appendChild(addBtn);\r\n            /////tabBarWraper.style.background = 'purple';\r\n            rightBtn = createButton('right-nav-button', '&gt;', 'right');\r\n            rightBtn.addEventListener('mousedown', () => {\r\n                scroll(true);\r\n            });\r\n            tabBarWraper.appendChild(rightBtn);\r\n            const pagePanel = createPagePanel();\r\n            pagePanelId = pagePanel.id;\r\n            const layout = createTable(tabBarWraper, pagePanel, themeOptions);\r\n\r\n            container.append(layout);\r\n            setTheme(themeOptions.theme);\r\n            attachDomEventListeners(this);\r\n            if (themeOptions.tabs) {\r\n                dynamicLoad(themeOptions.tabs);\r\n            }\r\n            toggleNavigator(getLeftNavButton(), false);\r\n            toggleNavigator(getRightNavButton(), false);\r\n            ///////rightBtn.style.visibility = 'visible';\r\n        }\r\n\r\n        function getTabAtIndex(index) {\r\n            let tab = null;\r\n            let i = 0;\r\n            for (const value of tabs.values()) {\r\n                if (i === index) {\r\n                    tab = value;\r\n                    break;\r\n                }\r\n                i++;\r\n            }\r\n            return tab;\r\n        }\r\n\r\n        function unhide() {\r\n            // const tabs = tabs.entries()\r\n            const last = getTabAtIndex(tabs.size - 1).linkButton;\r\n            const visibles = getVisibleTabs();\r\n            const firstVisible = visibles[0];\r\n            if (!firstVisible.previousSibling) return;\r\n            // let lastVisible=visibles[visibles.length-1];\r\n            const lastHidden = firstVisible.previousSibling || firstVisible;\r\n            const { width } = lastHidden.getBoundingClientRect();\r\n            const gap =\r\n                tabBar.getBoundingClientRect().right -\r\n                last.getBoundingClientRect().right;\r\n            if (width < gap) {\r\n                scrollLinkIntoView(lastHidden);\r\n            }\r\n        }\r\n\r\n        function attachDomEventListeners() {\r\n            const tabBar = getTabBar();\r\n            window.addEventListener('resize', () => {\r\n                debounce(() => {\r\n                    if (!selectedTab) return false;\r\n                    if (!isLinkVisible(selectedTab.linkButton)) {\r\n                        scrollLinkIntoView(selectedTab.linkButton);\r\n                    } else {\r\n                        unhide();\r\n                        scrollLinkIntoView(selectedTab.linkButton);\r\n                    }\r\n                    showHideNavButton();\r\n                }, 200);\r\n            });\r\n\r\n            tabBar.addEventListener(\r\n                'keyup',\r\n                (event) => {\r\n                    handleKeypress(event);\r\n                },\r\n                true\r\n            );\r\n\r\n            tabBar.addEventListener(\r\n                'drop',\r\n                (event) => {\r\n                    event.preventDefault();\r\n\r\n                    dragStopPoint = event.clientX;\r\n                    drop(event);\r\n                },\r\n                true\r\n            );\r\n\r\n            tabBar.addEventListener(\r\n                'dragover',\r\n                (event) => {\r\n                    event.preventDefault();\r\n                },\r\n                true\r\n            );\r\n\r\n            tabBar.addEventListener('dragstart', (event) => {\r\n                dragStartPoint = event.clientX;\r\n                drag(event);\r\n            });\r\n        }\r\n\r\n        function handleKeypress(e) {\r\n            const code = e.keyCode;\r\n            const link = selectedTab.button;\r\n            // eslint-disable-next-line default-case\r\n            if (!link) return;\r\n            switch (code) {\r\n                case 37:\r\n                    if (link.previousSibling) {\r\n                        select(link.previousSibling.getAttribute('data-tab'));\r\n                    }\r\n                    break; // left key\r\n                case 39:\r\n                    if (link.nextSibling) {\r\n                        select(link.nextSibling.getAttribute('data-tab'));\r\n                    }\r\n                    break; // right key\r\n                case 38:\r\n                    break; // up key\r\n                case 40:\r\n                    link.blur();\r\n                    break; // down key\r\n                case 13:\r\n                    break; // enter key\r\n                default:\r\n                    break;\r\n            }\r\n        }\r\n\r\n        function showHideNavButton() {\r\n            // console.log(settings);\r\n            if (themeOptions.infiniteScroll) {\r\n                // return;\r\n            }\r\n            const visibleButtons = getVisibleTabs();\r\n            const firstVisibleButton = visibleButtons[0];\r\n            const lastVisibleButton = visibleButtons[visibleButtons.length - 1];\r\n\r\n            if (!firstVisibleButton) return;\r\n            const rBtn = getRightNavButton();\r\n            const lBtn = getLeftNavButton();\r\n            if (firstVisibleButton.previousSibling) {\r\n                toggleNavButton(rBtn, true);\r\n            } else {\r\n                toggleNavButton(lBtn, false);\r\n            }\r\n            if (lastVisibleButton.nextSibling) {\r\n                toggleNavButton(rBtn, true);\r\n            } else {\r\n                toggleNavButton(rBtn, false);\r\n            }\r\n        }\r\n\r\n        function toggleNavButton(el, show) {\r\n            if (show) {\r\n                el.style.visibility = 'visible';\r\n            } else {\r\n                el.style.visibility = 'hidden';\r\n            }\r\n        }\r\n\r\n        function toggleAddButton(show) {\r\n            if (show) {\r\n                getAddButton().style.visibility = 'visible';\r\n            } else {\r\n                getAddButton().style.visibility = 'hidden';\r\n            }\r\n        }\r\n\r\n        function showHideNavigator() {\r\n            const visibleButtons = getVisibleTabs();\r\n            const firstVisibleButton = visibleButtons[0];\r\n            const lastVisibleButton = visibleButtons[visibleButtons.length - 1];\r\n\r\n            if (!firstVisibleButton) return;\r\n            if (firstVisibleButton.previousSibling) {\r\n                toggleNavigator(getLeftNavButton(), true);\r\n            } else {\r\n                toggleNavigator(getLeftNavButton(), false);\r\n            }\r\n            if (lastVisibleButton.nextSibling) {\r\n                toggleNavigator(getRightNavButton(), true);\r\n            } else {\r\n                toggleNavigator(getRightNavButton(), false);\r\n            }\r\n        }\r\n\r\n        function applyTheme(options) {\r\n            const table = getContainer().querySelector('table');\r\n            table.style.background = options.bg;\r\n            table.style.color = options.color;\r\n            leftBtn.style.color =\r\n                rightBtn.style.color =\r\n                addBtn.style.color =\r\n                    options.color;\r\n        }\r\n\r\n        // Public API\r\n        /** *\r\n         * @param theme String\r\n         * @returns null\r\n         */\r\n        function setTheme(theme) {\r\n            let color = '#ddd';\r\n            let bg = '#222';\r\n            let activecolor = '#ddd';\r\n            let activeBg = '#003355';\r\n            switch (theme) {\r\n                case 'dark':\r\n                    bg = '#002255';\r\n                    activeBg = '#003355';\r\n                    color = '#fff';\r\n                    break;\r\n                case 'black':\r\n                    bg = '#111';\r\n                    activeBg = '#333';\r\n                    color = '#fff';\r\n                    break;\r\n                case 'blue':\r\n                    bg = 'rgba(8, 68, 117, 1)';\r\n                    activeBg = 'rgba(10, 100, 186, 1)';\r\n                    break;\r\n                case 'green':\r\n                    bg = 'rgba(0, 149, 120, 1)';\r\n                    activeBg = '#054';\r\n                    break;\r\n                case 'red':\r\n                    bg = 'rgb(120, 0, 30)';\r\n                    activeBg = 'rgb(123, 0, 50)';\r\n                    break;\r\n                case 'white':\r\n                    bg = '#bcd';\r\n                    color = '#000';\r\n                    activecolor = '#eee';\r\n                    break;\r\n                default:\r\n                    bg = 'rgba(10, 100, 186, 1)';\r\n                    activeBg = 'rgba(10, 100, 206, 1)';\r\n                    color = '#fff';\r\n                    break;\r\n            }\r\n            tabSettings = {\r\n                bg,\r\n                color,\r\n                activecolor,\r\n                activeBg,\r\n            };\r\n            applyTheme(tabSettings);\r\n        }\r\n\r\n        function getTheme() {\r\n            return themeOptions.theme;\r\n        }\r\n\r\n        function toggleNavigator(el, show) {\r\n            if (show) {\r\n                el.style.visibility = 'visible';\r\n            } else {\r\n                el.style.visibility = 'hidden';\r\n            }\r\n        }\r\n\r\n        function getSelectedTab() {\r\n            return selectedTab;\r\n        }\r\n\r\n        function getTab(tabId) {\r\n            return tabs.get(tabId);\r\n        }\r\n\r\n        function setContent(id, content) {\r\n            const page = tabs.get(id).pageId;\r\n            document.getElementById(page).innerHTML = content;\r\n        }\r\n\r\n        function setTitle(id, title) {\r\n            const link = tabs.get(id).linkId;\r\n            document.getElementById(link).firstElementChild.innerHTML = title;\r\n        }\r\n        function applySettings(options) {\r\n            const mySettings = {\r\n                limit: undefined,\r\n                banner: undefined,\r\n                footer: undefined,\r\n                closeOnClick: undefined,\r\n                infiniteScroll: false,\r\n                fancy: false,\r\n                add: false,\r\n                // width   : '100%',\r\n                // height  : '100%',\r\n                theme: '',\r\n                tabHeight: 32,\r\n                leftTooltip: '&lt;',\r\n                rightTooltip: '&gt;',\r\n                addTooltip: '+',\r\n                data: null,\r\n            };\r\n\r\n            themeOptions = Object.assign(mySettings, options);\r\n        }\r\n        function dynamicLoad(tabs) {\r\n            if (!tabs) return;\r\n            let selected = null;\r\n            tabs.forEach((d) => {\r\n                if (d.selected) {\r\n                    selected = d.id;\r\n                }\r\n                const tab = add(d);\r\n                const page = getPage(tab.id);\r\n                // page.parentElement.style.top='80px';\r\n                // page.background='#054';\r\n                page.innerHTML =\r\n                    typeof d.html === 'function' ? d.html() : d.html;\r\n                page.setAttribute('contenteditable', true);\r\n                page.style.overflow = 'auto';\r\n                page.style.zIndex = '100';\r\n            });\r\n            if (selected) {\r\n                select(selected);\r\n            }\r\n        }\r\n\r\n        function getPage(tabId) {\r\n            const tab = tabs.get(tabId);\r\n            return document.getElementById(tab.pageId);\r\n        }\r\n\r\n        function getLinkButton(linkId) {\r\n            return document.getElementById(linkId);\r\n        }\r\n\r\n        function getCloswButton(id) {\r\n            const linkButton = getLinkButton(id);\r\n            return linkButton ? linkButton.lastElementChild() : null;\r\n        }\r\n\r\n        function getTabPagePanel() {\r\n            return document.getElementById(pagePanelId);\r\n        }\r\n\r\n        function getRightNavButton() {\r\n            return rightBtn;\r\n        }\r\n\r\n        function getLeftNavButton() {\r\n            return leftBtn;\r\n        }\r\n\r\n        function getAddButton() {\r\n            return addBtn;\r\n        }\r\n\r\n        function getFooter() {\r\n            return document.getElementById(footerId);\r\n        }\r\n\r\n        function getBanner() {\r\n            return document.getElementById(bannerId);\r\n        }\r\n\r\n        function getTabBar() {\r\n            return document.getElementById(tabBarId);\r\n        }\r\n\r\n        function getContainer() {\r\n            return container; // document.getElementById(containerId);\r\n        }\r\n        function hideExtraTabs() {\r\n            const links = Object.values(links);\r\n            const numTotal = links.length;\r\n            const numVisible = Math.min(numTotal, themeOptions.limit);\r\n            for (let i = 0; i < links.length; i++) {\r\n                links[i].style.display = 'none'; // hide xo tabs.\r\n            }\r\n            for (let j = 0; j < numVisible; j++) {\r\n                links[j].style.display = 'inline'; // Show visible tabs.\r\n            }\r\n        }\r\n\r\n        function getLinkTarget(el) {\r\n            try {\r\n                while (el.name !== 'tab-link') {\r\n                    el = el.parentElement;\r\n                }\r\n                return el;\r\n            } catch (e) {\r\n                // const length = tabs.size - 1\r\n                return getTabAtIndex(tabs.size - 1).linkButton;\r\n                // Object.values(tabs)[length].linkButton\r\n            }\r\n        }\r\n\r\n        function allowDrop(ev) {\r\n            ev.preventDefault();\r\n        }\r\n\r\n        function drag(ev) {\r\n            ev.dataTransfer.setData('text', ev.target.id);\r\n        }\r\n\r\n        function drop(ev) {\r\n            ev.preventDefault();\r\n            const data = ev.dataTransfer.getData('text');\r\n            // do not drop on label wrappers or close button\r\n            const target = getLinkTarget(ev.target);\r\n            const dataEl = document.getElementById(data);\r\n\r\n            if (dragStartPoint > dragStopPoint) {\r\n                target.before(dataEl);\r\n            } else {\r\n                target.after(dataEl);\r\n            }\r\n            // target.parentNode.insertBefore(dataEl,dragStartPoint>dragStopPoint?target:target.nextSibling);\r\n        }\r\n        function getSettings(options) {\r\n            const { length } = Object.keys(buttons);\r\n            const tabId = options.tabId || randomId();\r\n            const buttonId = `tab-btn-${tabId}`;\r\n            const target = `tab-page-${tabId}`;\r\n            const tabLabel = options.label || `Tab${Number(length + 1)}`;\r\n            const title = options.title || tabLabel;\r\n\r\n            const settings = {\r\n                tabId,\r\n                buttonId,\r\n                target,\r\n                label: tabLabel,\r\n                title,\r\n                html: options.html || '',\r\n                closable: options.close || true,\r\n                data: options.data || null,\r\n                icon: options.icon || '',\r\n                bg: options.bg || 'inherit',\r\n                color: options.color || 'inherit',\r\n                fancy: themeOptions.fancy,\r\n            };\r\n            return Object.assign(settings, options);\r\n        }\r\n        function handleTabClick(e) {\r\n            e.stopImmediatePropagation();\r\n            select(this.getAttribute('data-tab'));\r\n        }\r\n        function add(options = {}) {\r\n            const tabSettings = getSettings(options); // Object.assign(getSettings(options), options);\r\n            const page = createPage(\r\n                tabSettings.target,\r\n                tabSettings.tabId,\r\n                tabSettings.buttonId,\r\n                tabSettings\r\n            );\r\n\r\n            getTabPagePanel().appendChild(page);\r\n            const tabBtn = createTabButton(\r\n                tabSettings.buttonId,\r\n                tabSettings.tabId,\r\n                tabSettings\r\n            );\r\n            const labelContainer = createLabelContainer(tabSettings);\r\n            const img = createImage(tabSettings);\r\n            const label = createLabel(tabSettings.label, tabSettings.title);\r\n            const closeBtn = createCloseButton(tabSettings.tabId);\r\n\r\n            if (!tabSettings.closable) {\r\n                closeBtn.style.display = 'none';\r\n                labelContainer.style.paddingRight = '7px';\r\n            }\r\n            labelContainer.append(img);\r\n            labelContainer.append(label);\r\n            labelContainer.append(closeBtn);\r\n            tabBtn.append(labelContainer);\r\n            tabBtn.addEventListener('mouseup', handleTabClick);\r\n            tabBtn.addEventListener('mouseenter', () => {\r\n                if (selectedTab.linkButton.id === tabBtn.id) return;\r\n                closeBtn.style.visibility = 'visible';\r\n            });\r\n            tabBtn.addEventListener('mouseleave', () => {\r\n                if (selectedTab.linkButton.id === tabBtn.id) return;\r\n                closeBtn.style.visibility = 'hidden';\r\n            });\r\n            closeBtn.addEventListener('mousedown', (e) => {\r\n                close(tabSettings.tabId); // linkButton.getAttribute(\"data-tab\"));\r\n                e.stopImmediatePropagation();\r\n            });\r\n            buttons[tabBtn.id] = tabBtn;\r\n            // If there was a selected button already, insert after it\r\n            // otherwise append at the end of tab list\r\n            if ((selectedTab = getSelectedTab())) {\r\n                // tab.selected=false;\r\n                selectedTab.linkButton.after(tabBtn);\r\n                // getLinkButton(tab.linkId).after(linkButton);\r\n            } else {\r\n                getTabBar().appendChild(tabBtn);\r\n            }\r\n            tabs.set(tabSettings.tabId, {\r\n                id: tabSettings.tabId,\r\n                label: tabSettings.label,\r\n                text: tabSettings.text,\r\n                title: tabSettings.title,\r\n                linkId: tabSettings.buttonId,\r\n                pageId: tabSettings.target,\r\n                data: tabSettings.data,\r\n                selected: tabSettings.buttonId,\r\n                linkButton: tabBtn,\r\n                page,\r\n            });\r\n            selectedTab = tabs.get(tabSettings.tabId);\r\n            showHideNavButton();\r\n            select(tabBtn.getAttribute('data-tab'));\r\n            if (tabSettings.selected) {\r\n                return selectedTab;\r\n            }\r\n            return selectedTab;\r\n        }\r\n\r\n        function select(tabId) {\r\n            if (!tabId) {\r\n                throw new Error('Invalid tab address:');\r\n            }\r\n\r\n            if (selectedTab) {\r\n                document.getElementById(selectedTab.pageId).style.visibility =\r\n                    'hidden';\r\n                selectedTab.linkButton.lastChild.lastChild.style.visibility =\r\n                    'hidden';\r\n                selectedTab.selected = false;\r\n            }\r\n\r\n            let tab = tabs.get(tabId);\r\n            // let tabPage = selectedTab.getAttribute('data-target');\r\n            document.getElementById(tab.pageId).style.visibility = 'visible';\r\n            tab.linkButton.lastChild.lastChild.style.visibility = 'visible';\r\n            tab.selected = true;\r\n            applySelection(tab.linkButton, tabSettings);\r\n            if (!isLinkVisible(tab.linkButton)) {\r\n                scrollLinkIntoView(tab.linkButton);\r\n            }\r\n            selectedTab = tab;\r\n            customEvent.fire('select', selectedTab);\r\n\r\n            return selectedTab;\r\n        }\r\n\r\n        function close(tabId) {\r\n            if (!tabId) {\r\n                throw new Error('Invalid tab address:');\r\n            }\r\n            const tab = tabs.get(tabId);\r\n            // console.log(el, tab, tabs);\r\n            if (!tab) return;\r\n            const link = tab.linkButton; // getLinkButton(tab.linkId);\r\n            const next = link.nextSibling;\r\n            const prev = link.previousSibling;\r\n            customEvent.fire('before_close', tab);\r\n            link.remove();\r\n            document.getElementById(tab.pageId).remove();\r\n            selectedTab = null; // delete selectedTab;\r\n            tabs.delete(tabId);\r\n\r\n            customEvent.fire('close', tab);\r\n            if (next && next.getAttribute('data-tab')) {\r\n                select(next.getAttribute('data-tab'));\r\n            } else if (prev && prev.getAttribute('data-tab')) {\r\n                select(prev.getAttribute('data-tab'));\r\n            }\r\n            showHideNavigator();\r\n            scroll(true);\r\n            return tabId;\r\n        }\r\n\r\n        function isLinkVisible(link) {\r\n            const box = link.getBoundingClientRect();\r\n            const tabbar = getTabBar();\r\n            if (!tabbar) return false;\r\n            const box1 = tabbar.getBoundingClientRect();\r\n            return box.left >= box1.left && box.right <= box1.right;\r\n        }\r\n\r\n        function getVisibleTabs() {\r\n            const tabbar = getTabBar();\r\n            if (!tabbar) return false;\r\n            const links = Array.prototype.slice.call(\r\n                tabbar.querySelectorAll('button')\r\n            );\r\n            return links.filter((link) => isLinkVisible(link));\r\n        }\r\n\r\n        function getHiddenTabs() {\r\n            const links = Array.prototype.slice.call(\r\n                getTabBar().querySelectorAll('button')\r\n            );\r\n            return links.filter((link) => !isLinkVisible(link));\r\n        }\r\n\r\n        function scroll(right) {\r\n            if (themeOptions.infiniteScroll) {\r\n                infiniteScroll(right);\r\n            } else {\r\n                finiteScroll(right);\r\n                showHideNavigator();\r\n            }\r\n        }\r\n\r\n        function scrollLinkIntoView(el) {\r\n            if (isLinkVisible(el)) return;\r\n            const max = tabs.size;\r\n            let count = 0;\r\n            while (!isLinkVisible(el)) {\r\n                getRightNavButton().click();\r\n                count++;\r\n                if (count > max) break;\r\n            }\r\n            count = 0;\r\n            while (!isLinkVisible(el)) {\r\n                getLeftNavButton().click();\r\n                count++;\r\n                if (isLinkVisible(el)) return;\r\n                if (count > max) break;\r\n            }\r\n        }\r\n\r\n        function finiteScroll(right) {\r\n            tabButtonsCount = tabButtonsCount || 1;\r\n            tabButtonsCount++;\r\n            const visibleButtons = getVisibleTabs();\r\n            const firstVisibleButton = visibleButtons[0];\r\n            const lastVisibleButton = visibleButtons[visibleButtons.length - 1];\r\n            if (right && lastVisibleButton && lastVisibleButton.nextSibling) {\r\n                firstVisibleButton.style.display = 'none';\r\n            } else if (\r\n                !right &&\r\n                firstVisibleButton &&\r\n                firstVisibleButton.previousSibling\r\n            ) {\r\n                firstVisibleButton.previousSibling.style.display = '';\r\n            } else {\r\n                const tabbar = getTabBar();\r\n                if (!tabbar) return;\r\n                const bts = tabbar.querySelectorAll('button');\r\n                if (bts.length > 0) {\r\n                    bts[bts.length - 1].style.display = '';\r\n                }\r\n            }\r\n        }\r\n\r\n        function infiniteScroll(right) {\r\n            const tabbar = getTabBar();\r\n            if (!tabbar) return;\r\n            const links = tabbar.querySelectorAll('button');\r\n            if (links.length > 1) {\r\n                if (right) {\r\n                    links[links.length - 1].after(links[0]);\r\n                } else {\r\n                    links[0].before(links[links.length - 1]);\r\n                }\r\n            }\r\n        }\r\n        function onSelect(fn) {\r\n            customEvent.addListener('select', fn);\r\n        }\r\n        function onClose(fn) {\r\n            customEvent.addListener('close', fn);\r\n        }\r\n        function destroy() {\r\n            // removeListeners();\r\n            console.log('Tabs Destroyed');\r\n        }\r\n        return {\r\n            add,\r\n            close,\r\n            select,\r\n            getTab,\r\n            getTabAtIndex,\r\n            getSelectedTab,\r\n            getTabs: () => tabs,\r\n            setTheme,\r\n            getTheme,\r\n            onSelect,\r\n            onClose,\r\n            destroy,\r\n        };\r\n    };\r\n    return {\r\n        createTabs,\r\n        randomId,\r\n        Emitter,\r\n        Event,\r\n        debounce,\r\n    };\r\n})();\r\n\r\nexport default TabView;\r\n"],"names":["randomId","Math","random","toString","slice","Event","_listeners","addListener","type","listener","push","attach","this","on","fire","event","data","target","Error","Array","listeners","i","len","length","call","trigger","removeListener","splice","off","createButton","name","text","float","btn","document","createElement","id","setAttribute","style","position","height","border","background","color","marginRight","marginLeft","padding","paddingLeft","paddingRight","cursor","fontWeight","fontSize","outline","borderRadius","innerHTML","addFooter","footer","settings","className","left","right","bottom","display","justifyContent","alignItems","addBanner","banner","createTabs","el","options","selectedTab","tabBar","rightBtn","leftBtn","addBtn","pagePanelId","tabBarId","themeOptions","tabSettings","container","dragStartPoint","dragStopPoint","customEvent","tabs","Map","buttons","getTabAtIndex","index","tab","values","toggleNavButton","show","visibility","showHideNavigator","visibleButtons","getVisibleTabs","firstVisibleButton","lastVisibleButton","toggleNavigator","getLeftNavButton","previousSibling","getRightNavButton","nextSibling","setTheme","theme","bg","activecolor","activeBg","table","querySelector","applyTheme","getSelectedTab","getPage","tabId","get","getElementById","pageId","getTabBar","handleTabClick","e","stopImmediatePropagation","select","getAttribute","add","Object","keys","buttonId","tabLabel","label","Number","assign","title","html","closable","close","icon","fancy","getSettings","page","linkId","overflow","top","createPage","appendChild","tabBtn","width","margin","boxShadow","transition","createTabButton","labelContainer","alignContent","createLabelContainer","img","createImage","verticalAlign","maxWidth","whiteSpace","append","createTextNode","createLabel","closeBtn","addEventListener","createCloseButton","linkButton","after","set","selected","rBtn","lBtn","showHideNavButton","lastChild","parentElement","tablinks","children","classList","remove","applySelection","isLinkVisible","max","size","count","click","scrollLinkIntoView","link","next","prev","scroll","box","getBoundingClientRect","tabbar","box1","prototype","querySelectorAll","filter","infiniteScroll","links","before","bts","finiteScroll","HTMLElement","loadFromMarkup","fn","markup","pages","node","textContent","limit","undefined","closeOnClick","tabHeight","leftTooltip","rightTooltip","addTooltip","applySettings","createBar","tabbarContainer","tabBarWraper","panel","pagePanel","layout","tabBarWrapper","doc","createDocumentFragment","thead","bannerRow","minHeight","maxHeight","th","textAlign","tbody","linkRow","td","borderCollapse","pageRow","linkRow2","footerRow","firstElementChild","createTable","window","button","keyCode","blur","handleKeypress","preventDefault","clientX","ev","dataTransfer","getData","getLinkTarget","dataEl","drop","setData","attachDomEventListeners","forEach","d","zIndex","dynamicLoad","init","getTab","getTabs","getTheme","onSelect","onClose","destroy","console","log","Emitter","context","cancelable","bubbles","cntx","myEvent","CustomEvent","detail","dispatchEvent","removeEventListener","debounce","func","wait","immediate","timeout","args","arguments","later","apply","callNow","clearTimeout","setTimeout"],"mappings":"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"}