{"version":3,"file":"tabview.umd.js","sources":["../index.js"],"sourcesContent":["'use strict';\n/* jshint esversion: 8 */\nconst TabView = (function () {\n    function randomId() {\n        return Math.random().toString(36).slice(2);\n    }\n    // Returns a function, that, as long as it continues to be invoked, will not\n    // be triggered. The function will be called after it stops being called for\n    // N milliseconds. If `immediate` is passed, trigger the function on the\n    // leading edge, instead of the trailing.\n    function debounce(func, wait, immediate) {\n        let timeout;\n        return function () {\n            const context = this;\n            const args = arguments;\n            const later = function () {\n                timeout = null;\n                if (!immediate) func.apply(context, args);\n            };\n            const callNow = immediate && !timeout;\n            clearTimeout(timeout);\n            timeout = setTimeout(later, wait);\n            if (callNow) func.apply(context, args);\n        };\n    }\n\n    const Emitter = (function () {\n        return {\n            fire(event, data, context, cancelable, bubbles) {\n                const cntx = context || document;\n                const myEvent = new CustomEvent(event, {\n                    detail: data,\n                    cancelable: cancelable || false,\n                    bubbles: bubbles || false,\n                });\n                cntx.dispatchEvent(myEvent);\n            },\n            on(event, listener, context) {\n                const cntx = context || document;\n                cntx.addEventListener(event, listener);\n            },\n            off(event, listener, context) {\n                const cntx = context || document;\n                cntx.removeEventListener(event, listener);\n            },\n        };\n    })();\n\n    const Event = (function () {\n        const _listeners = {};\n        return {\n            addListener(type, listener) {\n                if (typeof _listeners[type] === 'undefined') {\n                    this._listeners[type] = [];\n                }\n                this._listeners[type].push(listener);\n            },\n            attach(type, listener) {\n                this.addListener(type, listener);\n            },\n            on(type, listener) {\n                this.addListener(type, listener);\n            },\n\n            fire(event, data, target) {\n                if (typeof event === 'string') {\n                    event = {\n                        type: event,\n                        data,\n                        target,\n                    };\n                }\n                if (!event.target) {\n                    event.target = this;\n                }\n                if (!event.type) {\n                    // falsy\n                    throw new Error('Type error');\n                }\n                if (_listeners[event.type] instanceof Array) {\n                    const listeners = _listeners[event.type];\n                    for (let i = 0, len = listeners.length; i < len; i++) {\n                        listeners[i].call(this, event);\n                    }\n                }\n            },\n            trigger(type, listener) {\n                this.fire(type, listener);\n            },\n\n            removeListener(type, listener) {\n                if (_listeners[type] instanceof Array) {\n                    const listeners = _listeners[type];\n                    for (let i = 0, len = listeners.length; i < len; i++) {\n                        if (listeners[i] === listener) {\n                            listeners.splice(i, 1);\n                            break;\n                        }\n                    }\n                }\n            },\n            off(type, listener) {\n                this.removeListener(type, listener);\n            },\n        };\n    })();\n\n    function createTabButton(linkId, tabId, { target, fancy, title, bg }) {\n        const tabBtn = document.createElement('button');\n        tabBtn.className = 'tab-link';\n        tabBtn.setAttribute('href', '#!');\n        tabBtn.setAttribute('id', linkId);\n        tabBtn.setAttribute('title', title);\n        tabBtn.setAttribute('name', 'tab-link');\n        tabBtn.setAttribute('draggable', 'true');\n        tabBtn.setAttribute('data-tab', tabId);\n        tabBtn.setAttribute('data-target', target);\n        tabBtn.style.position = 'relative';\n        tabBtn.style.outline = 'none';\n        tabBtn.style.height = '100%';\n        tabBtn.style.width = 'auto';\n        tabBtn.style.border = '0 none transparent';\n        tabBtn.style.fontSize = '12px';\n        tabBtn.style.fontWeight = '500';\n        tabBtn.style.margin = '0';\n        tabBtn.style.padding = '0';\n        tabBtn.style.boxShadow = 'none';\n        tabBtn.style.background = bg || 'inherit';\n        tabBtn.style.color = 'inherit';\n        tabBtn.style.cursor = 'pointer';\n        tabBtn.style.display = 'block';\n        tabBtn.style.transition = 'background .4s';\n        if (fancy) {\n            tabBtn.style.borderRadius = '8px 1px 0px 0px';\n        } else {\n            tabBtn.style.borderRadius = '1px 1px 0px 0px';\n        }\n\n        return tabBtn;\n    }\n    function createCloseButton() {\n        const closeBtn = document.createElement('a');\n        closeBtn.innerHTML = '&times';\n        closeBtn.setAttribute('name', 'close-button');\n        closeBtn.setAttribute('title', 'close');\n        closeBtn.style.borderRadius = '50%';\n        closeBtn.style.visibility = 'hidden';\n        closeBtn.style.height = closeBtn.style.width = '20px';\n        closeBtn.style.float = 'right';\n        closeBtn.style.marginRight = '2px';\n        closeBtn.style.marginLeft = '5px';\n        closeBtn.style.display = 'flex';\n        closeBtn.style.padding = '2px 0px 0px 4px';\n        closeBtn.style.alignContent = 'center';\n        closeBtn.style.alignItems = 'center';\n        closeBtn.style.fontSize = '18px';\n        closeBtn.style.color = '#efefef';\n        closeBtn.style.fontWeight = '700';\n        closeBtn.style.background = 'transparent';\n        closeBtn.addEventListener('mouseenter', () => {\n            closeBtn.style.background = '#555';\n        });\n        closeBtn.addEventListener('mouseleave', () => {\n            closeBtn.style.background = '';\n        });\n        return closeBtn;\n    }\n    function createLabel(text, title) {\n        const label = document.createElement('label');\n        label.setAttribute('name', 'tab-link-label');\n        label.className = 'tab-link-label';\n        label.style.margin = '0';\n        label.style.paddingRight = '2px';\n        label.style.paddingLeft = '2px';\n        label.style.verticalAlign = 'middle';\n        label.style.padding = '0';\n        label.style.color = 'inherit';\n        label.style.maxWidth = '80px';\n        label.style.overflow = 'hidden';\n        label.style.whiteSpace = 'nowrap';\n        label.style.background = '';\n        label.style.cursor = 'pointer';\n        label.style.fontSize = 'inherit';\n        label.style.fontWeight = 'inherit';\n        label.append(document.createTextNode(text));\n        label.setAttribute('title', title || text);\n        return label;\n    }\n    function createTabBarWraper() {\n        const tabbarContainer = document.createElement('div');\n        tabbarContainer.style.position = 'relative';\n        tabbarContainer.style.height = '100%';\n        tabbarContainer.style.height = '100%';\n        tabbarContainer.style.width = '100%';\n        tabbarContainer.style.border = 'none';\n        tabbarContainer.style.padding = 'none';\n        tabbarContainer.className = 'tabbar-wrapper';\n        return tabbarContainer;\n    }\n    function createBar() {\n        const tabBar = document.createElement('div');\n        tabBar.setAttribute('id', randomId());\n        tabBar.style.position = 'absolute';\n        tabBar.style.top = '0';\n        tabBar.style.bottom = '0';\n        tabBar.style.left = '60px';\n        tabBar.style.right = '30px';\n        tabBar.style.overflow = 'hidden';\n        tabBar.style.padding = '0px';\n        tabBar.style.margin = '0px';\n        tabBar.style.paddingRight = '7px';\n        tabBar.style.background = 'inherit';\n        tabBar.style.display = 'flex';\n        tabBar.className = 'tab-bar';\n        return tabBar;\n    }\n    function createButton(name, text, float) {\n        const btn = document.createElement('button');\n        btn.id = randomId();\n        btn.setAttribute('name', name);\n        btn.style.height = '100%';\n        btn.style.border = '0 none transparent';\n        btn.style.background = 'transparent';\n        btn.style.color = 'white';\n        btn.marginRight = btn.marginLeft = '2px';\n        btn.style.padding = '2px';\n        btn.style.paddingLeft = btn.style.paddingRight = '7px';\n        btn.style.cursor = 'pointer';\n        btn.style.fontWeight = '900';\n        btn.style.fontSize = '14px';\n        btn.style.float = float || 'none';\n        btn.style.outline = 'none';\n        btn.innerHTML = text;\n        btn.style.borderRadius = '4px 4px';\n        return btn;\n    }\n    function createImage(options) {\n        const img = document.createElement('span');\n        img.style.marginRight = '7px';\n        img.style.color = '#b00';\n        img.style.fontWeight = 'bold';\n        img.innerHTML = options.icon || 'kb';\n        img.style.float = 'left';\n        return img;\n    }\n    function createLabelContainer(options) {\n        const labelContainer = document.createElement('label');\n        labelContainer.setAttribute('name', 'tab-link-label-wraper');\n        labelContainer.style.display = 'flex';\n        labelContainer.style.alignContent = 'center';\n        labelContainer.style.alignItems = 'center';\n        labelContainer.style.padding = '2px';\n        labelContainer.style.height = '100%';\n        labelContainer.style.width = '100%';\n        labelContainer.style.color = 'inherit';\n        labelContainer.style.background = 'transparent';\n        labelContainer.style.cursor = 'pointer';\n\n        return labelContainer;\n    }\n    function createTable(tabBarWrapper, pagePanel, settings = {}) {\n        let banner;\n        let footer;\n        if (settings.banner) {\n            banner = addBanner();\n        }\n        if (settings.footer) {\n            footer = addFooter();\n        }\n        const doc = document.createDocumentFragment();\n        const table = document.createElement('table');\n        table.style.width = table.style.height = '100%';\n        doc.append(table);\n\n        const thead = document.createElement('thead');\n        table.append(thead);\n\n        const bannerRow = document.createElement('tr');\n        bannerRow.style.minHeight = '0px';\n        bannerRow.style.maxHeight = '80px';\n        thead.append(bannerRow);\n        const th = document.createElement('th');\n        // th.setAttribute('colspan',3);\n        th.style.textAlign = 'left';\n        th.style.padding = '0';\n        if (banner) {\n            th.append(banner);\n        } else {\n            bannerRow.style.display = 'none';\n        }\n        bannerRow.appendChild(th);\n\n        const tbody = document.createElement('tbody');\n        table.append(tbody);\n\n        const linkRow = document.createElement('tr');\n        linkRow.style.minHeight = '24px';\n        linkRow.style.height = `${settings.tabHeight}px`;\n        linkRow.style.padding = '0';\n        tbody.append(linkRow);\n\n        let td = document.createElement('td');\n        td.style.overflow = 'hidden';\n        td.style.whiteSpace = 'nowrap';\n        td.style.textAlign = 'left';\n        td.style.padding = '0';\n        td.append(tabBarWrapper);\n        linkRow.appendChild(td);\n        table.style.borderCollapse =\n            linkRow.style.borderCollapse =\n            td.style.borderCollapse =\n                'collapse';\n        table.style.border =\n            linkRow.style.border =\n            td.style.border =\n                '0 none transparent';\n\n        const pageRow = document.createElement('tr');\n        tbody.append(pageRow);\n        td = document.createElement('td');\n        td.append(pagePanel);\n        td.style.textAlign = 'left';\n        td.style.padding = '0';\n        pageRow.appendChild(td);\n\n        const linkRow2 = document.createElement('tr');\n        tbody.append(linkRow2);\n        td = document.createElement('td');\n        td.style.textAlign = 'left';\n        td.style.padding = '0';\n        linkRow2.appendChild(td);\n        linkRow2.style.minHeight = '24px';\n        linkRow2.style.height = `${settings.tabHeight}px`;\n\n        const footerRow = document.createElement('tr');\n        tbody.append(footerRow);\n        td = document.createElement('td');\n        footerRow.appendChild(td);\n        footerRow.style.maxHeight = '24px';\n        td = document.createElement('td');\n        td.style.padding = '0';\n        if (footer) {\n            td.append(footer || document.createTextNode(''));\n        } else {\n            footerRow.style.display = 'none';\n        }\n        footerRow.appendChild(td);\n        td = document.createElement('td');\n        td.style.padding = '0';\n        footerRow.appendChild(td);\n        if (settings.bottom) {\n            linkRow2.firstElementChild.nextSibling.appendChild(tabBarWrapper);\n            linkRow.style.display = 'none';\n        } else {\n            linkRow2.style.display = 'none';\n        }\n        return doc;\n    }\n    function createPage(pageId, tabId, linkId, options) {\n        const page = document.createElement('div');\n        page.setAttribute('id', pageId);\n        page.setAttribute('data-tab', tabId);\n        page.setAttribute('data-trigger', linkId);\n        page.innerHTML = options.text || '';\n        page.style.position = 'absolute';\n        page.style.padding = '8px 16px';\n        page.style.visibility = 'hidden';\n        page.style.overflow = 'auto';\n        page.style.top =\n            page.style.bottom =\n            page.style.left =\n            page.style.right =\n                '0';\n        // page.style.top='0'; do not specify top!!!\n        page.style.background = options.bg || '';\n        return page;\n    }\n    function createPagePanel() {\n        const panel = document.createElement('div');\n        panel.setAttribute('id', randomId());\n        panel.style.position = 'relative';\n        panel.className = 'tab-panel';\n        panel.style.width = '100%';\n        panel.style.height = '100%';\n        panel.style.overflow = 'hidden';\n        panel.style.margin = '0';\n        panel.style.top = '0';\n        panel.style.background = '';\n        return panel;\n    }\n    function loadFromMarkup(el, fn) {\n        if (typeof el === 'string') {\n            el = document.getElementById(el);\n        }\n        if (!el || !el.children) {\n            throw new Error('Invalid element to load markup');\n        }\n        const markup = el.children;\n        // let doc=document.createDocumentFragment();\n        if (!markup || markup.length === 0) return fn();\n        const banner = el.querySelector('.tab-banner');\n        const footer = el.querySelector('.tab-footer');\n        const links = el.querySelector('.tab-links').children;\n        const pages = el.querySelector('.tab-pages').children;\n        const data = {\n            banner: banner.innerHTML,\n            footer: footer.innerHTML,\n            tabs: [],\n        };\n        if (banner) banner.remove();\n        if (footer) footer.remove();\n\n        while (links.length > 0) {\n            const node = links[0];\n            const page = pages[0];\n            if (!node) continue;\n            data.tabs.push({\n                id: node.id !== '' ? node.id : null,\n                label: node.textContent,\n                title: node.getAttribute('title'),\n                closable: node.getAttribute('closable'),\n                target: node.getAttribute('data-target'),\n                selected: node.getAttribute('selected'),\n                html: page ? page.innerHTML : '',\n                bg: page ? page.style.background : '#0bc',\n                style: node.getAttribute('tab-style'),\n            });\n            node.remove();\n            page.remove();\n        }\n        return data;\n    }\n    function addFooter() {\n        const footer = document.createElement('span');\n        footer.setAttribute('name', 'tab-footer');\n        footer.innerHTML = settings.footer;\n        footer.className = 'tab-footer';\n        footer.style.left = '0';\n        footer.style.right = '0';\n        footer.style.bottom = '0';\n        footer.style.padding = '2px';\n        footer.style.display = 'flex';\n        footer.style.justifyContent = 'center';\n        footer.style.alignItems = 'center';\n        // footer.style.background='#030';\n        // footer.style.borderTop='1px solid #020';\n\n        return footer;\n    }\n    function addBanner() {\n        const banner = document.createElement('span');\n        banner.setAttribute('name', 'tab-banner');\n        banner.innerHTML =\n            typeof settings.banner === 'string'\n                ? settings.banner\n                : settings.banner.innerHTML;\n        banner.style.display = 'flex';\n        banner.style.padding = '5px';\n        banner.style.justifyContent = 'center';\n        banner.style.alignItems = 'center';\n        banner.className = 'tab-banner';\n        banner.style.background = 'green';\n\n        return banner;\n    }\n    function mountTab(el, doc, tabPagePanel) {\n        const container =\n            typeof el === 'object' ? el : document.getElementById(el);\n        containerId = container.id;\n\n        container.appendChild(tabPagePanel);\n\n        const tabbar = doc.querySelector('div');\n        let banner;\n        let footer;\n        if (settings.banner) {\n            banner = addBanner(container);\n            container.prepend(banner);\n        }\n        if (settings.bottom) {\n            container.lastChild.after(doc);\n        } else {\n            container.lastChild.before(doc);\n        }\n        if (settings.footer) {\n            footer = addFooter(container);\n            container.lastChild.after(footer);\n        }\n        // container.style.height='100%';\n        // container.style.width='100%';\n        container.style.top =\n            container.style.bottom =\n            container.style.left =\n            container.style.right =\n                '0';\n        const bannerBox = banner ? banner.getBoundingClientRect() : null;\n        const bannerBottom = banner ? bannerBox.bottom - bannerBox.top : 0;\n\n        const footerBox = footer ? footer.getBoundingClientRect() : null;\n        const footerTop = footer ? footerBox.bottom - footerBox.top : 0;\n\n        if (settings.bottom) {\n            // tab bar is at bottom oftab window\n            tabbar.style.bottom = `${footerTop}px`;\n        } else {\n            tabbar.style.top = `${bannerBottom}px`;\n        }\n        tabbar.style.border = '0px none transparent';\n        tabPagePanel.style.border = '0px none transparent';\n    }\n    function applySelection(el, options) {\n        if (!el || !el.parentElement) {\n            return;\n        }\n        const tablinks = el.parentElement.children;\n        // console.log(el.parentElement.parentElement);\n        for (let i = 0; i < tablinks.length; i++) {\n            tablinks[i].classList.remove('active');\n            tablinks[i].style.background = options.bg;\n            tablinks[i].style.color = options.color;\n            // tablinks[i].lastChild.lastChild.style.visibility = \"hidden\";\n        }\n\n        el.classList.add('active');\n        el.style.background = options.activeBg;\n        el.style.color = options.activecolor;\n        // el.lastChild.lastChild.style.visibility = \"visible\";\n    }\n    const createTabs = function (el, options) {\n        const tabIndex = -1;\n        const currentIndex = 0;\n        let selectedTab;\n        let tabBar;\n        let rightBtn;\n        let leftBtn;\n        let addBtn;\n        let leftNavId;\n        let rightNavId;\n        let pagePanelId;\n        let addBtnId;\n        let tabBarId;\n        let themeOptions;\n        let tabSettings;\n        let containerId;\n        let tabButtonsCount;\n        let dragStartPoint;\n        let dragStopPoint;\n        const tabs = new Map();\n        const buttons = {};\n        const links = {};\n        const pages = {};\n        const hiddenTabs = [];\n\n        init(el, options);\n        /**\n         * Initialize tab container\n         * @param {HTMLElement} el HTMLElement to attach tabs\n         * @param {Object} options Additional settings\n         * @returns void\n         */\n        function init(el, options) {\n            themeOptions = options;\n            const data = options.loadFromMarkup ? loadFromMarkup(el) : null;\n            if (data) {\n                themeOptions = Object.assign(themeOptions, data);\n            }\n            applySettings(themeOptions);\n            leftBtn = createButton('left-nav-button', '&lt;', 'left');\n            leftBtn.addEventListener('click', () => {\n                scroll(false);\n            });\n\n            leftNavId = leftBtn.id;\n            addBtn = createButton('add-tab-button', '+', 'left');\n            addBtnId = addBtn.id;\n            if (themeOptions.add) {\n                addBtn.style.visibility = 'visible';\n            } else {\n                addBtn.style.visibility = 'hidden';\n            }\n            addBtn.addEventListener('click', () => {\n                Event.fire('add-tab-click', randomId());\n            });\n            tabBar = createBar();\n            const tabBarWraper = createTabBarWraper();\n            tabBarWraper.append(tabBar);\n            tabBarWraper.appendChild(leftBtn);\n            tabBarWraper.appendChild(addBtn);\n            tabBarId = tabBar.id;\n\n            rightBtn = createButton('right-nav-button', '&gt;', 'right');\n            // rightBtn = rightBtn;\n            tabBarWraper.appendChild(rightBtn);\n            rightBtn.addEventListener('click', () => {\n                scroll(true);\n            });\n            // tabBarWraper.appendChild(rightBtn);\n            rightNavId = rightBtn.id;\n            const pagePanel = createPagePanel();\n            pagePanelId = pagePanel.id;\n            // let tabbar= doc.querySelector('div');\n            const doc = createTable(\n                tabBar.parentElement,\n                pagePanel,\n                themeOptions\n            );\n            const container =\n                typeof el === 'object' ? el : document.getElementById(el);\n            containerId = container.id;\n            container.append(doc);\n            setTheme(themeOptions.theme);\n            attachDomEventListeners(this);\n            if (themeOptions.tabs) {\n                dynamicLoad(themeOptions.tabs);\n            }\n            toggleNavigator(getLeftNavButton(), false);\n            toggleNavigator(getRightNavButton(), false);\n        }\n\n        function getTabAtIndex(index) {\n            let tab = null;\n            let i = 0;\n            for (const value of tabs.values()) {\n                if (i === index) {\n                    tab = value;\n                    break;\n                }\n                i++;\n            }\n            return tab;\n        }\n\n        function unhide() {\n            // const tabs = tabs.entries()\n            const last = getTabAtIndex(tabs.size - 1).linkButton;\n            const visibles = getVisibleTabs();\n            const firstVisible = visibles[0];\n            if (!firstVisible.previousSibling) return;\n            // let lastVisible=visibles[visibles.length-1];\n            const lastHidden = firstVisible.previousSibling || firstVisible;\n            const { width } = lastHidden.getBoundingClientRect();\n            const gap =\n                tabBar.getBoundingClientRect().right -\n                last.getBoundingClientRect().right;\n            if (width < gap) {\n                scrollLinkIntoView(lastHidden);\n            }\n        }\n\n        function attachDomEventListeners() {\n            // let self = this\n            const tabBar = getTabBar();\n            window.addEventListener('resize', () => {\n                debounce(() => {\n                    if (!selectedTab) return false;\n                    if (!isLinkVisible(selectedTab.linkButton)) {\n                        scrollLinkIntoView(selectedTab.linkButton);\n                    } else {\n                        unhide();\n                        scrollLinkIntoView(selectedTab.linkButton);\n                    }\n                    showHideNavButton();\n                }, 200)();\n            });\n\n            tabBar.addEventListener(\n                'keyup',\n                (event) => {\n                    handleKeypress(event);\n                },\n                true\n            );\n\n            tabBar.addEventListener(\n                'drop',\n                (event) => {\n                    event.preventDefault();\n\n                    dragStopPoint = event.clientX;\n                    drop(event);\n                },\n                true\n            );\n\n            tabBar.addEventListener(\n                'dragover',\n                (event) => {\n                    event.preventDefault();\n                },\n                true\n            );\n\n            tabBar.addEventListener('dragstart', (event) => {\n                dragStartPoint = event.clientX;\n                drag(event);\n            });\n        }\n\n        function handleKeypress(e) {\n            const code = e.keyCode;\n            const link = selectedTab.button;\n            // eslint-disable-next-line default-case\n            if (!link) return;\n            switch (code) {\n                case 37:\n                    if (link.previousSibling) {\n                        select(link.previousSibling);\n                    }\n                    break; // left key\n                case 39:\n                    if (link.nextSibling) {\n                        select(link.nextSibling);\n                    }\n                    break; // right key\n                case 38:\n                    break; // up key\n                case 40:\n                    link.blur();\n                    break; // down key\n                case 13:\n                    break; // enter key\n                default:\n                    break;\n            }\n        }\n\n        function showHideNavButton() {\n            // console.log(settings);\n            if (themeOptions.infiniteScroll) {\n                return;\n            }\n            const visibleButtons = getVisibleTabs();\n            const firstVisibleButton = visibleButtons[0];\n            const lastVisibleButton = visibleButtons[visibleButtons.length - 1];\n\n            if (!firstVisibleButton) return;\n            const rBtn = getRightNavButton();\n            const lBtn = getLeftNavButton();\n            if (firstVisibleButton.previousSibling) {\n                toggleNavButton(rBtn, true);\n            } else {\n                toggleNavButton(lBtn, false);\n            }\n            if (lastVisibleButton.nextSibling) {\n                toggleNavButton(rBtn, true);\n            } else {\n                toggleNavButton(rBtn, false);\n            }\n        }\n\n        function toggleNavButton(el, show) {\n            if (show) {\n                el.style.visibility = 'visible';\n            } else {\n                el.style.visibility = 'hidden';\n            }\n        }\n\n        function toggleAddButton(show) {\n            if (show) {\n                getAddButton().style.visibility = 'visible';\n            } else {\n                getAddButton().style.visibility = 'hidden';\n            }\n        }\n\n        function showHideNavigator() {\n            const visibleButtons = getVisibleTabs();\n            const firstVisibleButton = visibleButtons[0];\n            const lastVisibleButton = visibleButtons[visibleButtons.length - 1];\n\n            if (!firstVisibleButton) return;\n            if (firstVisibleButton.previousSibling) {\n                toggleNavigator(getLeftNavButton(), true);\n            } else {\n                toggleNavigator(getLeftNavButton(), false);\n            }\n            if (lastVisibleButton.nextSibling) {\n                toggleNavigator(getRightNavButton(), true);\n            } else {\n                toggleNavigator(getRightNavButton(), false);\n            }\n        }\n\n        function applyTheme(options) {\n            const table = getContainer().querySelector('table');\n            table.style.background = options.bg;\n            table.style.color = options.color;\n            leftBtn.style.color =\n                rightBtn.style.color =\n                addBtn.style.color =\n                    options.color;\n        }\n\n        // Public API\n        /** *\n         * @param theme String\n         * @returns null\n         */\n        function setTheme(theme) {\n            let color = '#ddd';\n            let bg = '#222';\n            let activecolor = '#ddd';\n            let activeBg = '#003355';\n            switch (theme) {\n                case 'dark':\n                    bg = '#002255';\n                    activeBg = '#003355';\n                    color = '#fff';\n                    break;\n                case 'black':\n                    bg = '#111';\n                    activeBg = '#333';\n                    color = '#fff';\n                    break;\n                case 'blue':\n                    bg = 'rgba(8, 68, 117, 1)';\n                    activeBg = 'rgba(10, 100, 186, 1)';\n                    break;\n                case 'green':\n                    bg = 'rgba(0, 149, 120, 1)';\n                    activeBg = '#054';\n                    break;\n                case 'red':\n                    bg = 'rgb(120, 0, 30)';\n                    activeBg = 'rgb(123, 0, 50)';\n                    break;\n                case 'white':\n                    bg = '#bcd';\n                    color = '#000';\n                    activecolor = '#eee';\n                    break;\n                default:\n                    bg = 'rgba(10, 100, 186, 1)';\n                    activeBg = 'rgba(10, 100, 206, 1)';\n                    color = '#fff';\n                    break;\n            }\n            tabSettings = {\n                bg,\n                color,\n                activecolor,\n                activeBg,\n            };\n            applyTheme(tabSettings);\n        }\n\n        function getTheme() {\n            return themeOptions.theme;\n        }\n\n        function toggleNavigator(el, show) {\n            if (show) {\n                el.style.visibility = 'visible';\n            } else {\n                el.style.visibility = 'hidden';\n            }\n        }\n\n        function getSelectedTab() {\n            return selectedTab;\n        }\n\n        function getTab(tabId) {\n            return tabs.get(tabId);\n        }\n\n        function setContent(id, content) {\n            const page = tabs.get(id).pageId;\n            document.getElementById(page).innerHTML = content;\n        }\n\n        function setTitle(id, title) {\n            const link = tabs.get(id).linkId;\n            document.getElementById(link).firstElementChild.innerHTML = title;\n        }\n        function applySettings(options) {\n            const mySettings = {\n                limit: undefined,\n                banner: undefined,\n                footer: undefined,\n                closeOnClick: undefined,\n                infiniteScroll: false,\n                fancy: false,\n                add: false,\n                // width   : '100%',\n                // height  : '100%',\n                theme: '',\n                tabHeight: 32,\n                leftTooltip: '&lt;',\n                rightTooltip: '&gt;',\n                addTooltip: '+',\n                data: null,\n            };\n\n            themeOptions = Object.assign(mySettings, options);\n        }\n        function dynamicLoad(tabs) {\n            if (!tabs) return;\n            let selected = null;\n            tabs.forEach((d) => {\n                if (d.selected) {\n                    selected = d.id;\n                }\n                const tab = add(d);\n                const page = getPage(tab.id);\n                // page.parentElement.style.top='80px';\n                // page.background='#054';\n                page.innerHTML =\n                    typeof d.html === 'function' ? d.html() : d.html;\n                page.setAttribute('contenteditable', true);\n                page.style.overflow = 'auto';\n                page.style.zIndex = '100';\n            });\n            if (selected) {\n                select(selected);\n            }\n        }\n\n        function getPage(tabId) {\n            const tab = tabs.get(tabId);\n            return document.getElementById(tab.pageId);\n        }\n\n        function getLinkButton(linkId) {\n            return document.getElementById(linkId);\n        }\n\n        function getCloswButton(id) {\n            const linkButton = getLinkButton(id);\n            return linkButton ? linkButton.lastElementChild() : null;\n        }\n\n        function getTabPagePanel() {\n            return document.getElementById(pagePanelId);\n        }\n\n        function getRightNavButton() {\n            return rightBtn;\n        }\n\n        function getLeftNavButton() {\n            return leftBtn;\n        }\n\n        function getAddButton() {\n            return addBtn;\n        }\n\n        function getFooter() {\n            return document.getElementById(footerId);\n        }\n\n        function getBanner() {\n            return document.getElementById(bannerId);\n        }\n\n        function getTabBar() {\n            return document.getElementById(tabBarId);\n        }\n\n        function getContainer() {\n            return document.getElementById(containerId);\n        }\n        function hideExtraTabs() {\n            const links = Object.values(links);\n            const numTotal = links.length;\n            const numVisible = Math.min(numTotal, themeOptions.limit);\n            for (let i = 0; i < links.length; i++) {\n                links[i].style.display = 'none'; // hide xo tabs.\n            }\n            for (let j = 0; j < numVisible; j++) {\n                links[j].style.display = 'inline'; // Show visible tabs.\n            }\n        }\n\n        function getLinkTarget(el) {\n            try {\n                while (el.name !== 'tab-link') {\n                    el = el.parentElement;\n                }\n                return el;\n            } catch (e) {\n                // const length = tabs.size - 1\n                return getTabAtIndex(tabs.size - 1).linkButton;\n                // Object.values(tabs)[length].linkButton\n            }\n        }\n\n        function allowDrop(ev) {\n            ev.preventDefault();\n        }\n\n        function drag(ev) {\n            ev.dataTransfer.setData('text', ev.target.id);\n        }\n\n        function drop(ev) {\n            ev.preventDefault();\n            const data = ev.dataTransfer.getData('text');\n            // do not drop on label wrappers or close button\n            const target = getLinkTarget(ev.target);\n            const dataEl = document.getElementById(data);\n\n            if (dragStartPoint > dragStopPoint) {\n                target.before(dataEl);\n            } else {\n                target.after(dataEl);\n            }\n            // target.parentNode.insertBefore(dataEl,dragStartPoint>dragStopPoint?target:target.nextSibling);\n        }\n        function add(options = {}) {\n            const { length } = Object.keys(buttons);\n            const tabId = options.tabId || randomId();\n            const buttonId = `tab-btn-${tabId}`;\n            const target = `tab-page-${tabId}`;\n            const tabLabel = options.label || `Tab${Number(length + 1)}`;\n            const title = options.title || tabLabel;\n\n            const settings = {\n                buttonId,\n                target,\n                label: tabLabel,\n                title,\n                html: options.html || '',\n                closable: options.close || true,\n                data: options.data || null,\n                icon: options.icon || '',\n                bg: options.bg || 'inherit',\n                color: options.color || 'inherit',\n                fancy: themeOptions.fancy,\n            };\n            // options.bg = options.bg === \"transparent\" ? \"\" : options.bg;\n            // if (options.buttonId === null) {\n            // delete options.buttonId;\n            // }\n            const tabSettings = Object.assign(settings, options);\n            const page = createPage(\n                tabSettings.target,\n                tabId,\n                buttonId,\n                tabSettings\n            );\n\n            getTabPagePanel().appendChild(page);\n            const tabBtn = createTabButton(buttonId, tabId, tabSettings);\n            const labelContainer = createLabelContainer(tabSettings);\n            const img = createImage(tabSettings);\n            const label = createLabel(tabSettings.label, tabSettings.title);\n            const closeBtn = createCloseButton(tabId);\n            closeBtn.addEventListener('click', (e) => {\n                close(tabId); // linkButton.getAttribute(\"data-tab\"));\n                e.stopImmediatePropagation();\n            });\n            if (!tabSettings.closable) {\n                closeBtn.style.display = 'none';\n                labelContainer.style.paddingRight = '7px';\n            }\n            labelContainer.append(img);\n            labelContainer.append(label);\n            labelContainer.append(closeBtn);\n            tabBtn.append(labelContainer);\n            tabBtn.addEventListener('click', () => {\n                select(tabId);\n            });\n            tabBtn.addEventListener('mouseenter', () => {\n                if (selectedTab.linkButton.id === tabBtn.id) return;\n                closeBtn.style.visibility = 'visible';\n            });\n\n            tabBtn.addEventListener('mouseleave', () => {\n                if (selectedTab.linkButton.id === tabBtn.id) return;\n                closeBtn.style.visibility = 'hidden';\n            });\n\n            buttons[tabBtn.id] = tabBtn;\n            // If there was a selected button already, insert after it\n            // otherwise append at the end of tab list\n            if ((selectedTab = getSelectedTab())) {\n                // tab.selected=false;\n                selectedTab.linkButton.after(tabBtn);\n                // getLinkButton(tab.linkId).after(linkButton);\n            } else {\n                getTabBar().appendChild(tabBtn);\n            }\n            tabs.set(tabId, {\n                id: tabId,\n                label: tabSettings.label,\n                text: tabSettings.text,\n                title: tabSettings.title,\n                linkId: tabSettings.buttonId,\n                pageId: tabSettings.target,\n                data: tabSettings.data,\n                selected: tabSettings.selected,\n                linkButton: tabBtn,\n                page,\n            });\n            selectedTab = tabs.get(tabId);\n            showHideNavButton();\n            select(tabBtn);\n            if (tabSettings.selected) {\n                return selectedTab;\n            }\n            return selectedTab;\n        }\n\n        function select(ref, before) {\n            let linkButton = null;\n            console.log(typeof ref);\n            console.log(ref instanceof HTMLElement);\n            if (!ref) {\n                throw new Error('Invalid tab address:');\n            } else if (typeof ref === 'string') {\n                const id = ref;\n                linkButton = getLinkButton(id);\n            } else if (ref.id) {\n                const el = ref;\n                linkButton = el;\n            } else {\n                throw new Error('Invalid Button or ID');\n            }\n\n            if (typeof before === 'function') {\n                const result = before();\n                if (result === false) return false;\n            }\n            for (const tab of tabs.values()) {\n                if (tab.linkButton.id === linkButton.id) {\n                    tab.selected = true;\n                    selectedTab = tab;\n                    document.getElementById(tab.pageId).style.visibility =\n                        'visible';\n                    tab.linkButton.lastChild.lastChild.style.visibility =\n                        'visible';\n                    // console.log(tab.linkButton.lastChild.lastChild);\n                } else {\n                    tab.selected = false;\n                    document.getElementById(tab.pageId).style.visibility =\n                        'hidden';\n                    tab.linkButton.lastChild.lastChild.style.visibility =\n                        'hidden';\n                }\n            }\n            applySelection(linkButton, tabSettings);\n            if (!isLinkVisible(linkButton)) {\n                scrollLinkIntoView(linkButton);\n            }\n            Event.fire('select', selectedTab);\n\n            return selectedTab;\n        }\n\n        function close(el) {\n            let tabId = el;\n            if (!el) {\n                throw new Error('Invalid tab address:');\n            } else if (typeof id === 'string') {\n                // tab id\n            } else if (el.id) {\n                tabId = el.id; // .substr(5);//button Element\n            }\n            const tab = tabs.get(tabId);\n            // console.log(el, tab, tabs);\n            if (!tab) return;\n            const link = tab.linkButton; // getLinkButton(tab.linkId);\n            const next = link.nextSibling;\n            const prev = link.previousSibling;\n            Event.fire('before_close', tab);\n            link.remove();\n            document.getElementById(tab.pageId).remove();\n            selectedTab = null; // delete selectedTab;\n            tabs.delete(tabId);\n\n            Event.fire('close', tab);\n            if (next && next.tagName === 'BUTTON') {\n                select(next);\n            } else if (prev && prev.tagName === 'BUTTON') {\n                select(prev);\n            }\n            showHideNavigator();\n            scroll(true);\n            return tabId;\n        }\n\n        function isLinkVisible(link) {\n            const box = link.getBoundingClientRect();\n            const tabbar = getTabBar();\n            if (!tabbar) return false;\n            const box1 = tabbar.getBoundingClientRect();\n            return box.left >= box1.left && box.right <= box1.right;\n        }\n\n        function getVisibleTabs() {\n            const tabbar = getTabBar();\n            if (!tabbar) return false;\n            const links = Array.prototype.slice.call(\n                tabbar.querySelectorAll('button')\n            );\n            return links.filter((link) => isLinkVisible(link));\n        }\n\n        function getHiddenTabs() {\n            const links = Array.prototype.slice.call(\n                getTabBar().querySelectorAll('button')\n            );\n            return links.filter((link) => !isLinkVisible(link));\n        }\n\n        function scroll(right) {\n            if (themeOptions.infiniteScroll) {\n                infiniteScroll(right);\n            } else {\n                finiteScroll(right);\n                showHideNavigator();\n            }\n        }\n\n        function scrollLinkIntoView(el) {\n            if (isLinkVisible(el)) return;\n            const max = tabs.size;\n            let count = 0;\n            while (!isLinkVisible(el)) {\n                getRightNavButton().click();\n                count++;\n                if (count > max) break;\n            }\n            count = 0;\n            while (!isLinkVisible(el)) {\n                getLeftNavButton().click();\n                count++;\n                if (isLinkVisible(el)) return;\n                if (count > max) break;\n            }\n        }\n\n        function finiteScroll(right) {\n            tabButtonsCount = tabButtonsCount || 1;\n            tabButtonsCount++;\n            const visibleButtons = getVisibleTabs();\n            const firstVisibleButton = visibleButtons[0];\n            const lastVisibleButton = visibleButtons[visibleButtons.length - 1];\n            if (right && lastVisibleButton && lastVisibleButton.nextSibling) {\n                firstVisibleButton.style.display = 'none';\n            } else if (\n                !right &&\n                firstVisibleButton &&\n                firstVisibleButton.previousSibling\n            ) {\n                firstVisibleButton.previousSibling.style.display = '';\n            } else {\n                const tabbar = getTabBar();\n                if (!tabbar) return;\n                const bts = tabbar.querySelectorAll('button');\n                if (bts.length > 0) {\n                    bts[bts.length - 1].style.display = '';\n                }\n            }\n        }\n\n        function infiniteScroll(right) {\n            const tabbar = getTabBar();\n            if (!tabbar) return;\n            const links = tabbar.querySelectorAll('button');\n            if (links.length > 1) {\n                if (right) {\n                    links[links.length - 1].after(links[0]);\n                } else {\n                    links[0].before(links[links.length - 1]);\n                }\n            }\n        }\n\n        function destroy() {\n            // destroy\n            removeListeners();\n        }\n        return {\n            init,\n            add,\n            close,\n            setTheme,\n            getTheme,\n            destroy,\n        };\n    };\n    return {\n        createTabs,\n        randomId,\n        Emitter,\n        Event,\n        debounce,\n    };\n})();\n\nexport default TabView;\n"],"names":["randomId","Math","random","toString","slice","debounce","func","wait","immediate","timeout","context","this","args","arguments","later","apply","callNow","clearTimeout","setTimeout","_listeners","Event","addListener","type","listener","push","attach","on","fire","event","data","target","Error","Array","listeners","i","len","length","call","trigger","removeListener","splice","off","createButton","name","text","float","btn","document","createElement","id","setAttribute","style","height","border","background","color","marginRight","marginLeft","padding","paddingLeft","paddingRight","cursor","fontWeight","fontSize","outline","innerHTML","borderRadius","addFooter","footer","settings","className","left","right","bottom","display","justifyContent","alignItems","addBanner","banner","createTabs","el","options","selectedTab","tabBar","rightBtn","leftBtn","addBtn","pagePanelId","tabBarId","themeOptions","tabSettings","containerId","dragStartPoint","dragStopPoint","tabs","Map","buttons","init","loadFromMarkup","fn","getElementById","children","markup","querySelector","links","pages","remove","node","page","label","textContent","title","getAttribute","closable","selected","html","bg","Object","assign","limit","undefined","closeOnClick","infiniteScroll","fancy","add","theme","tabHeight","leftTooltip","rightTooltip","addTooltip","applySettings","addEventListener","scroll","visibility","position","top","overflow","margin","createBar","tabbarContainer","tabBarWraper","width","append","appendChild","panel","pagePanel","doc","tabBarWrapper","createDocumentFragment","table","thead","bannerRow","minHeight","maxHeight","th","textAlign","tbody","linkRow","td","whiteSpace","borderCollapse","pageRow","linkRow2","footerRow","createTextNode","firstElementChild","nextSibling","createTable","parentElement","container","setTheme","getTabBar","window","isLinkVisible","linkButton","unhide","scrollLinkIntoView","showHideNavButton","e","link","button","keyCode","previousSibling","select","blur","handleKeypress","preventDefault","clientX","ev","dataTransfer","getData","getTabAtIndex","size","getLinkTarget","dataEl","before","after","drop","setData","attachDomEventListeners","forEach","d","getPage","zIndex","dynamicLoad","toggleNavigator","getLeftNavButton","getRightNavButton","index","tab","values","last","firstVisible","getVisibleTabs","lastHidden","getBoundingClientRect","visibleButtons","firstVisibleButton","lastVisibleButton","rBtn","lBtn","toggleNavButton","show","showHideNavigator","activecolor","activeBg","applyTheme","tabId","get","pageId","keys","buttonId","tabLabel","Number","close","icon","linkId","createPage","tabBtn","boxShadow","transition","createTabButton","labelContainer","alignContent","createLabelContainer","img","createImage","verticalAlign","maxWidth","createLabel","closeBtn","createCloseButton","stopImmediatePropagation","set","ref","console","log","HTMLElement","lastChild","tablinks","classList","applySelection","next","prev","tagName","box","tabbar","box1","prototype","querySelectorAll","filter","bts","finiteScroll","max","count","click","getTheme","destroy","removeListeners","Emitter","cancelable","bubbles","cntx","myEvent","CustomEvent","detail","dispatchEvent","removeEventListener"],"mappings":"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"}