{"version":3,"file":"tabview.umd.js","sources":["../index.js"],"sourcesContent":["'use strict';\r\n/* jshint esversion: 8 */\r\nconst TabView = (function () {\r\n    function randomId() {\r\n        return Math.random().toString(36).slice(2);\r\n    }\r\n    // Returns a function, that, as long as it continues to be invoked, will not\r\n    // be triggered. The function will be called after it stops being called for\r\n    // N milliseconds. If `immediate` is passed, trigger the function on the\r\n    // leading edge, instead of the trailing.\r\n    function debounce(func, wait, immediate) {\r\n        let timeout;\r\n        return function () {\r\n            const context = this;\r\n            const args = arguments;\r\n            const later = function () {\r\n                timeout = null;\r\n                if (!immediate) func.apply(context, args);\r\n            };\r\n            const callNow = immediate && !timeout;\r\n            clearTimeout(timeout);\r\n            timeout = setTimeout(later, wait);\r\n            if (callNow) func.apply(context, args);\r\n        };\r\n    }\r\n\r\n    const Emitter = (function () {\r\n        return {\r\n            fire(event, data, context, cancelable, bubbles) {\r\n                const cntx = context || document;\r\n                const myEvent = new CustomEvent(event, {\r\n                    detail: data,\r\n                    cancelable: cancelable || false,\r\n                    bubbles: bubbles || false,\r\n                });\r\n                cntx.dispatchEvent(myEvent);\r\n            },\r\n            on(event, listener, context) {\r\n                const cntx = context || document;\r\n                cntx.addEventListener(event, listener);\r\n            },\r\n            off(event, listener, context) {\r\n                const cntx = context || document;\r\n                cntx.removeEventListener(event, listener);\r\n            },\r\n        };\r\n    })();\r\n\r\n    const Event = function () {\r\n        const _listeners = {};\r\n        return {\r\n            addListener(type, listener) {\r\n                if (typeof _listeners[type] === 'undefined') {\r\n                    _listeners[type] = [];\r\n                }\r\n                _listeners[type].push(listener);\r\n            },\r\n            attach(type, listener) {\r\n                this.addListener(type, listener);\r\n            },\r\n            on(type, listener) {\r\n                this.addListener(type, listener);\r\n            },\r\n\r\n            fire(event, data, target) {\r\n                if (typeof event === 'string') {\r\n                    event = {\r\n                        type: event,\r\n                        data,\r\n                        target,\r\n                    };\r\n                }\r\n                if (!event.target) {\r\n                    event.target = this;\r\n                }\r\n                if (!event.type) {\r\n                    // falsy\r\n                    throw new Error('Type error');\r\n                }\r\n                if (_listeners[event.type] instanceof Array) {\r\n                    const listeners = _listeners[event.type];\r\n                    for (let i = 0, len = listeners.length; i < len; i++) {\r\n                        listeners[i].call(this, event);\r\n                    }\r\n                }\r\n            },\r\n            trigger(type, listener) {\r\n                this.fire(type, listener);\r\n            },\r\n\r\n            removeListener(type, listener) {\r\n                if (_listeners[type] instanceof Array) {\r\n                    const listeners = _listeners[type];\r\n                    for (let i = 0, len = listeners.length; i < len; i++) {\r\n                        if (listeners[i] === listener) {\r\n                            listeners.splice(i, 1);\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            off(type, listener) {\r\n                this.removeListener(type, listener);\r\n            },\r\n        };\r\n    };\r\n\r\n    function createTabButton(linkId, tabId, { target, fancy, title, bg }) {\r\n        const tabBtn = document.createElement('button');\r\n        tabBtn.className = 'tab-link';\r\n        tabBtn.setAttribute('href', '#!');\r\n        tabBtn.setAttribute('id', linkId);\r\n        tabBtn.setAttribute('title', title);\r\n        tabBtn.setAttribute('name', 'tab-link');\r\n        tabBtn.setAttribute('draggable', 'true');\r\n        tabBtn.setAttribute('data-tab', tabId);\r\n        tabBtn.setAttribute('data-target', target);\r\n        tabBtn.style.position = 'relative';\r\n        tabBtn.style.outline = 'none';\r\n        tabBtn.style.height = '100%';\r\n        tabBtn.style.width = 'auto';\r\n        tabBtn.style.border = '0 none transparent';\r\n        tabBtn.style.fontSize = '12px';\r\n        tabBtn.style.fontWeight = '500';\r\n        tabBtn.style.margin = '0';\r\n        tabBtn.style.padding = '0';\r\n        tabBtn.style.boxShadow = 'none';\r\n        tabBtn.style.background = bg || 'inherit';\r\n        tabBtn.style.color = 'inherit';\r\n        tabBtn.style.cursor = 'pointer';\r\n        tabBtn.style.display = 'block';\r\n        // tabBtn.style.transform = 'rotate(-5deg)';\r\n        tabBtn.style.transition = 'background .1s';\r\n        if (fancy) {\r\n            tabBtn.style.borderRadius = '8px 1px 0px 0px';\r\n        } else {\r\n            tabBtn.style.borderRadius = '1px 1px 0px 0px';\r\n        }\r\n\r\n        return tabBtn;\r\n    }\r\n    function createCloseButton() {\r\n        const closeBtn = document.createElement('a');\r\n        closeBtn.innerHTML = '&times';\r\n        closeBtn.setAttribute('name', 'close-button');\r\n        closeBtn.setAttribute('title', 'close');\r\n        closeBtn.style.borderRadius = '50%';\r\n        closeBtn.style.visibility = 'hidden';\r\n        closeBtn.style.height = closeBtn.style.width = '16px';\r\n        closeBtn.style.float = 'right';\r\n        closeBtn.style.marginRight = '2px';\r\n        closeBtn.style.marginLeft = '5px';\r\n        closeBtn.style.display = 'flex';\r\n        closeBtn.style.padding = '2px 0px 0px 4px';\r\n        closeBtn.style.alignContent = 'center';\r\n        closeBtn.style.alignItems = 'center';\r\n        closeBtn.style.fontSize = '18px';\r\n        closeBtn.style.color = '#efefef';\r\n        closeBtn.style.fontWeight = '700';\r\n        closeBtn.style.background = 'transparent';\r\n        closeBtn.addEventListener('mouseenter', () => {\r\n            closeBtn.style.color = 'red';\r\n        });\r\n        closeBtn.addEventListener('mouseleave', () => {\r\n            closeBtn.style.color = '';\r\n        });\r\n\r\n        return closeBtn;\r\n    }\r\n    function createLabel(text, title) {\r\n        const label = document.createElement('label');\r\n        label.setAttribute('name', 'tab-link-label');\r\n        label.className = 'tab-link-label';\r\n        label.style.margin = '0';\r\n        label.style.paddingRight = '4px';\r\n        label.style.paddingLeft = '2px';\r\n        label.style.verticalAlign = 'middle';\r\n        // label.style.padding = '0';\r\n        label.style.color = 'inherit';\r\n        label.style.maxWidth = '125px';\r\n        label.style.overflow = 'hidden';\r\n        label.style.textOverflow = 'ellipse';\r\n        label.style.whiteSpace = 'nowrap';\r\n        label.style.background = '';\r\n        label.style.cursor = 'pointer';\r\n        label.style.fontSize = 'inherit';\r\n        label.style.fontWeight = 'inherit';\r\n        label.append(document.createTextNode(text));\r\n        label.setAttribute('title', title || text);\r\n        return label;\r\n    }\r\n    function createTabBarWraper() {\r\n        const tabbarContainer = document.createElement('div');\r\n        tabbarContainer.style.position = 'relative';\r\n        tabbarContainer.style.height = '100%';\r\n        // tabbarContainer.style.height = '100%';\r\n        tabbarContainer.style.width = '100%';\r\n        tabbarContainer.style.border = 'none';\r\n        tabbarContainer.style.padding = '0';\r\n        tabbarContainer.style.background = 'red';\r\n        tabbarContainer.className = 'tabbar-wrapper';\r\n        return tabbarContainer;\r\n    }\r\n    function createTabBar() {\r\n        const tabBar = document.createElement('div');\r\n        tabBar.setAttribute('id', randomId());\r\n        tabBar.style.position = 'absolute';\r\n        // tabBar.style.width = '100%';\r\n        tabBar.style.top = '0';\r\n        tabBar.style.bottom = '0';\r\n        tabBar.style.left = '16px';\r\n        tabBar.style.right = '16px';\r\n        tabBar.style.overflow = 'hidden';\r\n        tabBar.style.padding = '1px';\r\n        tabBar.style.margin = '0px';\r\n        tabBar.style.paddingRight = '7px';\r\n        tabBar.style.background = 'inherit';\r\n        tabBar.style.display = 'flex';\r\n        tabBar.className = 'tab-bar';\r\n        return tabBar;\r\n    }\r\n    function createButton(name, text, float) {\r\n        const btn = document.createElement('button');\r\n        btn.id = randomId();\r\n        btn.setAttribute('name', name);\r\n        btn.style.position = 'relative';\r\n        btn.style.height = '100%';\r\n        btn.style.border = '0 none transparent';\r\n        btn.style.background = 'transparent';\r\n        btn.style.color = 'white';\r\n        btn.style.marginRight = btn.style.marginLeft = '1px';\r\n        btn.style.padding = '2px';\r\n        // btn.style.paddingLeft = btn.style.paddingRight = '2px';\r\n        btn.style.cursor = 'pointer';\r\n        btn.style.fontWeight = '900';\r\n        btn.style.fontSize = '14px';\r\n        btn.style.float = float || 'none';\r\n        btn.style.outline = 'none';\r\n        btn.style.borderRadius = '4px 4px';\r\n        btn.innerHTML = text;\r\n        return btn;\r\n    }\r\n    function createImage(options) {\r\n        const img = document.createElement('span');\r\n        img.style.marginRight = '2px';\r\n        // img.style.color = '#b00';\r\n        img.style.fontWeight = 'bold';\r\n        img.innerHTML = options.icon || 'kb';\r\n        img.style.float = 'left';\r\n        img.style.paddingLeft = '4px';\r\n        return img;\r\n    }\r\n    function createLabelContainer(options) {\r\n        const labelContainer = document.createElement('label');\r\n        labelContainer.setAttribute('name', 'tab-link-label-wraper');\r\n        labelContainer.style.display = 'flex';\r\n        labelContainer.style.alignContent = 'center';\r\n        labelContainer.style.alignItems = 'center';\r\n        labelContainer.style.padding = '2px';\r\n        labelContainer.style.height = '100%';\r\n        labelContainer.style.width = '100%';\r\n        labelContainer.style.color = 'inherit';\r\n        labelContainer.style.background = 'transparent';\r\n        labelContainer.style.cursor = 'pointer';\r\n\r\n        return labelContainer;\r\n    }\r\n    function createTable(tabBarWrapper, pagePanel, settings = {}) {\r\n        let banner;\r\n        let footer;\r\n        if (settings.banner) {\r\n            banner = addBanner();\r\n        }\r\n        if (settings.footer) {\r\n            footer = addFooter();\r\n        }\r\n        const doc = document.createDocumentFragment();\r\n        const table = document.createElement('table');\r\n        table.style.width = table.style.height = '100%';\r\n        doc.append(table);\r\n\r\n        const thead = document.createElement('thead');\r\n        table.append(thead);\r\n\r\n        const bannerRow = document.createElement('tr');\r\n        bannerRow.style.minHeight = '0px';\r\n        bannerRow.style.maxHeight = '80px';\r\n        thead.append(bannerRow);\r\n        const th = document.createElement('th');\r\n        // th.setAttribute('colspan',3);\r\n        th.style.textAlign = 'left';\r\n        th.style.padding = '0';\r\n        if (banner) {\r\n            th.append(banner);\r\n        } else {\r\n            bannerRow.style.display = 'none';\r\n        }\r\n        bannerRow.appendChild(th);\r\n\r\n        const tbody = document.createElement('tbody');\r\n        table.append(tbody);\r\n\r\n        const linkRow = document.createElement('tr');\r\n        linkRow.style.minHeight = '24px';\r\n        linkRow.style.height = `${settings.tabHeight}px`;\r\n        linkRow.style.padding = '0';\r\n        tbody.append(linkRow);\r\n\r\n        let td = document.createElement('td');\r\n        td.style.overflow = 'hidden';\r\n        td.style.whiteSpace = 'nowrap';\r\n        td.style.textAlign = 'left';\r\n        td.style.padding = '0';\r\n        td.append(tabBarWrapper);\r\n        linkRow.appendChild(td);\r\n        table.style.borderCollapse =\r\n            linkRow.style.borderCollapse =\r\n            td.style.borderCollapse =\r\n                'collapse';\r\n        table.style.border =\r\n            linkRow.style.border =\r\n            td.style.border =\r\n                '0 none transparent';\r\n\r\n        const pageRow = document.createElement('tr');\r\n        tbody.append(pageRow);\r\n        td = document.createElement('td');\r\n        td.append(pagePanel);\r\n        td.style.textAlign = 'left';\r\n        td.style.padding = '0';\r\n        pageRow.appendChild(td);\r\n\r\n        const linkRow2 = document.createElement('tr');\r\n        tbody.append(linkRow2);\r\n        td = document.createElement('td');\r\n        td.style.textAlign = 'left';\r\n        td.style.padding = '0';\r\n        linkRow2.appendChild(td);\r\n        linkRow2.style.minHeight = '24px';\r\n        linkRow2.style.height = `${settings.tabHeight}px`;\r\n\r\n        const footerRow = document.createElement('tr');\r\n        tbody.append(footerRow);\r\n        td = document.createElement('td');\r\n        footerRow.appendChild(td);\r\n        footerRow.style.maxHeight = '24px';\r\n        td = document.createElement('td');\r\n        td.style.padding = '0';\r\n        if (footer) {\r\n            td.append(footer || document.createTextNode(''));\r\n        } else {\r\n            footerRow.style.display = 'none';\r\n        }\r\n        footerRow.appendChild(td);\r\n        td = document.createElement('td');\r\n        td.style.padding = '0';\r\n        footerRow.appendChild(td);\r\n        if (settings.bottom) {\r\n            linkRow2.firstElementChild.nextSibling.appendChild(tabBarWrapper);\r\n            linkRow.style.display = 'none';\r\n        } else {\r\n            linkRow2.style.display = 'none';\r\n        }\r\n        return doc;\r\n    }\r\n    function createPage(pageId, tabId, linkId, options) {\r\n        const page = document.createElement('div');\r\n        page.setAttribute('id', pageId);\r\n        page.setAttribute('data-tab', tabId);\r\n        page.setAttribute('data-trigger', linkId);\r\n        page.innerHTML = options.text || '';\r\n        page.style.position = 'absolute';\r\n        page.style.padding = '8px 16px';\r\n        page.style.visibility = 'hidden';\r\n        page.style.overflow = 'hidden';\r\n        page.style.top =\r\n            page.style.bottom =\r\n            page.style.left =\r\n            page.style.right =\r\n                '0';\r\n        // page.style.top='0'; do not specify top!!!\r\n        page.style.background = options.bg || '';\r\n        return page;\r\n    }\r\n    function createPagePanel() {\r\n        const panel = document.createElement('div');\r\n        panel.setAttribute('id', randomId());\r\n        panel.style.position = 'relative';\r\n        panel.className = 'tab-panel';\r\n        panel.style.width = '100%';\r\n        panel.style.height = '100%';\r\n        panel.style.overflow = 'hidden';\r\n        panel.style.margin = '0';\r\n        panel.style.top = '0';\r\n        panel.style.background = '';\r\n        return panel;\r\n    }\r\n    function loadFromMarkup(el, fn) {\r\n        if (typeof el === 'string') {\r\n            el = document.getElementById(el);\r\n        }\r\n        if (!el || !el.children) {\r\n            throw new Error('Invalid element to load markup');\r\n        }\r\n        const markup = el.children;\r\n        // let doc=document.createDocumentFragment();\r\n        if (!markup || markup.length === 0) return fn();\r\n        const banner = el.querySelector('.tab-banner');\r\n        const footer = el.querySelector('.tab-footer');\r\n        const links = el.querySelector('.tab-links').children;\r\n        const pages = el.querySelector('.tab-pages').children;\r\n        const data = {\r\n            banner: banner.innerHTML,\r\n            footer: footer.innerHTML,\r\n            tabs: [],\r\n        };\r\n        if (banner) banner.remove();\r\n        if (footer) footer.remove();\r\n\r\n        while (links.length > 0) {\r\n            const node = links[0];\r\n            const page = pages[0];\r\n            if (!node) continue;\r\n            data.tabs.push({\r\n                id: node.id !== '' ? node.id : null,\r\n                label: node.textContent,\r\n                title: node.getAttribute('title'),\r\n                closable: node.getAttribute('closable'),\r\n                target: node.getAttribute('data-target'),\r\n                selected: node.getAttribute('selected'),\r\n                html: page ? page.innerHTML : '',\r\n                bg: page ? page.style.background : '#0bc',\r\n                style: node.getAttribute('tab-style'),\r\n            });\r\n            node.remove();\r\n            page.remove();\r\n        }\r\n        return data;\r\n    }\r\n    function addFooter() {\r\n        const footer = document.createElement('span');\r\n        footer.setAttribute('name', 'tab-footer');\r\n        footer.innerHTML = settings.footer;\r\n        footer.className = 'tab-footer';\r\n        footer.style.left = '0';\r\n        footer.style.right = '0';\r\n        footer.style.bottom = '0';\r\n        footer.style.padding = '2px';\r\n        footer.style.display = 'flex';\r\n        footer.style.justifyContent = 'center';\r\n        footer.style.alignItems = 'center';\r\n        // footer.style.background='#030';\r\n        // footer.style.borderTop='1px solid #020';\r\n\r\n        return footer;\r\n    }\r\n    function addBanner() {\r\n        const banner = document.createElement('span');\r\n        banner.setAttribute('name', 'tab-banner');\r\n        banner.innerHTML =\r\n            typeof settings.banner === 'string'\r\n                ? settings.banner\r\n                : settings.banner.innerHTML;\r\n        banner.style.display = 'flex';\r\n        banner.style.padding = '5px';\r\n        banner.style.justifyContent = 'center';\r\n        banner.style.alignItems = 'center';\r\n        banner.className = 'tab-banner';\r\n        banner.style.background = 'green';\r\n\r\n        return banner;\r\n    }\r\n    function mountTab(el, doc, tabPagePanel) {\r\n        // const container = typeof el === 'object' ? el : document.getElementById(el);\r\n        container.appendChild(tabPagePanel);\r\n        const tabbar = doc.querySelector('div');\r\n        let banner;\r\n        let footer;\r\n        if (settings.banner) {\r\n            banner = addBanner(container);\r\n            container.prepend(banner);\r\n        }\r\n        if (settings.bottom) {\r\n            container.lastChild.after(doc);\r\n        } else {\r\n            container.lastChild.before(doc);\r\n        }\r\n        if (settings.footer) {\r\n            footer = addFooter(container);\r\n            container.lastChild.after(footer);\r\n        }\r\n        // container.style.height='100%';\r\n        // container.style.width='100%';\r\n        container.style.top =\r\n            container.style.bottom =\r\n            container.style.left =\r\n            container.style.right =\r\n                '0';\r\n        const bannerBox = banner ? banner.getBoundingClientRect() : null;\r\n        const bannerBottom = banner ? bannerBox.bottom - bannerBox.top : 0;\r\n\r\n        const footerBox = footer ? footer.getBoundingClientRect() : null;\r\n        const footerTop = footer ? footerBox.bottom - footerBox.top : 0;\r\n\r\n        if (settings.bottom) {\r\n            // tab bar is at bottom oftab window\r\n            tabbar.style.bottom = `${footerTop}px`;\r\n        } else {\r\n            tabbar.style.top = `${bannerBottom}px`;\r\n        }\r\n        tabbar.style.border = '0px none transparent';\r\n        tabPagePanel.style.border = '0px none transparent';\r\n    }\r\n    function applySelection(el, options) {\r\n        if (!el || !el.parentElement) {\r\n            return;\r\n        }\r\n        const tablinks = el.parentElement.children;\r\n        for (let i = 0; i < tablinks.length; i++) {\r\n            tablinks[i].classList.remove('active');\r\n            tablinks[i].style.background = options.bg;\r\n            tablinks[i].style.color = options.color;\r\n            // tablinks[i].lastChild.lastChild.style.visibility = \"hidden\";\r\n            tablinks[i].style.boxShadow = '1px 1px 2px 1px #333';\r\n            // tablinks[i].style.margin = '';\r\n        }\r\n\r\n        el.classList.add('active');\r\n        el.style.background = options.activeBg;\r\n        el.style.color = options.activecolor;\r\n        el.style.boxShadow = '4px 4px 16px 2px #333';\r\n        // el.style.marginRight = '1px';\r\n    }\r\n    const createTabs = function (el, options) {\r\n        const tabIndex = -1;\r\n        const currentIndex = 0;\r\n        const customEvent = new Event();\r\n        let selectedTab;\r\n        let tabBar;\r\n        let tabBarWraper;\r\n        let rightBtn;\r\n        let leftBtn;\r\n        let addBtn;\r\n        let pagePanelId;\r\n        let tabBarId;\r\n        let themeOptions;\r\n        let tabSettings;\r\n        let container;\r\n        let tabButtonsCount;\r\n        let dragStartPoint;\r\n        let dragStopPoint;\r\n        const tabs = new Map();\r\n        const buttons = {};\r\n        const links = {};\r\n        const pages = {};\r\n        const hiddenTabs = [];\r\n\r\n        init(el, options);\r\n        /**\r\n         * Initialize tab container\r\n         * @param {HTMLElement} el HTMLElement to attach tabs\r\n         * @param {Object} options Additional settings\r\n         * @returns void\r\n         */\r\n        function init(el, options) {\r\n            container =\r\n                typeof el === 'object' && el instanceof HTMLElement\r\n                    ? el\r\n                    : document.getElementById(el);\r\n            themeOptions = options;\r\n            const data = options.loadFromMarkup ? loadFromMarkup(el) : null;\r\n            if (data) {\r\n                themeOptions = Object.assign(themeOptions, data);\r\n            }\r\n            applySettings(themeOptions);\r\n            leftBtn = createButton('left-nav-button', '&lt;', 'left');\r\n            // leftNavId = leftBtn.id;\r\n            leftBtn.addEventListener('mousedown', () => {\r\n                scroll(false);\r\n            });\r\n\r\n            addBtn = createButton('add-tab-button', '+', 'left');\r\n            // addBtnId = addBtn.id;\r\n            if (themeOptions.add) {\r\n                addBtn.style.visibility = 'visible';\r\n            } else {\r\n                addBtn.style.visibility = 'hidden';\r\n            }\r\n            addBtn.addEventListener('mousedown', () => {\r\n                customEvent.fire('add-tab-click', randomId());\r\n            });\r\n            tabBar = createTabBar();\r\n            tabBarId = tabBar.id;\r\n\r\n            tabBarWraper = createTabBarWraper();\r\n            tabBarWraper.appendChild(leftBtn);\r\n            tabBarWraper.append(tabBar);\r\n            // tabBarWraper.appendChild(addBtn);\r\n            /////tabBarWraper.style.background = 'purple';\r\n            rightBtn = createButton('right-nav-button', '&gt;', 'right');\r\n            rightBtn.addEventListener('mousedown', () => {\r\n                scroll(true);\r\n            });\r\n            tabBarWraper.appendChild(rightBtn);\r\n            const pagePanel = createPagePanel();\r\n            pagePanelId = pagePanel.id;\r\n            const layout = createTable(tabBarWraper, pagePanel, themeOptions);\r\n\r\n            container.append(layout);\r\n            setTheme(themeOptions.theme);\r\n            attachDomEventListeners(this);\r\n            if (themeOptions.tabs) {\r\n                dynamicLoad(themeOptions.tabs);\r\n            }\r\n            toggleNavigator(getLeftNavButton(), false);\r\n            toggleNavigator(getRightNavButton(), false);\r\n            ///////rightBtn.style.visibility = 'visible';\r\n        }\r\n\r\n        function getTabAtIndex(index) {\r\n            let tab = null;\r\n            let i = 0;\r\n            for (const value of tabs.values()) {\r\n                if (i === index) {\r\n                    tab = value;\r\n                    break;\r\n                }\r\n                i++;\r\n            }\r\n            return tab;\r\n        }\r\n\r\n        function unhide() {\r\n            // const tabs = tabs.entries()\r\n            const last = getTabAtIndex(tabs.size - 1).linkButton;\r\n            const visibles = getVisibleTabs();\r\n            const firstVisible = visibles[0];\r\n            if (!firstVisible.previousSibling) return;\r\n            // let lastVisible=visibles[visibles.length-1];\r\n            const lastHidden = firstVisible.previousSibling || firstVisible;\r\n            const { width } = lastHidden.getBoundingClientRect();\r\n            const gap =\r\n                tabBar.getBoundingClientRect().right -\r\n                last.getBoundingClientRect().right;\r\n            if (width < gap) {\r\n                scrollLinkIntoView(lastHidden);\r\n            }\r\n        }\r\n\r\n        function attachDomEventListeners() {\r\n            const tabBar = getTabBar();\r\n            window.addEventListener('resize', () => {\r\n                debounce(() => {\r\n                    if (!selectedTab) return false;\r\n                    if (!isLinkVisible(selectedTab.linkButton)) {\r\n                        scrollLinkIntoView(selectedTab.linkButton);\r\n                    } else {\r\n                        unhide();\r\n                        scrollLinkIntoView(selectedTab.linkButton);\r\n                    }\r\n                    // showHideNavButton();\r\n                    showHideNavigator();\r\n                }, 200);\r\n            });\r\n\r\n            tabBar.addEventListener(\r\n                'keyup',\r\n                (event) => {\r\n                    handleKeypress(event);\r\n                },\r\n                true\r\n            );\r\n\r\n            tabBar.addEventListener(\r\n                'drop',\r\n                (event) => {\r\n                    event.preventDefault();\r\n\r\n                    dragStopPoint = event.clientX;\r\n                    drop(event);\r\n                },\r\n                true\r\n            );\r\n\r\n            tabBar.addEventListener(\r\n                'dragover',\r\n                (event) => {\r\n                    event.preventDefault();\r\n                },\r\n                true\r\n            );\r\n\r\n            tabBar.addEventListener('dragstart', (event) => {\r\n                dragStartPoint = event.clientX;\r\n                drag(event);\r\n            });\r\n        }\r\n\r\n        function handleKeypress(e) {\r\n            const code = e.keyCode;\r\n            const link = selectedTab.button;\r\n            // eslint-disable-next-line default-case\r\n            if (!link) return;\r\n            switch (code) {\r\n                case 37:\r\n                    if (link.previousSibling) {\r\n                        select(link.previousSibling.getAttribute('data-tab'));\r\n                    }\r\n                    break; // left key\r\n                case 39:\r\n                    if (link.nextSibling) {\r\n                        select(link.nextSibling.getAttribute('data-tab'));\r\n                    }\r\n                    break; // right key\r\n                case 38:\r\n                    break; // up key\r\n                case 40:\r\n                    link.blur();\r\n                    break; // down key\r\n                case 13:\r\n                    break; // enter key\r\n                default:\r\n                    break;\r\n            }\r\n        }\r\n        function showHideNavigator() {\r\n            const visibleButtons = getVisibleTabs();\r\n            const firstVisibleButton = visibleButtons[0];\r\n            const lastVisibleButton = visibleButtons[visibleButtons.length - 1];\r\n\r\n            if (!firstVisibleButton) return;\r\n            if (firstVisibleButton.previousSibling) {\r\n                toggleNavigator(getLeftNavButton(), true);\r\n            } else {\r\n                toggleNavigator(getLeftNavButton(), false);\r\n            }\r\n            if (lastVisibleButton.nextSibling) {\r\n                toggleNavigator(getRightNavButton(), true);\r\n            } else {\r\n                toggleNavigator(getRightNavButton(), false);\r\n            }\r\n        }\r\n        function showHideNavButton() {\r\n            // console.log(settings);\r\n            if (themeOptions.infiniteScroll) {\r\n                // return;\r\n            }\r\n            const visibleButtons = getVisibleTabs();\r\n            const firstVisibleButton = visibleButtons[0];\r\n            const lastVisibleButton = visibleButtons[visibleButtons.length - 1];\r\n\r\n            if (!firstVisibleButton) return;\r\n            const rBtn = getRightNavButton();\r\n            const lBtn = getLeftNavButton();\r\n            if (firstVisibleButton.previousSibling) {\r\n                toggleNavButton(rBtn, true);\r\n            } else {\r\n                toggleNavButton(lBtn, false);\r\n            }\r\n            if (lastVisibleButton.nextSibling) {\r\n                toggleNavButton(rBtn, true);\r\n            } else {\r\n                toggleNavButton(rBtn, false);\r\n            }\r\n        }\r\n\r\n        function toggleNavButton(el, show) {\r\n            if (show) {\r\n                // el.style.visibility = 'visible';\r\n                el.style.display = 'block';\r\n            } else {\r\n                // el.style.visibility = 'hidden';\r\n                el.style.display = 'none';\r\n            }\r\n        }\r\n\r\n        function toggleAddButton(show) {\r\n            if (show) {\r\n                getAddButton().style.display = 'block';\r\n            } else {\r\n                getAddButton().style.display = 'none';\r\n            }\r\n        }\r\n\r\n        function applyTheme(options) {\r\n            const table = getContainer().querySelector('table');\r\n            table.style.background = '';\r\n            table.style.color = options.color;\r\n            leftBtn.style.color =\r\n                rightBtn.style.color =\r\n                addBtn.style.color =\r\n                    options.color;\r\n            tabBarWraper.style.background = options.activeBg;\r\n        }\r\n\r\n        // Public API\r\n        /** *\r\n         * @param theme String\r\n         * @returns null\r\n         */\r\n        function setTheme(theme) {\r\n            let color = '#ddd';\r\n            let bg = '#4486a3';\r\n            let activecolor = '#ddd';\r\n            let activeBg = '#4476a3';\r\n            switch (theme) {\r\n                case 'dark':\r\n                    // bg = '#002255';\r\n                    // activeBg = '#003355';\r\n                    // color = '#fff';\r\n                    break;\r\n                case 'black':\r\n                    // bg = '#111';\r\n                    // activeBg = '#333';\r\n                    // color = '#fff';\r\n                    break;\r\n                case 'blue':\r\n                    bg = 'rgba(8, 68, 117, 1)';\r\n                    activeBg = 'rgba(10, 100, 186, 1)';\r\n                    break;\r\n                case 'green':\r\n                    bg = 'rgba(0, 149, 120, 1)';\r\n                    activeBg = '#054';\r\n                    break;\r\n                case 'red':\r\n                    bg = 'rgb(120, 0, 30)';\r\n                    activeBg = 'rgb(123, 0, 50)';\r\n                    break;\r\n                case 'white':\r\n                    bg = '#bcd';\r\n                    color = '#000';\r\n                    activecolor = '#eee';\r\n                    break;\r\n                default:\r\n                    bg = 'rgba(10, 100, 186, 1)';\r\n                    activeBg = 'rgba(10, 100, 206, 1)';\r\n                    color = '#fff';\r\n                    break;\r\n            }\r\n            tabSettings = {\r\n                bg,\r\n                color,\r\n                activecolor,\r\n                activeBg,\r\n            };\r\n            applyTheme(tabSettings);\r\n        }\r\n\r\n        function getTheme() {\r\n            return themeOptions.theme;\r\n        }\r\n\r\n        function toggleNavigator(el, show) {\r\n            if (show) {\r\n                //el.style.visibility = 'visible';\r\n                el.style.display = 'block';\r\n            } else {\r\n                // el.style.visibility = 'hidden';\r\n                el.style.display = 'none';\r\n            }\r\n        }\r\n\r\n        function getSelectedTab() {\r\n            return selectedTab;\r\n        }\r\n\r\n        function getTab(tabId) {\r\n            return tabs.get(tabId);\r\n        }\r\n\r\n        function setContent(id, content) {\r\n            const page = tabs.get(id).pageId;\r\n            document.getElementById(page).innerHTML = content;\r\n        }\r\n\r\n        function setTitle(id, title) {\r\n            const link = tabs.get(id).linkId;\r\n            document.getElementById(link).firstElementChild.innerHTML = title;\r\n        }\r\n        function applySettings(options) {\r\n            const mySettings = {\r\n                limit: undefined,\r\n                banner: undefined,\r\n                footer: undefined,\r\n                closeOnClick: undefined,\r\n                infiniteScroll: false,\r\n                fancy: false,\r\n                add: false,\r\n                theme: '',\r\n                tabHeight: 32,\r\n                leftTooltip: '&lt;',\r\n                rightTooltip: '&gt;',\r\n                addTooltip: '+',\r\n                data: null,\r\n            };\r\n\r\n            themeOptions = Object.assign(mySettings, options);\r\n        }\r\n        function dynamicLoad(tabs) {\r\n            if (!tabs) return;\r\n            let selected = null;\r\n            tabs.forEach((d) => {\r\n                if (d.selected) {\r\n                    selected = d.id;\r\n                }\r\n                const tab = add(d);\r\n                const page = getPage(tab.id);\r\n                // page.parentElement.style.top='80px';\r\n                // page.background='#054';\r\n                page.innerHTML =\r\n                    typeof d.html === 'function' ? d.html() : d.html;\r\n                page.setAttribute('contenteditable', true);\r\n                page.style.overflow = 'auto';\r\n                page.style.zIndex = '100';\r\n            });\r\n            if (selected) {\r\n                select(selected);\r\n            }\r\n        }\r\n\r\n        function getPage(tabId) {\r\n            const tab = tabs.get(tabId);\r\n            return document.getElementById(tab.pageId);\r\n        }\r\n\r\n        function getLinkButton(linkId) {\r\n            return document.getElementById(linkId);\r\n        }\r\n\r\n        function getCloswButton(id) {\r\n            const linkButton = getLinkButton(id);\r\n            return linkButton ? linkButton.lastElementChild() : null;\r\n        }\r\n\r\n        function getTabPagePanel() {\r\n            return document.getElementById(pagePanelId);\r\n        }\r\n\r\n        function getRightNavButton() {\r\n            return rightBtn;\r\n        }\r\n\r\n        function getLeftNavButton() {\r\n            return leftBtn;\r\n        }\r\n\r\n        function getAddButton() {\r\n            return addBtn;\r\n        }\r\n\r\n        function getFooter() {\r\n            return document.getElementById(footerId);\r\n        }\r\n\r\n        function getBanner() {\r\n            return document.getElementById(bannerId);\r\n        }\r\n\r\n        function getTabBar() {\r\n            return document.getElementById(tabBarId);\r\n        }\r\n\r\n        function getContainer() {\r\n            return container; // document.getElementById(containerId);\r\n        }\r\n        function hideExtraTabs() {\r\n            const links = Object.values(links);\r\n            const numTotal = links.length;\r\n            const numVisible = Math.min(numTotal, themeOptions.limit);\r\n            for (let i = 0; i < links.length; i++) {\r\n                links[i].style.display = 'none'; // hide xo tabs.\r\n            }\r\n            for (let j = 0; j < numVisible; j++) {\r\n                links[j].style.display = 'inline'; // Show visible tabs.\r\n            }\r\n        }\r\n\r\n        function getLinkTarget(el) {\r\n            try {\r\n                while (el.name !== 'tab-link') {\r\n                    el = el.parentElement;\r\n                }\r\n                return el;\r\n            } catch (e) {\r\n                // const length = tabs.size - 1\r\n                return getTabAtIndex(tabs.size - 1).linkButton;\r\n                // Object.values(tabs)[length].linkButton\r\n            }\r\n        }\r\n\r\n        function allowDrop(ev) {\r\n            ev.preventDefault();\r\n        }\r\n\r\n        function drag(ev) {\r\n            ev.dataTransfer.setData('text', ev.target.id);\r\n        }\r\n\r\n        function drop(ev) {\r\n            ev.preventDefault();\r\n            const data = ev.dataTransfer.getData('text');\r\n            // do not drop on label wrappers or close button\r\n            const target = getLinkTarget(ev.target);\r\n            const dataEl = document.getElementById(data);\r\n\r\n            if (dragStartPoint > dragStopPoint) {\r\n                target.before(dataEl);\r\n            } else {\r\n                target.after(dataEl);\r\n            }\r\n            // target.parentNode.insertBefore(dataEl,dragStartPoint>dragStopPoint?target:target.nextSibling);\r\n        }\r\n        function getSettings(options) {\r\n            const { length } = Object.keys(buttons);\r\n            const tabId = options.tabId || randomId();\r\n            const buttonId = `tab-btn-${tabId}`;\r\n            const target = `tab-page-${tabId}`;\r\n            const tabLabel = options.label || `Tab${Number(length + 1)}`;\r\n            const title = options.title || tabLabel;\r\n\r\n            const settings = {\r\n                tabId,\r\n                buttonId,\r\n                target,\r\n                label: tabLabel,\r\n                title,\r\n                html: options.html || '',\r\n                closable: options.close || true,\r\n                data: options.data || null,\r\n                icon: options.icon || '',\r\n                bg: options.bg || 'inherit',\r\n                color: options.color || 'inherit',\r\n                fancy: themeOptions.fancy,\r\n            };\r\n            return Object.assign(settings, options);\r\n        }\r\n        function handleTabClick(e) {\r\n            e.stopImmediatePropagation();\r\n            select(this.getAttribute('data-tab'));\r\n        }\r\n        function add(options = {}) {\r\n            const tabSettings = getSettings(options); // Object.assign(getSettings(options), options);\r\n            const page = createPage(\r\n                tabSettings.target,\r\n                tabSettings.tabId,\r\n                tabSettings.buttonId,\r\n                tabSettings\r\n            );\r\n\r\n            getTabPagePanel().appendChild(page);\r\n            const tabBtn = createTabButton(\r\n                tabSettings.buttonId,\r\n                tabSettings.tabId,\r\n                tabSettings\r\n            );\r\n            const labelContainer = createLabelContainer(tabSettings);\r\n            const img = createImage(tabSettings);\r\n            const label = createLabel(tabSettings.label, tabSettings.title);\r\n            const closeBtn = createCloseButton(tabSettings.tabId);\r\n\r\n            if (!tabSettings.closable) {\r\n                closeBtn.style.display = 'none';\r\n                labelContainer.style.paddingRight = '7px';\r\n            }\r\n            labelContainer.append(img);\r\n            labelContainer.append(label);\r\n            labelContainer.append(closeBtn);\r\n            tabBtn.append(labelContainer);\r\n            tabBtn.addEventListener('mouseup', handleTabClick);\r\n            tabBtn.addEventListener('mouseenter', (e) => {\r\n                e.stopPropagation();\r\n                if (selectedTab.linkButton.id === tabBtn.id) return;\r\n                closeBtn.style.visibility = 'visible';\r\n            });\r\n            tabBtn.addEventListener('mouseleave', (e) => {\r\n                e.stopPropagation();\r\n                if (selectedTab.linkButton.id === tabBtn.id) return;\r\n                closeBtn.style.visibility = 'hidden';\r\n            });\r\n            closeBtn.addEventListener('mousedown', (e) => {\r\n                e.stopPropagation();\r\n                close(tabSettings.tabId); // linkButton.getAttribute(\"data-tab\"));\r\n            });\r\n            buttons[tabBtn.id] = tabBtn;\r\n            // If there was a selected button already, insert after it\r\n            // otherwise append at the end of tab list\r\n            if ((selectedTab = getSelectedTab())) {\r\n                // tab.selected=false;\r\n                selectedTab.linkButton.after(tabBtn);\r\n                // getLinkButton(tab.linkId).after(linkButton);\r\n            } else {\r\n                getTabBar().appendChild(tabBtn);\r\n            }\r\n            tabs.set(tabSettings.tabId, {\r\n                id: tabSettings.tabId,\r\n                label: tabSettings.label,\r\n                text: tabSettings.text,\r\n                title: tabSettings.title,\r\n                linkId: tabSettings.buttonId,\r\n                pageId: tabSettings.target,\r\n                data: tabSettings.data,\r\n                selected: tabSettings.buttonId,\r\n                linkButton: tabBtn,\r\n                page,\r\n            });\r\n            selectedTab = tabs.get(tabSettings.tabId);\r\n            showHideNavButton();\r\n            select(tabBtn.getAttribute('data-tab'));\r\n            if (tabSettings.selected) {\r\n                return selectedTab;\r\n            }\r\n            return selectedTab;\r\n        }\r\n\r\n        function select(tabId) {\r\n            if (!tabId) {\r\n                throw new Error('Invalid tab address:');\r\n            }\r\n\r\n            if (selectedTab) {\r\n                document.getElementById(selectedTab.pageId).style.visibility =\r\n                    'hidden';\r\n                selectedTab.linkButton.lastChild.lastChild.style.visibility =\r\n                    'hidden';\r\n                selectedTab.selected = false;\r\n            }\r\n\r\n            let tab = tabs.get(tabId);\r\n            // let tabPage = selectedTab.getAttribute('data-target');\r\n            document.getElementById(tab.pageId).style.visibility = 'visible';\r\n            tab.linkButton.lastChild.lastChild.style.visibility = 'visible';\r\n            tab.selected = true;\r\n            applySelection(tab.linkButton, tabSettings);\r\n            if (!isLinkVisible(tab.linkButton)) {\r\n                scrollLinkIntoView(tab.linkButton);\r\n            }\r\n            selectedTab = tab;\r\n            customEvent.fire('select', selectedTab);\r\n\r\n            return selectedTab;\r\n        }\r\n\r\n        function close(tabId) {\r\n            if (!tabId) {\r\n                throw new Error('Invalid tab address:');\r\n            }\r\n            const tab = tabs.get(tabId);\r\n            // console.log(el, tab, tabs);\r\n            if (!tab) return;\r\n            const link = tab.linkButton; // getLinkButton(tab.linkId);\r\n            const next = link.nextSibling;\r\n            const prev = link.previousSibling;\r\n            customEvent.fire('before_close', tab);\r\n            link.remove();\r\n            document.getElementById(tab.pageId).remove();\r\n            selectedTab = null; // delete selectedTab;\r\n            tabs.delete(tabId);\r\n\r\n            customEvent.fire('close', tab);\r\n            if (next && next.getAttribute('data-tab')) {\r\n                select(next.getAttribute('data-tab'));\r\n            } else if (prev && prev.getAttribute('data-tab')) {\r\n                select(prev.getAttribute('data-tab'));\r\n            }\r\n            // showHideNavButton();\r\n            showHideNavigator();\r\n            scroll();\r\n            return tabId;\r\n        }\r\n        function isLinkVisible(link) {\r\n            const box = link.getBoundingClientRect();\r\n            const tabbar = getTabBar();\r\n            if (!tabbar) return false;\r\n            const box1 = tabbar.getBoundingClientRect();\r\n            return box.left >= box1.left && box.right <= box1.right;\r\n        }\r\n\r\n        function getVisibleTabs() {\r\n            const tabbar = getTabBar();\r\n            if (!tabbar) return false;\r\n            const links = Array.prototype.slice.call(\r\n                tabbar.querySelectorAll('button')\r\n            );\r\n            return links.filter((link) => isLinkVisible(link));\r\n        }\r\n\r\n        function getHiddenTabs() {\r\n            const links = Array.prototype.slice.call(\r\n                getTabBar().querySelectorAll('button')\r\n            );\r\n            return links.filter((link) => !isLinkVisible(link));\r\n        }\r\n\r\n        function scroll(right) {\r\n            if (themeOptions.infiniteScroll) {\r\n                infiniteScroll(right);\r\n            } else {\r\n                finiteScroll(right);\r\n                showHideNavigator();\r\n            }\r\n        }\r\n\r\n        function scrollLinkIntoView(el) {\r\n            if (isLinkVisible(el)) return;\r\n            const max = tabs.size;\r\n            let count = 0;\r\n            while (!isLinkVisible(el)) {\r\n                getRightNavButton().click();\r\n                count++;\r\n                if (count > max) break;\r\n            }\r\n            count = 0;\r\n            while (!isLinkVisible(el)) {\r\n                getLeftNavButton().click();\r\n                count++;\r\n                if (isLinkVisible(el)) return;\r\n                if (count > max) break;\r\n            }\r\n        }\r\n\r\n        function finiteScroll(right) {\r\n            tabButtonsCount = tabButtonsCount || 1;\r\n            tabButtonsCount++;\r\n            const visibleButtons = getVisibleTabs();\r\n            const firstVisibleButton = visibleButtons[0];\r\n            const lastVisibleButton = visibleButtons[visibleButtons.length - 1];\r\n            if (right && lastVisibleButton && lastVisibleButton.nextSibling) {\r\n                firstVisibleButton.style.display = 'none';\r\n            } else if (\r\n                !right &&\r\n                firstVisibleButton &&\r\n                firstVisibleButton.previousSibling\r\n            ) {\r\n                firstVisibleButton.previousSibling.style.display = '';\r\n            } else {\r\n                const tabbar = getTabBar();\r\n                if (!tabbar) return;\r\n                const bts = tabbar.querySelectorAll('button');\r\n                if (bts.length > 0) {\r\n                    bts[bts.length - 1].style.display = '';\r\n                }\r\n            }\r\n        }\r\n\r\n        function infiniteScroll(right) {\r\n            const tabbar = getTabBar();\r\n            if (!tabbar) return;\r\n            const links = tabbar.querySelectorAll('button');\r\n            if (links.length > 1) {\r\n                if (right) {\r\n                    links[links.length - 1].after(links[0]);\r\n                } else {\r\n                    links[0].before(links[links.length - 1]);\r\n                }\r\n            }\r\n        }\r\n        function onSelect(fn) {\r\n            customEvent.addListener('select', fn);\r\n        }\r\n        function onClose(fn) {\r\n            customEvent.addListener('close', fn);\r\n        }\r\n        function destroy() {\r\n            // removeListeners();\r\n            console.log('Tabs Destroyed');\r\n        }\r\n        return {\r\n            add,\r\n            close,\r\n            select,\r\n            getTab,\r\n            getTabAtIndex,\r\n            getSelectedTab,\r\n            getTabs: () => tabs,\r\n            setTheme,\r\n            getTheme,\r\n            onSelect,\r\n            onClose,\r\n            destroy,\r\n        };\r\n    };\r\n    return {\r\n        createTabs,\r\n        randomId,\r\n        Emitter,\r\n        Event,\r\n        debounce,\r\n    };\r\n})();\r\n\r\nexport default TabView;\r\n"],"names":["randomId","Math","random","toString","slice","Event","_listeners","addListener","type","listener","push","attach","this","on","fire","event","data","target","Error","Array","listeners","i","len","length","call","trigger","removeListener","splice","off","createButton","name","text","float","btn","document","createElement","id","setAttribute","style","position","height","border","background","color","marginRight","marginLeft","padding","cursor","fontWeight","fontSize","outline","borderRadius","innerHTML","addFooter","footer","settings","className","left","right","bottom","display","justifyContent","alignItems","addBanner","banner","createTabs","el","options","selectedTab","tabBar","tabBarWraper","rightBtn","leftBtn","addBtn","pagePanelId","tabBarId","themeOptions","tabSettings","container","dragStartPoint","dragStopPoint","customEvent","tabs","Map","buttons","getTabAtIndex","index","tab","values","showHideNavigator","visibleButtons","getVisibleTabs","firstVisibleButton","lastVisibleButton","toggleNavigator","getLeftNavButton","previousSibling","getRightNavButton","nextSibling","toggleNavButton","show","setTheme","theme","bg","activecolor","activeBg","table","querySelector","applyTheme","getSelectedTab","getPage","tabId","get","getElementById","pageId","getTabBar","handleTabClick","e","stopImmediatePropagation","select","getAttribute","add","Object","keys","buttonId","tabLabel","label","Number","assign","title","html","closable","close","icon","fancy","getSettings","page","linkId","visibility","overflow","top","createPage","appendChild","tabBtn","width","margin","boxShadow","transition","createTabButton","labelContainer","alignContent","createLabelContainer","img","paddingLeft","createImage","paddingRight","verticalAlign","maxWidth","textOverflow","whiteSpace","append","createTextNode","createLabel","closeBtn","addEventListener","createCloseButton","stopPropagation","linkButton","after","set","selected","rBtn","lBtn","showHideNavButton","lastChild","parentElement","tablinks","children","classList","remove","applySelection","isLinkVisible","max","size","count","click","scrollLinkIntoView","link","next","prev","scroll","box","getBoundingClientRect","tabbar","box1","prototype","querySelectorAll","filter","infiniteScroll","links","before","bts","finiteScroll","HTMLElement","tabbarContainer","loadFromMarkup","fn","markup","pages","node","textContent","limit","undefined","closeOnClick","tabHeight","leftTooltip","rightTooltip","addTooltip","applySettings","createTabBar","panel","pagePanel","layout","tabBarWrapper","doc","createDocumentFragment","thead","bannerRow","minHeight","maxHeight","th","textAlign","tbody","linkRow","td","borderCollapse","pageRow","linkRow2","footerRow","firstElementChild","createTable","window","button","keyCode","blur","handleKeypress","preventDefault","clientX","ev","dataTransfer","getData","getLinkTarget","dataEl","drop","setData","attachDomEventListeners","forEach","d","zIndex","dynamicLoad","init","getTab","getTabs","getTheme","onSelect","onClose","destroy","console","log","Emitter","context","cancelable","bubbles","cntx","myEvent","CustomEvent","detail","dispatchEvent","removeEventListener","debounce","func","wait","immediate","timeout","args","arguments","later","apply","callNow","clearTimeout","setTimeout"],"mappings":"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"}