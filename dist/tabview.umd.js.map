{"version":3,"file":"tabview.umd.js","sources":["../index.js"],"sourcesContent":["'use strict';\r\n/* jshint esversion: 8 */\r\nconst TabView = (function () {\r\n    function randomId() {\r\n        return Math.random().toString(36).slice(2);\r\n    }\r\n    // Returns a function, that, as long as it continues to be invoked, will not\r\n    // be triggered. The function will be called after it stops being called for\r\n    // N milliseconds. If `immediate` is passed, trigger the function on the\r\n    // leading edge, instead of the trailing.\r\n    function debounce(func, wait, immediate) {\r\n        let timeout;\r\n        return function () {\r\n            const context = this;\r\n            const args = arguments;\r\n            const later = function () {\r\n                timeout = null;\r\n                if (!immediate) func.apply(context, args);\r\n            };\r\n            const callNow = immediate && !timeout;\r\n            clearTimeout(timeout);\r\n            timeout = setTimeout(later, wait);\r\n            if (callNow) func.apply(context, args);\r\n        };\r\n    }\r\n\r\n    const Emitter = (function () {\r\n        return {\r\n            fire(event, data, context, cancelable, bubbles) {\r\n                const cntx = context || document;\r\n                const myEvent = new CustomEvent(event, {\r\n                    detail: data,\r\n                    cancelable: cancelable || false,\r\n                    bubbles: bubbles || false,\r\n                });\r\n                cntx.dispatchEvent(myEvent);\r\n            },\r\n            on(event, listener, context) {\r\n                const cntx = context || document;\r\n                cntx.addEventListener(event, listener);\r\n            },\r\n            off(event, listener, context) {\r\n                const cntx = context || document;\r\n                cntx.removeEventListener(event, listener);\r\n            },\r\n        };\r\n    })();\r\n\r\n    const Event = (function () {\r\n        const _listeners = {};\r\n        return {\r\n            addListener(type, listener) {\r\n                if (typeof _listeners[type] === 'undefined') {\r\n                    this._listeners[type] = [];\r\n                }\r\n                this._listeners[type].push(listener);\r\n            },\r\n            attach(type, listener) {\r\n                this.addListener(type, listener);\r\n            },\r\n            on(type, listener) {\r\n                this.addListener(type, listener);\r\n            },\r\n\r\n            fire(event, data, target) {\r\n                if (typeof event === 'string') {\r\n                    event = {\r\n                        type: event,\r\n                        data,\r\n                        target,\r\n                    };\r\n                }\r\n                if (!event.target) {\r\n                    event.target = this;\r\n                }\r\n                if (!event.type) {\r\n                    // falsy\r\n                    throw new Error('Type error');\r\n                }\r\n                if (_listeners[event.type] instanceof Array) {\r\n                    const listeners = _listeners[event.type];\r\n                    for (let i = 0, len = listeners.length; i < len; i++) {\r\n                        listeners[i].call(this, event);\r\n                    }\r\n                }\r\n            },\r\n            trigger(type, listener) {\r\n                this.fire(type, listener);\r\n            },\r\n\r\n            removeListener(type, listener) {\r\n                if (_listeners[type] instanceof Array) {\r\n                    const listeners = _listeners[type];\r\n                    for (let i = 0, len = listeners.length; i < len; i++) {\r\n                        if (listeners[i] === listener) {\r\n                            listeners.splice(i, 1);\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            off(type, listener) {\r\n                this.removeListener(type, listener);\r\n            },\r\n        };\r\n    })();\r\n\r\n    function createTabButton(linkId, tabId, { target, fancy, title, bg }) {\r\n        const tabBtn = document.createElement('button');\r\n        tabBtn.className = 'tab-link';\r\n        tabBtn.setAttribute('href', '#!');\r\n        tabBtn.setAttribute('id', linkId);\r\n        tabBtn.setAttribute('title', title);\r\n        tabBtn.setAttribute('name', 'tab-link');\r\n        tabBtn.setAttribute('draggable', 'true');\r\n        tabBtn.setAttribute('data-tab', tabId);\r\n        tabBtn.setAttribute('data-target', target);\r\n        tabBtn.style.position = 'relative';\r\n        tabBtn.style.outline = 'none';\r\n        tabBtn.style.height = '100%';\r\n        tabBtn.style.width = 'auto';\r\n        tabBtn.style.border = '0 none transparent';\r\n        tabBtn.style.fontSize = '12px';\r\n        tabBtn.style.fontWeight = '500';\r\n        tabBtn.style.margin = '0';\r\n        tabBtn.style.padding = '0';\r\n        tabBtn.style.boxShadow = 'none';\r\n        tabBtn.style.background = bg || 'inherit';\r\n        tabBtn.style.color = 'inherit';\r\n        tabBtn.style.cursor = 'pointer';\r\n        tabBtn.style.display = 'block';\r\n        tabBtn.style.transition = 'background .4s';\r\n        if (fancy) {\r\n            tabBtn.style.borderRadius = '8px 1px 0px 0px';\r\n        } else {\r\n            tabBtn.style.borderRadius = '1px 1px 0px 0px';\r\n        }\r\n\r\n        return tabBtn;\r\n    }\r\n    function createCloseButton() {\r\n        const closeBtn = document.createElement('a');\r\n        closeBtn.innerHTML = '&times';\r\n        closeBtn.setAttribute('name', 'close-button');\r\n        closeBtn.setAttribute('title', 'close');\r\n        closeBtn.style.borderRadius = '50%';\r\n        closeBtn.style.visibility = 'hidden';\r\n        closeBtn.style.height = closeBtn.style.width = '20px';\r\n        closeBtn.style.float = 'right';\r\n        closeBtn.style.marginRight = '2px';\r\n        closeBtn.style.marginLeft = '5px';\r\n        closeBtn.style.display = 'flex';\r\n        closeBtn.style.padding = '2px 0px 0px 4px';\r\n        closeBtn.style.alignContent = 'center';\r\n        closeBtn.style.alignItems = 'center';\r\n        closeBtn.style.fontSize = '18px';\r\n        closeBtn.style.color = '#efefef';\r\n        closeBtn.style.fontWeight = '700';\r\n        closeBtn.style.background = 'transparent';\r\n        closeBtn.addEventListener('mouseenter', () => {\r\n            closeBtn.style.background = '#555';\r\n        });\r\n        closeBtn.addEventListener('mouseleave', () => {\r\n            closeBtn.style.background = '';\r\n        });\r\n\r\n        return closeBtn;\r\n    }\r\n    function createLabel(text, title) {\r\n        const label = document.createElement('label');\r\n        label.setAttribute('name', 'tab-link-label');\r\n        label.className = 'tab-link-label';\r\n        label.style.margin = '0';\r\n        label.style.paddingRight = '2px';\r\n        label.style.paddingLeft = '2px';\r\n        label.style.verticalAlign = 'middle';\r\n        label.style.padding = '0';\r\n        label.style.color = 'inherit';\r\n        label.style.maxWidth = '80px';\r\n        label.style.overflow = 'hidden';\r\n        label.style.whiteSpace = 'nowrap';\r\n        label.style.background = '';\r\n        label.style.cursor = 'pointer';\r\n        label.style.fontSize = 'inherit';\r\n        label.style.fontWeight = 'inherit';\r\n        label.append(document.createTextNode(text));\r\n        label.setAttribute('title', title || text);\r\n        return label;\r\n    }\r\n    function createTabBarWraper() {\r\n        const tabbarContainer = document.createElement('div');\r\n        tabbarContainer.style.position = 'relative';\r\n        tabbarContainer.style.height = '100%';\r\n        tabbarContainer.style.height = '100%';\r\n        tabbarContainer.style.width = '100%';\r\n        tabbarContainer.style.border = 'none';\r\n        tabbarContainer.style.padding = 'none';\r\n        tabbarContainer.className = 'tabbar-wrapper';\r\n        return tabbarContainer;\r\n    }\r\n    function createBar() {\r\n        const tabBar = document.createElement('div');\r\n        tabBar.setAttribute('id', randomId());\r\n        tabBar.style.position = 'absolute';\r\n        tabBar.style.top = '0';\r\n        tabBar.style.bottom = '0';\r\n        tabBar.style.left = '60px';\r\n        tabBar.style.right = '30px';\r\n        tabBar.style.overflow = 'hidden';\r\n        tabBar.style.padding = '0px';\r\n        tabBar.style.margin = '0px';\r\n        tabBar.style.paddingRight = '7px';\r\n        tabBar.style.background = 'inherit';\r\n        tabBar.style.display = 'flex';\r\n        tabBar.className = 'tab-bar';\r\n        return tabBar;\r\n    }\r\n    function createButton(name, text, float) {\r\n        const btn = document.createElement('button');\r\n        btn.id = randomId();\r\n        btn.setAttribute('name', name);\r\n        btn.style.position = 'relative';\r\n        btn.style.height = '100%';\r\n        btn.style.border = '0 none transparent';\r\n        btn.style.background = 'transparent';\r\n        btn.style.color = 'white';\r\n        btn.style.marginRight = btn.style.marginLeft = '2px';\r\n        btn.style.padding = '2px';\r\n        btn.style.paddingLeft = btn.style.paddingRight = '7px';\r\n        btn.style.cursor = 'pointer';\r\n        btn.style.fontWeight = '900';\r\n        btn.style.fontSize = '14px';\r\n        btn.style.float = float || 'none';\r\n        btn.style.outline = 'none';\r\n        btn.style.borderRadius = '4px 4px';\r\n        btn.innerHTML = text;\r\n        return btn;\r\n    }\r\n    function createImage(options) {\r\n        const img = document.createElement('span');\r\n        img.style.marginRight = '7px';\r\n        img.style.color = '#b00';\r\n        img.style.fontWeight = 'bold';\r\n        img.innerHTML = options.icon || 'kb';\r\n        img.style.float = 'left';\r\n        return img;\r\n    }\r\n    function createLabelContainer(options) {\r\n        const labelContainer = document.createElement('label');\r\n        labelContainer.setAttribute('name', 'tab-link-label-wraper');\r\n        labelContainer.style.display = 'flex';\r\n        labelContainer.style.alignContent = 'center';\r\n        labelContainer.style.alignItems = 'center';\r\n        labelContainer.style.padding = '2px';\r\n        labelContainer.style.height = '100%';\r\n        labelContainer.style.width = '100%';\r\n        labelContainer.style.color = 'inherit';\r\n        labelContainer.style.background = 'transparent';\r\n        labelContainer.style.cursor = 'pointer';\r\n\r\n        return labelContainer;\r\n    }\r\n    function createTable(tabBarWrapper, pagePanel, settings = {}) {\r\n        let banner;\r\n        let footer;\r\n        if (settings.banner) {\r\n            banner = addBanner();\r\n        }\r\n        if (settings.footer) {\r\n            footer = addFooter();\r\n        }\r\n        const doc = document.createDocumentFragment();\r\n        const table = document.createElement('table');\r\n        table.style.width = table.style.height = '100%';\r\n        doc.append(table);\r\n\r\n        const thead = document.createElement('thead');\r\n        table.append(thead);\r\n\r\n        const bannerRow = document.createElement('tr');\r\n        bannerRow.style.minHeight = '0px';\r\n        bannerRow.style.maxHeight = '80px';\r\n        thead.append(bannerRow);\r\n        const th = document.createElement('th');\r\n        // th.setAttribute('colspan',3);\r\n        th.style.textAlign = 'left';\r\n        th.style.padding = '0';\r\n        if (banner) {\r\n            th.append(banner);\r\n        } else {\r\n            bannerRow.style.display = 'none';\r\n        }\r\n        bannerRow.appendChild(th);\r\n\r\n        const tbody = document.createElement('tbody');\r\n        table.append(tbody);\r\n\r\n        const linkRow = document.createElement('tr');\r\n        linkRow.style.minHeight = '24px';\r\n        linkRow.style.height = `${settings.tabHeight}px`;\r\n        linkRow.style.padding = '0';\r\n        tbody.append(linkRow);\r\n\r\n        let td = document.createElement('td');\r\n        td.style.overflow = 'hidden';\r\n        td.style.whiteSpace = 'nowrap';\r\n        td.style.textAlign = 'left';\r\n        td.style.padding = '0';\r\n        td.append(tabBarWrapper);\r\n        linkRow.appendChild(td);\r\n        table.style.borderCollapse =\r\n            linkRow.style.borderCollapse =\r\n            td.style.borderCollapse =\r\n                'collapse';\r\n        table.style.border =\r\n            linkRow.style.border =\r\n            td.style.border =\r\n                '0 none transparent';\r\n\r\n        const pageRow = document.createElement('tr');\r\n        tbody.append(pageRow);\r\n        td = document.createElement('td');\r\n        td.append(pagePanel);\r\n        td.style.textAlign = 'left';\r\n        td.style.padding = '0';\r\n        pageRow.appendChild(td);\r\n\r\n        const linkRow2 = document.createElement('tr');\r\n        tbody.append(linkRow2);\r\n        td = document.createElement('td');\r\n        td.style.textAlign = 'left';\r\n        td.style.padding = '0';\r\n        linkRow2.appendChild(td);\r\n        linkRow2.style.minHeight = '24px';\r\n        linkRow2.style.height = `${settings.tabHeight}px`;\r\n\r\n        const footerRow = document.createElement('tr');\r\n        tbody.append(footerRow);\r\n        td = document.createElement('td');\r\n        footerRow.appendChild(td);\r\n        footerRow.style.maxHeight = '24px';\r\n        td = document.createElement('td');\r\n        td.style.padding = '0';\r\n        if (footer) {\r\n            td.append(footer || document.createTextNode(''));\r\n        } else {\r\n            footerRow.style.display = 'none';\r\n        }\r\n        footerRow.appendChild(td);\r\n        td = document.createElement('td');\r\n        td.style.padding = '0';\r\n        footerRow.appendChild(td);\r\n        if (settings.bottom) {\r\n            linkRow2.firstElementChild.nextSibling.appendChild(tabBarWrapper);\r\n            linkRow.style.display = 'none';\r\n        } else {\r\n            linkRow2.style.display = 'none';\r\n        }\r\n        return doc;\r\n    }\r\n    function createPage(pageId, tabId, linkId, options) {\r\n        const page = document.createElement('div');\r\n        page.setAttribute('id', pageId);\r\n        page.setAttribute('data-tab', tabId);\r\n        page.setAttribute('data-trigger', linkId);\r\n        page.innerHTML = options.text || '';\r\n        page.style.position = 'absolute';\r\n        page.style.padding = '8px 16px';\r\n        page.style.visibility = 'hidden';\r\n        page.style.overflow = 'auto';\r\n        page.style.top =\r\n            page.style.bottom =\r\n            page.style.left =\r\n            page.style.right =\r\n                '0';\r\n        // page.style.top='0'; do not specify top!!!\r\n        page.style.background = options.bg || '';\r\n        return page;\r\n    }\r\n    function createPagePanel() {\r\n        const panel = document.createElement('div');\r\n        panel.setAttribute('id', randomId());\r\n        panel.style.position = 'relative';\r\n        panel.className = 'tab-panel';\r\n        panel.style.width = '100%';\r\n        panel.style.height = '100%';\r\n        panel.style.overflow = 'hidden';\r\n        panel.style.margin = '0';\r\n        panel.style.top = '0';\r\n        panel.style.background = '';\r\n        return panel;\r\n    }\r\n    function loadFromMarkup(el, fn) {\r\n        if (typeof el === 'string') {\r\n            el = document.getElementById(el);\r\n        }\r\n        if (!el || !el.children) {\r\n            throw new Error('Invalid element to load markup');\r\n        }\r\n        const markup = el.children;\r\n        // let doc=document.createDocumentFragment();\r\n        if (!markup || markup.length === 0) return fn();\r\n        const banner = el.querySelector('.tab-banner');\r\n        const footer = el.querySelector('.tab-footer');\r\n        const links = el.querySelector('.tab-links').children;\r\n        const pages = el.querySelector('.tab-pages').children;\r\n        const data = {\r\n            banner: banner.innerHTML,\r\n            footer: footer.innerHTML,\r\n            tabs: [],\r\n        };\r\n        if (banner) banner.remove();\r\n        if (footer) footer.remove();\r\n\r\n        while (links.length > 0) {\r\n            const node = links[0];\r\n            const page = pages[0];\r\n            if (!node) continue;\r\n            data.tabs.push({\r\n                id: node.id !== '' ? node.id : null,\r\n                label: node.textContent,\r\n                title: node.getAttribute('title'),\r\n                closable: node.getAttribute('closable'),\r\n                target: node.getAttribute('data-target'),\r\n                selected: node.getAttribute('selected'),\r\n                html: page ? page.innerHTML : '',\r\n                bg: page ? page.style.background : '#0bc',\r\n                style: node.getAttribute('tab-style'),\r\n            });\r\n            node.remove();\r\n            page.remove();\r\n        }\r\n        return data;\r\n    }\r\n    function addFooter() {\r\n        const footer = document.createElement('span');\r\n        footer.setAttribute('name', 'tab-footer');\r\n        footer.innerHTML = settings.footer;\r\n        footer.className = 'tab-footer';\r\n        footer.style.left = '0';\r\n        footer.style.right = '0';\r\n        footer.style.bottom = '0';\r\n        footer.style.padding = '2px';\r\n        footer.style.display = 'flex';\r\n        footer.style.justifyContent = 'center';\r\n        footer.style.alignItems = 'center';\r\n        // footer.style.background='#030';\r\n        // footer.style.borderTop='1px solid #020';\r\n\r\n        return footer;\r\n    }\r\n    function addBanner() {\r\n        const banner = document.createElement('span');\r\n        banner.setAttribute('name', 'tab-banner');\r\n        banner.innerHTML =\r\n            typeof settings.banner === 'string'\r\n                ? settings.banner\r\n                : settings.banner.innerHTML;\r\n        banner.style.display = 'flex';\r\n        banner.style.padding = '5px';\r\n        banner.style.justifyContent = 'center';\r\n        banner.style.alignItems = 'center';\r\n        banner.className = 'tab-banner';\r\n        banner.style.background = 'green';\r\n\r\n        return banner;\r\n    }\r\n    function mountTab(el, doc, tabPagePanel) {\r\n        // const container = typeof el === 'object' ? el : document.getElementById(el);\r\n        container.appendChild(tabPagePanel);\r\n        const tabbar = doc.querySelector('div');\r\n        let banner;\r\n        let footer;\r\n        if (settings.banner) {\r\n            banner = addBanner(container);\r\n            container.prepend(banner);\r\n        }\r\n        if (settings.bottom) {\r\n            container.lastChild.after(doc);\r\n        } else {\r\n            container.lastChild.before(doc);\r\n        }\r\n        if (settings.footer) {\r\n            footer = addFooter(container);\r\n            container.lastChild.after(footer);\r\n        }\r\n        // container.style.height='100%';\r\n        // container.style.width='100%';\r\n        container.style.top =\r\n            container.style.bottom =\r\n            container.style.left =\r\n            container.style.right =\r\n                '0';\r\n        const bannerBox = banner ? banner.getBoundingClientRect() : null;\r\n        const bannerBottom = banner ? bannerBox.bottom - bannerBox.top : 0;\r\n\r\n        const footerBox = footer ? footer.getBoundingClientRect() : null;\r\n        const footerTop = footer ? footerBox.bottom - footerBox.top : 0;\r\n\r\n        if (settings.bottom) {\r\n            // tab bar is at bottom oftab window\r\n            tabbar.style.bottom = `${footerTop}px`;\r\n        } else {\r\n            tabbar.style.top = `${bannerBottom}px`;\r\n        }\r\n        tabbar.style.border = '0px none transparent';\r\n        tabPagePanel.style.border = '0px none transparent';\r\n    }\r\n    function applySelection(el, options) {\r\n        if (!el || !el.parentElement) {\r\n            return;\r\n        }\r\n        const tablinks = el.parentElement.children;\r\n        // console.log(el.parentElement.parentElement);\r\n        for (let i = 0; i < tablinks.length; i++) {\r\n            tablinks[i].classList.remove('active');\r\n            tablinks[i].style.background = options.bg;\r\n            tablinks[i].style.color = options.color;\r\n            // tablinks[i].lastChild.lastChild.style.visibility = \"hidden\";\r\n        }\r\n\r\n        el.classList.add('active');\r\n        el.style.background = options.activeBg;\r\n        el.style.color = options.activecolor;\r\n        // el.lastChild.lastChild.style.visibility = \"visible\";\r\n    }\r\n    const createTabs = function (el, options) {\r\n        const tabIndex = -1;\r\n        const currentIndex = 0;\r\n        let selectedTab;\r\n        let tabBar;\r\n        let rightBtn;\r\n        let leftBtn;\r\n        let addBtn;\r\n        let pagePanelId;\r\n        let tabBarId;\r\n        let themeOptions;\r\n        let tabSettings;\r\n        let container;\r\n        let tabButtonsCount;\r\n        let dragStartPoint;\r\n        let dragStopPoint;\r\n        const tabs = new Map();\r\n        const buttons = {};\r\n        const links = {};\r\n        const pages = {};\r\n        const hiddenTabs = [];\r\n\r\n        init(el, options);\r\n        /**\r\n         * Initialize tab container\r\n         * @param {HTMLElement} el HTMLElement to attach tabs\r\n         * @param {Object} options Additional settings\r\n         * @returns void\r\n         */\r\n        function init(el, options) {\r\n            container =\r\n                typeof el === 'object' && el instanceof HTMLElement\r\n                    ? el\r\n                    : document.getElementById(el);\r\n            themeOptions = options;\r\n            const data = options.loadFromMarkup ? loadFromMarkup(el) : null;\r\n            if (data) {\r\n                themeOptions = Object.assign(themeOptions, data);\r\n            }\r\n            applySettings(themeOptions);\r\n            leftBtn = createButton('left-nav-button', '&lt;', 'left');\r\n            // leftNavId = leftBtn.id;\r\n            leftBtn.addEventListener('mousedown', () => {\r\n                scroll(false);\r\n            });\r\n\r\n            addBtn = createButton('add-tab-button', '+', 'left');\r\n            // addBtnId = addBtn.id;\r\n            if (themeOptions.add) {\r\n                addBtn.style.visibility = 'visible';\r\n            } else {\r\n                addBtn.style.visibility = 'hidden';\r\n            }\r\n            addBtn.addEventListener('mousedown', () => {\r\n                Event.fire('add-tab-click', randomId());\r\n            });\r\n            tabBar = createBar();\r\n            tabBarId = tabBar.id;\r\n\r\n            const tabBarWraper = createTabBarWraper();\r\n            tabBarWraper.append(tabBar);\r\n            tabBarWraper.appendChild(leftBtn);\r\n            tabBarWraper.appendChild(addBtn);\r\n            /////tabBarWraper.style.background = 'purple';\r\n            rightBtn = createButton('right-nav-button', '&gt;', 'right');\r\n            rightBtn.addEventListener('mousedown', () => {\r\n                scroll(true);\r\n            });\r\n            tabBarWraper.appendChild(rightBtn);\r\n            const pagePanel = createPagePanel();\r\n            pagePanelId = pagePanel.id;\r\n            const layout = createTable(tabBarWraper, pagePanel, themeOptions);\r\n\r\n            container.append(layout);\r\n            setTheme(themeOptions.theme);\r\n            attachDomEventListeners(this);\r\n            if (themeOptions.tabs) {\r\n                dynamicLoad(themeOptions.tabs);\r\n            }\r\n            toggleNavigator(getLeftNavButton(), false);\r\n            toggleNavigator(getRightNavButton(), false);\r\n            ///////rightBtn.style.visibility = 'visible';\r\n        }\r\n\r\n        function getTabAtIndex(index) {\r\n            let tab = null;\r\n            let i = 0;\r\n            for (const value of tabs.values()) {\r\n                if (i === index) {\r\n                    tab = value;\r\n                    break;\r\n                }\r\n                i++;\r\n            }\r\n            return tab;\r\n        }\r\n\r\n        function unhide() {\r\n            // const tabs = tabs.entries()\r\n            const last = getTabAtIndex(tabs.size - 1).linkButton;\r\n            const visibles = getVisibleTabs();\r\n            const firstVisible = visibles[0];\r\n            if (!firstVisible.previousSibling) return;\r\n            // let lastVisible=visibles[visibles.length-1];\r\n            const lastHidden = firstVisible.previousSibling || firstVisible;\r\n            const { width } = lastHidden.getBoundingClientRect();\r\n            const gap =\r\n                tabBar.getBoundingClientRect().right -\r\n                last.getBoundingClientRect().right;\r\n            if (width < gap) {\r\n                scrollLinkIntoView(lastHidden);\r\n            }\r\n        }\r\n\r\n        function attachDomEventListeners() {\r\n            const tabBar = getTabBar();\r\n            window.addEventListener('resize', () => {\r\n                debounce(() => {\r\n                    if (!selectedTab) return false;\r\n                    if (!isLinkVisible(selectedTab.linkButton)) {\r\n                        scrollLinkIntoView(selectedTab.linkButton);\r\n                    } else {\r\n                        unhide();\r\n                        scrollLinkIntoView(selectedTab.linkButton);\r\n                    }\r\n                    showHideNavButton();\r\n                }, 200);\r\n            });\r\n\r\n            tabBar.addEventListener(\r\n                'keyup',\r\n                (event) => {\r\n                    handleKeypress(event);\r\n                },\r\n                true\r\n            );\r\n\r\n            tabBar.addEventListener(\r\n                'drop',\r\n                (event) => {\r\n                    event.preventDefault();\r\n\r\n                    dragStopPoint = event.clientX;\r\n                    drop(event);\r\n                },\r\n                true\r\n            );\r\n\r\n            tabBar.addEventListener(\r\n                'dragover',\r\n                (event) => {\r\n                    event.preventDefault();\r\n                },\r\n                true\r\n            );\r\n\r\n            tabBar.addEventListener('dragstart', (event) => {\r\n                dragStartPoint = event.clientX;\r\n                drag(event);\r\n            });\r\n        }\r\n\r\n        function handleKeypress(e) {\r\n            const code = e.keyCode;\r\n            const link = selectedTab.button;\r\n            // eslint-disable-next-line default-case\r\n            if (!link) return;\r\n            switch (code) {\r\n                case 37:\r\n                    if (link.previousSibling) {\r\n                        select(link.previousSibling);\r\n                    }\r\n                    break; // left key\r\n                case 39:\r\n                    if (link.nextSibling) {\r\n                        select(link.nextSibling);\r\n                    }\r\n                    break; // right key\r\n                case 38:\r\n                    break; // up key\r\n                case 40:\r\n                    link.blur();\r\n                    break; // down key\r\n                case 13:\r\n                    break; // enter key\r\n                default:\r\n                    break;\r\n            }\r\n        }\r\n\r\n        function showHideNavButton() {\r\n            // console.log(settings);\r\n            if (themeOptions.infiniteScroll) {\r\n                // return;\r\n            }\r\n            const visibleButtons = getVisibleTabs();\r\n            const firstVisibleButton = visibleButtons[0];\r\n            const lastVisibleButton = visibleButtons[visibleButtons.length - 1];\r\n\r\n            if (!firstVisibleButton) return;\r\n            const rBtn = getRightNavButton();\r\n            const lBtn = getLeftNavButton();\r\n            if (firstVisibleButton.previousSibling) {\r\n                toggleNavButton(rBtn, true);\r\n            } else {\r\n                toggleNavButton(lBtn, false);\r\n            }\r\n            if (lastVisibleButton.nextSibling) {\r\n                toggleNavButton(rBtn, true);\r\n            } else {\r\n                toggleNavButton(rBtn, false);\r\n            }\r\n        }\r\n\r\n        function toggleNavButton(el, show) {\r\n            if (show) {\r\n                el.style.visibility = 'visible';\r\n            } else {\r\n                el.style.visibility = 'hidden';\r\n            }\r\n        }\r\n\r\n        function toggleAddButton(show) {\r\n            if (show) {\r\n                getAddButton().style.visibility = 'visible';\r\n            } else {\r\n                getAddButton().style.visibility = 'hidden';\r\n            }\r\n        }\r\n\r\n        function showHideNavigator() {\r\n            const visibleButtons = getVisibleTabs();\r\n            const firstVisibleButton = visibleButtons[0];\r\n            const lastVisibleButton = visibleButtons[visibleButtons.length - 1];\r\n\r\n            if (!firstVisibleButton) return;\r\n            if (firstVisibleButton.previousSibling) {\r\n                toggleNavigator(getLeftNavButton(), true);\r\n            } else {\r\n                toggleNavigator(getLeftNavButton(), false);\r\n            }\r\n            if (lastVisibleButton.nextSibling) {\r\n                toggleNavigator(getRightNavButton(), true);\r\n            } else {\r\n                toggleNavigator(getRightNavButton(), false);\r\n            }\r\n        }\r\n\r\n        function applyTheme(options) {\r\n            const table = getContainer().querySelector('table');\r\n            table.style.background = options.bg;\r\n            table.style.color = options.color;\r\n            leftBtn.style.color =\r\n                rightBtn.style.color =\r\n                addBtn.style.color =\r\n                    options.color;\r\n        }\r\n\r\n        // Public API\r\n        /** *\r\n         * @param theme String\r\n         * @returns null\r\n         */\r\n        function setTheme(theme) {\r\n            let color = '#ddd';\r\n            let bg = '#222';\r\n            let activecolor = '#ddd';\r\n            let activeBg = '#003355';\r\n            switch (theme) {\r\n                case 'dark':\r\n                    bg = '#002255';\r\n                    activeBg = '#003355';\r\n                    color = '#fff';\r\n                    break;\r\n                case 'black':\r\n                    bg = '#111';\r\n                    activeBg = '#333';\r\n                    color = '#fff';\r\n                    break;\r\n                case 'blue':\r\n                    bg = 'rgba(8, 68, 117, 1)';\r\n                    activeBg = 'rgba(10, 100, 186, 1)';\r\n                    break;\r\n                case 'green':\r\n                    bg = 'rgba(0, 149, 120, 1)';\r\n                    activeBg = '#054';\r\n                    break;\r\n                case 'red':\r\n                    bg = 'rgb(120, 0, 30)';\r\n                    activeBg = 'rgb(123, 0, 50)';\r\n                    break;\r\n                case 'white':\r\n                    bg = '#bcd';\r\n                    color = '#000';\r\n                    activecolor = '#eee';\r\n                    break;\r\n                default:\r\n                    bg = 'rgba(10, 100, 186, 1)';\r\n                    activeBg = 'rgba(10, 100, 206, 1)';\r\n                    color = '#fff';\r\n                    break;\r\n            }\r\n            tabSettings = {\r\n                bg,\r\n                color,\r\n                activecolor,\r\n                activeBg,\r\n            };\r\n            applyTheme(tabSettings);\r\n        }\r\n\r\n        function getTheme() {\r\n            return themeOptions.theme;\r\n        }\r\n\r\n        function toggleNavigator(el, show) {\r\n            if (show) {\r\n                el.style.visibility = 'visible';\r\n            } else {\r\n                el.style.visibility = 'hidden';\r\n            }\r\n        }\r\n\r\n        function getSelectedTab() {\r\n            return selectedTab;\r\n        }\r\n\r\n        function getTab(tabId) {\r\n            return tabs.get(tabId);\r\n        }\r\n\r\n        function setContent(id, content) {\r\n            const page = tabs.get(id).pageId;\r\n            document.getElementById(page).innerHTML = content;\r\n        }\r\n\r\n        function setTitle(id, title) {\r\n            const link = tabs.get(id).linkId;\r\n            document.getElementById(link).firstElementChild.innerHTML = title;\r\n        }\r\n        function applySettings(options) {\r\n            const mySettings = {\r\n                limit: undefined,\r\n                banner: undefined,\r\n                footer: undefined,\r\n                closeOnClick: undefined,\r\n                infiniteScroll: false,\r\n                fancy: false,\r\n                add: false,\r\n                // width   : '100%',\r\n                // height  : '100%',\r\n                theme: '',\r\n                tabHeight: 32,\r\n                leftTooltip: '&lt;',\r\n                rightTooltip: '&gt;',\r\n                addTooltip: '+',\r\n                data: null,\r\n            };\r\n\r\n            themeOptions = Object.assign(mySettings, options);\r\n        }\r\n        function dynamicLoad(tabs) {\r\n            if (!tabs) return;\r\n            let selected = null;\r\n            tabs.forEach((d) => {\r\n                if (d.selected) {\r\n                    selected = d.id;\r\n                }\r\n                const tab = add(d);\r\n                const page = getPage(tab.id);\r\n                // page.parentElement.style.top='80px';\r\n                // page.background='#054';\r\n                page.innerHTML =\r\n                    typeof d.html === 'function' ? d.html() : d.html;\r\n                page.setAttribute('contenteditable', true);\r\n                page.style.overflow = 'auto';\r\n                page.style.zIndex = '100';\r\n            });\r\n            if (selected) {\r\n                select(selected);\r\n            }\r\n        }\r\n\r\n        function getPage(tabId) {\r\n            const tab = tabs.get(tabId);\r\n            return document.getElementById(tab.pageId);\r\n        }\r\n\r\n        function getLinkButton(linkId) {\r\n            return document.getElementById(linkId);\r\n        }\r\n\r\n        function getCloswButton(id) {\r\n            const linkButton = getLinkButton(id);\r\n            return linkButton ? linkButton.lastElementChild() : null;\r\n        }\r\n\r\n        function getTabPagePanel() {\r\n            return document.getElementById(pagePanelId);\r\n        }\r\n\r\n        function getRightNavButton() {\r\n            return rightBtn;\r\n        }\r\n\r\n        function getLeftNavButton() {\r\n            return leftBtn;\r\n        }\r\n\r\n        function getAddButton() {\r\n            return addBtn;\r\n        }\r\n\r\n        function getFooter() {\r\n            return document.getElementById(footerId);\r\n        }\r\n\r\n        function getBanner() {\r\n            return document.getElementById(bannerId);\r\n        }\r\n\r\n        function getTabBar() {\r\n            return document.getElementById(tabBarId);\r\n        }\r\n\r\n        function getContainer() {\r\n            return container; // document.getElementById(containerId);\r\n        }\r\n        function hideExtraTabs() {\r\n            const links = Object.values(links);\r\n            const numTotal = links.length;\r\n            const numVisible = Math.min(numTotal, themeOptions.limit);\r\n            for (let i = 0; i < links.length; i++) {\r\n                links[i].style.display = 'none'; // hide xo tabs.\r\n            }\r\n            for (let j = 0; j < numVisible; j++) {\r\n                links[j].style.display = 'inline'; // Show visible tabs.\r\n            }\r\n        }\r\n\r\n        function getLinkTarget(el) {\r\n            try {\r\n                while (el.name !== 'tab-link') {\r\n                    el = el.parentElement;\r\n                }\r\n                return el;\r\n            } catch (e) {\r\n                // const length = tabs.size - 1\r\n                return getTabAtIndex(tabs.size - 1).linkButton;\r\n                // Object.values(tabs)[length].linkButton\r\n            }\r\n        }\r\n\r\n        function allowDrop(ev) {\r\n            ev.preventDefault();\r\n        }\r\n\r\n        function drag(ev) {\r\n            ev.dataTransfer.setData('text', ev.target.id);\r\n        }\r\n\r\n        function drop(ev) {\r\n            ev.preventDefault();\r\n            const data = ev.dataTransfer.getData('text');\r\n            // do not drop on label wrappers or close button\r\n            const target = getLinkTarget(ev.target);\r\n            const dataEl = document.getElementById(data);\r\n\r\n            if (dragStartPoint > dragStopPoint) {\r\n                target.before(dataEl);\r\n            } else {\r\n                target.after(dataEl);\r\n            }\r\n            // target.parentNode.insertBefore(dataEl,dragStartPoint>dragStopPoint?target:target.nextSibling);\r\n        }\r\n        function getSettings(options) {\r\n            const { length } = Object.keys(buttons);\r\n            const tabId = options.tabId || randomId();\r\n            const buttonId = `tab-btn-${tabId}`;\r\n            const target = `tab-page-${tabId}`;\r\n            const tabLabel = options.label || `Tab${Number(length + 1)}`;\r\n            const title = options.title || tabLabel;\r\n\r\n            const settings = {\r\n                tabId,\r\n                buttonId,\r\n                target,\r\n                label: tabLabel,\r\n                title,\r\n                html: options.html || '',\r\n                closable: options.close || true,\r\n                data: options.data || null,\r\n                icon: options.icon || '',\r\n                bg: options.bg || 'inherit',\r\n                color: options.color || 'inherit',\r\n                fancy: themeOptions.fancy,\r\n            };\r\n            return Object.assign(settings, options);\r\n        }\r\n        function handleTabClick(e) {\r\n            e.stopImmediatePropagation();\r\n            select(this);\r\n        }\r\n        function add(options = {}) {\r\n            const tabSettings = getSettings(options); // Object.assign(getSettings(options), options);\r\n            const page = createPage(\r\n                tabSettings.target,\r\n                tabSettings.tabId,\r\n                tabSettings.buttonId,\r\n                tabSettings\r\n            );\r\n\r\n            getTabPagePanel().appendChild(page);\r\n            const tabBtn = createTabButton(\r\n                tabSettings.buttonId,\r\n                tabSettings.tabId,\r\n                tabSettings\r\n            );\r\n            const labelContainer = createLabelContainer(tabSettings);\r\n            const img = createImage(tabSettings);\r\n            const label = createLabel(tabSettings.label, tabSettings.title);\r\n            const closeBtn = createCloseButton(tabSettings.tabId);\r\n\r\n            if (!tabSettings.closable) {\r\n                closeBtn.style.display = 'none';\r\n                labelContainer.style.paddingRight = '7px';\r\n            }\r\n            labelContainer.append(img);\r\n            labelContainer.append(label);\r\n            labelContainer.append(closeBtn);\r\n            tabBtn.append(labelContainer);\r\n            tabBtn.addEventListener('mouseup', handleTabClick);\r\n            tabBtn.addEventListener('mouseenter', () => {\r\n                if (selectedTab.linkButton.id === tabBtn.id) return;\r\n                closeBtn.style.visibility = 'visible';\r\n            });\r\n            tabBtn.addEventListener('mouseleave', () => {\r\n                if (selectedTab.linkButton.id === tabBtn.id) return;\r\n                closeBtn.style.visibility = 'hidden';\r\n            });\r\n            closeBtn.addEventListener('mousedown', (e) => {\r\n                close(tabSettings.tabId); // linkButton.getAttribute(\"data-tab\"));\r\n                e.stopImmediatePropagation();\r\n            });\r\n            buttons[tabBtn.id] = tabBtn;\r\n            // If there was a selected button already, insert after it\r\n            // otherwise append at the end of tab list\r\n            if ((selectedTab = getSelectedTab())) {\r\n                // tab.selected=false;\r\n                selectedTab.linkButton.after(tabBtn);\r\n                // getLinkButton(tab.linkId).after(linkButton);\r\n            } else {\r\n                getTabBar().appendChild(tabBtn);\r\n            }\r\n            tabs.set(tabSettings.tabId, {\r\n                id: tabSettings.tabId,\r\n                label: tabSettings.label,\r\n                text: tabSettings.text,\r\n                title: tabSettings.title,\r\n                linkId: tabSettings.buttonId,\r\n                pageId: tabSettings.target,\r\n                data: tabSettings.data,\r\n                selected: tabSettings.buttonId,\r\n                linkButton: tabBtn,\r\n                page,\r\n            });\r\n            selectedTab = tabs.get(tabSettings.tabId);\r\n            showHideNavButton();\r\n            select(tabBtn);\r\n            if (tabSettings.selected) {\r\n                return selectedTab;\r\n            }\r\n            return selectedTab;\r\n        }\r\n\r\n        function select(ref, before) {\r\n            let linkButton = null;\r\n            if (!ref) {\r\n                throw new Error('Invalid tab address:');\r\n            } else if (typeof ref === 'string') {\r\n                const id = ref;\r\n                linkButton = getLinkButton(id);\r\n            } else if (ref instanceof HTMLElement) {\r\n                const el = ref;\r\n                linkButton = el;\r\n            } else {\r\n                throw new Error('Invalid Button or ID');\r\n            }\r\n\r\n            if (typeof before === 'function') {\r\n                const result = before();\r\n                if (result === false) return false;\r\n            }\r\n\r\n            for (const tab of tabs.values()) {\r\n                if (tab.linkButton.id === linkButton.id) {\r\n                    tab.selected = true;\r\n                    selectedTab = tab;\r\n                    document.getElementById(tab.pageId).style.visibility =\r\n                        'visible';\r\n                    tab.linkButton.lastChild.lastChild.style.visibility =\r\n                        'visible';\r\n                    // console.log(tab.linkButton.lastChild.lastChild);\r\n                } else {\r\n                    tab.selected = false;\r\n                    document.getElementById(tab.pageId).style.visibility =\r\n                        'hidden';\r\n                    tab.linkButton.lastChild.lastChild.style.visibility =\r\n                        'hidden';\r\n                }\r\n            }\r\n            applySelection(linkButton, tabSettings);\r\n            if (!isLinkVisible(linkButton)) {\r\n                scrollLinkIntoView(linkButton);\r\n            }\r\n            Event.fire('select', selectedTab);\r\n\r\n            return selectedTab;\r\n        }\r\n\r\n        function close(tabId) {\r\n            if (!tabId) {\r\n                throw new Error('Invalid tab address:');\r\n            }\r\n            const tab = tabs.get(tabId);\r\n            // console.log(el, tab, tabs);\r\n            if (!tab) return;\r\n            const link = tab.linkButton; // getLinkButton(tab.linkId);\r\n            const next = link.nextSibling;\r\n            const prev = link.previousSibling;\r\n            Event.fire('before_close', tab);\r\n            link.remove();\r\n            document.getElementById(tab.pageId).remove();\r\n            selectedTab = null; // delete selectedTab;\r\n            tabs.delete(tabId);\r\n\r\n            Event.fire('close', tab);\r\n            if (next && next.tagName === 'BUTTON') {\r\n                select(next);\r\n            } else if (prev && prev.tagName === 'BUTTON') {\r\n                select(prev);\r\n            }\r\n            showHideNavigator();\r\n            scroll(true);\r\n            return tabId;\r\n        }\r\n\r\n        function isLinkVisible(link) {\r\n            const box = link.getBoundingClientRect();\r\n            const tabbar = getTabBar();\r\n            if (!tabbar) return false;\r\n            const box1 = tabbar.getBoundingClientRect();\r\n            return box.left >= box1.left && box.right <= box1.right;\r\n        }\r\n\r\n        function getVisibleTabs() {\r\n            const tabbar = getTabBar();\r\n            if (!tabbar) return false;\r\n            const links = Array.prototype.slice.call(\r\n                tabbar.querySelectorAll('button')\r\n            );\r\n            return links.filter((link) => isLinkVisible(link));\r\n        }\r\n\r\n        function getHiddenTabs() {\r\n            const links = Array.prototype.slice.call(\r\n                getTabBar().querySelectorAll('button')\r\n            );\r\n            return links.filter((link) => !isLinkVisible(link));\r\n        }\r\n\r\n        function scroll(right) {\r\n            if (themeOptions.infiniteScroll) {\r\n                infiniteScroll(right);\r\n            } else {\r\n                finiteScroll(right);\r\n                showHideNavigator();\r\n            }\r\n        }\r\n\r\n        function scrollLinkIntoView(el) {\r\n            if (isLinkVisible(el)) return;\r\n            const max = tabs.size;\r\n            let count = 0;\r\n            while (!isLinkVisible(el)) {\r\n                getRightNavButton().click();\r\n                count++;\r\n                if (count > max) break;\r\n            }\r\n            count = 0;\r\n            while (!isLinkVisible(el)) {\r\n                getLeftNavButton().click();\r\n                count++;\r\n                if (isLinkVisible(el)) return;\r\n                if (count > max) break;\r\n            }\r\n        }\r\n\r\n        function finiteScroll(right) {\r\n            tabButtonsCount = tabButtonsCount || 1;\r\n            tabButtonsCount++;\r\n            const visibleButtons = getVisibleTabs();\r\n            const firstVisibleButton = visibleButtons[0];\r\n            const lastVisibleButton = visibleButtons[visibleButtons.length - 1];\r\n            if (right && lastVisibleButton && lastVisibleButton.nextSibling) {\r\n                firstVisibleButton.style.display = 'none';\r\n            } else if (\r\n                !right &&\r\n                firstVisibleButton &&\r\n                firstVisibleButton.previousSibling\r\n            ) {\r\n                firstVisibleButton.previousSibling.style.display = '';\r\n            } else {\r\n                const tabbar = getTabBar();\r\n                if (!tabbar) return;\r\n                const bts = tabbar.querySelectorAll('button');\r\n                if (bts.length > 0) {\r\n                    bts[bts.length - 1].style.display = '';\r\n                }\r\n            }\r\n        }\r\n\r\n        function infiniteScroll(right) {\r\n            const tabbar = getTabBar();\r\n            if (!tabbar) return;\r\n            const links = tabbar.querySelectorAll('button');\r\n            if (links.length > 1) {\r\n                if (right) {\r\n                    links[links.length - 1].after(links[0]);\r\n                } else {\r\n                    links[0].before(links[links.length - 1]);\r\n                }\r\n            }\r\n        }\r\n\r\n        function destroy() {\r\n            // removeListeners();\r\n            console.log('Tabs Destroyed');\r\n        }\r\n        return {\r\n            add,\r\n            close,\r\n            getTab,\r\n            getTabAtIndex,\r\n            getSelectedTab,\r\n            getTabs: () => tabs,\r\n            setTheme,\r\n            getTheme,\r\n            destroy,\r\n        };\r\n    };\r\n    return {\r\n        createTabs,\r\n        randomId,\r\n        Emitter,\r\n        Event,\r\n        debounce,\r\n    };\r\n})();\r\n\r\nexport default TabView;\r\n"],"names":["randomId","Math","random","toString","slice","_listeners","Event","addListener","type","listener","this","push","attach","on","fire","event","data","target","Error","Array","listeners","i","len","length","call","trigger","removeListener","splice","off","createButton","name","text","float","btn","document","createElement","id","setAttribute","style","position","height","border","background","color","marginRight","marginLeft","padding","paddingLeft","paddingRight","cursor","fontWeight","fontSize","outline","borderRadius","innerHTML","addFooter","footer","settings","className","left","right","bottom","display","justifyContent","alignItems","addBanner","banner","createTabs","el","options","selectedTab","tabBar","rightBtn","leftBtn","addBtn","pagePanelId","tabBarId","themeOptions","tabSettings","container","dragStartPoint","dragStopPoint","tabs","Map","buttons","getTabAtIndex","index","tab","values","toggleNavButton","show","visibility","showHideNavigator","visibleButtons","getVisibleTabs","firstVisibleButton","lastVisibleButton","toggleNavigator","getLeftNavButton","previousSibling","getRightNavButton","nextSibling","setTheme","theme","bg","activecolor","activeBg","table","querySelector","applyTheme","getSelectedTab","getPage","tabId","get","getElementById","pageId","getTabBar","handleTabClick","e","stopImmediatePropagation","select","add","Object","keys","buttonId","tabLabel","label","Number","assign","title","html","closable","close","icon","fancy","getSettings","page","linkId","overflow","top","createPage","appendChild","tabBtn","width","margin","boxShadow","transition","createTabButton","labelContainer","alignContent","createLabelContainer","img","createImage","verticalAlign","maxWidth","whiteSpace","append","createTextNode","createLabel","closeBtn","addEventListener","createCloseButton","linkButton","after","set","selected","rBtn","lBtn","showHideNavButton","ref","before","HTMLElement","lastChild","parentElement","tablinks","children","classList","remove","applySelection","isLinkVisible","max","size","count","click","scrollLinkIntoView","link","next","prev","tagName","scroll","box","getBoundingClientRect","tabbar","box1","prototype","querySelectorAll","filter","infiniteScroll","links","bts","finiteScroll","loadFromMarkup","fn","markup","pages","node","textContent","getAttribute","limit","undefined","closeOnClick","tabHeight","leftTooltip","rightTooltip","addTooltip","applySettings","createBar","tabbarContainer","tabBarWraper","panel","pagePanel","layout","tabBarWrapper","doc","createDocumentFragment","thead","bannerRow","minHeight","maxHeight","th","textAlign","tbody","linkRow","td","borderCollapse","pageRow","linkRow2","footerRow","firstElementChild","createTable","window","button","keyCode","blur","handleKeypress","preventDefault","clientX","ev","dataTransfer","getData","getLinkTarget","dataEl","drop","setData","attachDomEventListeners","forEach","d","zIndex","dynamicLoad","init","getTab","getTabs","getTheme","destroy","console","log","Emitter","context","cancelable","bubbles","cntx","myEvent","CustomEvent","detail","dispatchEvent","removeEventListener","debounce","func","wait","immediate","timeout","args","arguments","later","apply","callNow","clearTimeout","setTimeout"],"mappings":"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"}