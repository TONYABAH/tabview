{"version":3,"file":"tabview.umd.js","sources":["../index.js"],"sourcesContent":["'use strict';\n/* jshint esversion: 8 */\nconst TabView = (function () {\n    function randomId() {\n        return Math.random().toString(36).slice(2);\n    }\n    // Returns a function, that, as long as it continues to be invoked, will not\n    // be triggered. The function will be called after it stops being called for\n    // N milliseconds. If `immediate` is passed, trigger the function on the\n    // leading edge, instead of the trailing.\n    function debounce(func, wait, immediate) {\n        let timeout;\n        return function () {\n            const context = this;\n            const args = arguments;\n            const later = function () {\n                timeout = null;\n                if (!immediate) func.apply(context, args);\n            };\n            const callNow = immediate && !timeout;\n            clearTimeout(timeout);\n            timeout = setTimeout(later, wait);\n            if (callNow) func.apply(context, args);\n        };\n    }\n\n    const Emitter = (function () {\n        return {\n            fire(event, data, context, cancelable, bubbles) {\n                const cntx = context || document;\n                const myEvent = new CustomEvent(event, {\n                    detail: data,\n                    cancelable: cancelable || false,\n                    bubbles: bubbles || false,\n                });\n                cntx.dispatchEvent(myEvent);\n            },\n            on(event, listener, context) {\n                const cntx = context || document;\n                cntx.addEventListener(event, listener);\n            },\n            off(event, listener, context) {\n                const cntx = context || document;\n                cntx.removeEventListener(event, listener);\n            },\n        };\n    })();\n\n    const Event = (function () {\n        const _listeners = {};\n        return {\n            addListener(type, listener) {\n                if (typeof _listeners[type] === 'undefined') {\n                    this._listeners[type] = [];\n                }\n                this._listeners[type].push(listener);\n            },\n            attach(type, listener) {\n                this.addListener(type, listener);\n            },\n            on(type, listener) {\n                this.addListener(type, listener);\n            },\n\n            fire(event, data, target) {\n                if (typeof event === 'string') {\n                    event = {\n                        type: event,\n                        data,\n                        target,\n                    };\n                }\n                if (!event.target) {\n                    event.target = this;\n                }\n                if (!event.type) {\n                    // falsy\n                    throw new Error('Type error');\n                }\n                if (_listeners[event.type] instanceof Array) {\n                    const listeners = _listeners[event.type];\n                    for (let i = 0, len = listeners.length; i < len; i++) {\n                        listeners[i].call(this, event);\n                    }\n                }\n            },\n            trigger(type, listener) {\n                this.fire(type, listener);\n            },\n\n            removeListener(type, listener) {\n                if (_listeners[type] instanceof Array) {\n                    const listeners = _listeners[type];\n                    for (let i = 0, len = listeners.length; i < len; i++) {\n                        if (listeners[i] === listener) {\n                            listeners.splice(i, 1);\n                            break;\n                        }\n                    }\n                }\n            },\n            off(type, listener) {\n                this.removeListener(type, listener);\n            },\n        };\n    })();\n\n    function createTabButton(\n        linkId,\n        tabId,\n        { target, fancy, title, bg, data }\n    ) {\n        const tabBtn = document.createElement('button');\n        tabBtn.className = 'tab-link';\n        tabBtn.setAttribute('href', '#!');\n        tabBtn.setAttribute('id', linkId);\n        tabBtn.setAttribute('title', title);\n        tabBtn.setAttribute('name', 'tab-link');\n        tabBtn.setAttribute('draggable', 'true');\n        tabBtn.setAttribute('data-tab', tabId);\n        tabBtn.setAttribute('data-target', target);\n        tabBtn.style.position = 'relative';\n        tabBtn.style.outline = 'none';\n        tabBtn.style.height = '100%';\n        tabBtn.style.width = 'auto';\n        tabBtn.style.border = '0 none transparent';\n        tabBtn.style.fontSize = '12px';\n        tabBtn.style.fontWeight = '500';\n        tabBtn.style.margin = '0';\n        tabBtn.style.padding = '0';\n        tabBtn.style.boxShadow = 'none';\n        tabBtn.style.background = bg || 'inherit';\n        tabBtn.style.color = 'inherit';\n        tabBtn.style.cursor = 'pointer';\n        tabBtn.style.display = 'block';\n        tabBtn.style.transition = 'background .4s';\n        if (style) {\n            tabBtn.style.borderRadius = '8px 1px 0px 0px';\n        } else {\n            tabBtn.style.borderRadius = '1px 1px 0px 0px';\n        }\n        tabBtn.addEventListener('click', () => {\n            select(tabId);\n        });\n        return tabBtn;\n    }\n    function createCloseButton(tabId) {\n        const closeBtn = document.createElement('a');\n        closeBtn.innerHTML = '&times';\n        closeBtn.setAttribute('name', 'close-button');\n        closeBtn.setAttribute('title', 'close');\n        closeBtn.style.borderRadius = '50%';\n        closeBtn.style.visibility = 'hidden';\n        closeBtn.style.height = closeBtn.style.width = '20px';\n        closeBtn.style.float = 'right';\n        closeBtn.style.marginRight = '2px';\n        closeBtn.style.marginLeft = '5px';\n        closeBtn.style.display = 'flex';\n        closeBtn.style.padding = '2px 0px 0px 4px';\n        closeBtn.style.alignContent = 'center';\n        closeBtn.style.alignItems = 'center';\n        closeBtn.style.fontSize = '18px';\n        closeBtn.style.color = '#efefef';\n        closeBtn.style.fontWeight = '700';\n        closeBtn.style.background = 'transparent';\n        closeBtn.addEventListener('mouseenter', () => {\n            closeBtn.style.background = '#555';\n        });\n        closeBtn.addEventListener('mouseleave', () => {\n            closeBtn.style.background = '';\n        });\n        closeBtn.addEventListener('click', (e) => {\n            close(tabId); // linkButton.getAttribute(\"data-tab\"));\n            e.stopImmediatePropagation();\n        });\n        return closeBtn;\n    }\n    function createLabel(text, title) {\n        const label = document.createElement('label');\n        label.setAttribute('name', 'tab-link-label');\n        label.className = 'tab-link-label';\n        label.style.margin = '0';\n        label.style.paddingRight = '2px';\n        label.style.paddingLeft = '2px';\n        label.style.verticalAlign = 'middle';\n        label.style.padding = '0';\n        label.style.color = 'inherit';\n        label.style.maxWidth = '80px';\n        label.style.overflow = 'hidden';\n        label.style.whiteSpace = 'nowrap';\n        label.style.background = '';\n        label.style.cursor = 'pointer';\n        label.style.fontSize = 'inherit';\n        label.style.fontWeight = 'inherit';\n        label.append(document.createTextNode(text));\n        label.setAttribute('title', title || text);\n        return label;\n    }\n    function createTabBarWraper() {\n        const tabbarContainer = document.createElement('div');\n        tabbarContainer.style.position = 'relative';\n        tabbarContainer.style.height = '100%';\n        tabbarContainer.style.height = '100%';\n        tabbarContainer.style.width = '100%';\n        tabbarContainer.style.border = 'none';\n        tabbarContainer.style.padding = 'none';\n        tabbarContainer.className = 'tabbar-wrapper';\n        return tabbarContainer;\n    }\n    function createBar() {\n        const tabBar = document.createElement('div');\n        tabBar.setAttribute('id', randomId());\n        tabBar.style.position = 'absolute';\n        tabBar.style.top = '0';\n        tabBar.style.bottom = '0';\n        tabBar.style.left = '60px';\n        tabBar.style.right = '30px';\n        tabBar.style.overflow = 'hidden';\n        tabBar.style.padding = '0px';\n        tabBar.style.margin = '0px';\n        tabBar.style.paddingRight = '7px';\n        tabBar.style.background = 'inherit';\n        tabBar.style.display = 'flex';\n        tabBar.className = 'tab-bar';\n        return tabBar;\n    }\n    function createButton(name, text, float) {\n        const btn = document.createElement('button');\n        btn.id = randomId();\n        btn.setAttribute('name', name);\n        btn.style.height = '100%';\n        btn.style.border = '0 none transparent';\n        btn.style.background = 'transparent';\n        btn.style.color = 'white';\n        btn.marginRight = btn.marginLeft = '2px';\n        btn.style.padding = '2px';\n        btn.style.paddingLeft = btn.style.paddingRight = '7px';\n        btn.style.cursor = 'pointer';\n        btn.style.fontWeight = '900';\n        btn.style.fontSize = '14px';\n        btn.style.float = float || 'none';\n        btn.style.outline = 'none';\n        btn.innerHTML = text;\n        btn.style.borderRadius = '4px 4px';\n        return btn;\n    }\n    function createImage(options) {\n        const img = document.createElement('span');\n        img.style.marginRight = '7px';\n        img.style.color = '#b00';\n        img.style.fontWeight = 'bold';\n        img.innerHTML = options.icon || 'kb';\n        img.style.float = 'left';\n        return img;\n    }\n    function createLabelContainer(options) {\n        const labelContainer = document.createElement('label');\n        labelContainer.setAttribute('name', 'tab-link-label-wraper');\n        labelContainer.style.display = 'flex';\n        labelContainer.style.alignContent = 'center';\n        labelContainer.style.alignItems = 'center';\n        labelContainer.style.padding = '2px';\n        labelContainer.style.height = '100%';\n        labelContainer.style.width = '100%';\n        labelContainer.style.color = 'inherit';\n        labelContainer.style.background = 'transparent';\n        labelContainer.style.cursor = 'pointer';\n\n        return labelContainer;\n    }\n    function createTable(tabBarWrapper, pagePanel, settings = {}) {\n        let banner;\n        let footer;\n        if (settings.banner) {\n            banner = addBanner();\n        }\n        if (settings.footer) {\n            footer = addFooter();\n        }\n        const doc = document.createDocumentFragment();\n        const table = document.createElement('table');\n        table.style.width = table.style.height = '100%';\n        doc.append(table);\n\n        const thead = document.createElement('thead');\n        table.append(thead);\n\n        const bannerRow = document.createElement('tr');\n        bannerRow.style.minHeight = '0px';\n        bannerRow.style.maxHeight = '80px';\n        thead.append(bannerRow);\n        const th = document.createElement('th');\n        // th.setAttribute('colspan',3);\n        th.style.textAlign = 'left';\n        th.style.padding = '0';\n        if (banner) {\n            th.append(banner);\n        } else {\n            bannerRow.style.display = 'none';\n        }\n        bannerRow.appendChild(th);\n\n        const tbody = document.createElement('tbody');\n        table.append(tbody);\n\n        const linkRow = document.createElement('tr');\n        linkRow.style.minHeight = '24px';\n        linkRow.style.height = `${settings.tabHeight}px`;\n        linkRow.style.padding = '0';\n        tbody.append(linkRow);\n\n        let td = document.createElement('td');\n        td.style.overflow = 'hidden';\n        td.style.whiteSpace = 'nowrap';\n        td.style.textAlign = 'left';\n        td.style.padding = '0';\n        td.append(tabBarWrapper);\n        linkRow.appendChild(td);\n        table.style.borderCollapse =\n            linkRow.style.borderCollapse =\n            td.style.borderCollapse =\n                'collapse';\n        table.style.border =\n            linkRow.style.border =\n            td.style.border =\n                '0 none transparent';\n\n        const pageRow = document.createElement('tr');\n        tbody.append(pageRow);\n        td = document.createElement('td');\n        td.append(pagePanel);\n        td.style.textAlign = 'left';\n        td.style.padding = '0';\n        pageRow.appendChild(td);\n\n        const linkRow2 = document.createElement('tr');\n        tbody.append(linkRow2);\n        td = document.createElement('td');\n        td.style.textAlign = 'left';\n        td.style.padding = '0';\n        linkRow2.appendChild(td);\n        linkRow2.style.minHeight = '24px';\n        linkRow2.style.height = `${settings.tabHeight}px`;\n\n        const footerRow = document.createElement('tr');\n        tbody.append(footerRow);\n        td = document.createElement('td');\n        footerRow.appendChild(td);\n        footerRow.style.maxHeight = '24px';\n        td = document.createElement('td');\n        td.style.padding = '0';\n        if (footer) {\n            td.append(footer || document.createTextNode(''));\n        } else {\n            footerRow.style.display = 'none';\n        }\n        footerRow.appendChild(td);\n        td = document.createElement('td');\n        td.style.padding = '0';\n        footerRow.appendChild(td);\n        if (settings.bottom) {\n            linkRow2.firstElementChild.nextSibling.appendChild(tabBarWrapper);\n            linkRow.style.display = 'none';\n        } else {\n            linkRow2.style.display = 'none';\n        }\n        return doc;\n    }\n    function createPage(pageId, tabId, linkId, options) {\n        const page = document.createElement('div');\n        page.setAttribute('id', pageId);\n        page.setAttribute('data-tab', tabId);\n        page.setAttribute('data-trigger', linkId);\n        page.innerHTML = options.text || '';\n        page.style.position = 'absolute';\n        page.style.padding = '8px 16px';\n        page.style.visibility = 'hidden';\n        page.style.overflow = 'auto';\n        page.style.top =\n            page.style.bottom =\n            page.style.left =\n            page.style.right =\n                '0';\n        // page.style.top='0'; do not specify top!!!\n        page.style.background = options.bg || '';\n        return page;\n    }\n    function createPagePanel() {\n        const panel = document.createElement('div');\n        panel.setAttribute('id', randomId());\n        panel.style.position = 'relative';\n        panel.className = 'tab-panel';\n        panel.style.width = '100%';\n        panel.style.height = '100%';\n        panel.style.overflow = 'hidden';\n        panel.style.margin = '0';\n        panel.style.top = '0';\n        panel.style.background = '';\n        return panel;\n    }\n    function loadFromMarkup(el, fn) {\n        if (typeof el === 'string') {\n            el = document.getElementById(el);\n        }\n        if (!el || !el.children) {\n            throw new Error('Invalid element to load markup');\n        }\n        const markup = el.children;\n        // let doc=document.createDocumentFragment();\n        if (!markup || markup.length === 0) return fn();\n        const banner = el.querySelector('.tab-banner');\n        const footer = el.querySelector('.tab-footer');\n        const links = el.querySelector('.tab-links').children;\n        const pages = el.querySelector('.tab-pages').children;\n        const data = {\n            banner: banner.innerHTML,\n            footer: footer.innerHTML,\n            tabs: [],\n        };\n        if (banner) banner.remove();\n        if (footer) footer.remove();\n\n        while (links.length > 0) {\n            const node = links[0];\n            const page = pages[0];\n            if (!node) continue;\n            data.tabs.push({\n                id: node.id !== '' ? node.id : null,\n                label: node.textContent,\n                title: node.getAttribute('title'),\n                closable: node.getAttribute('closable'),\n                target: node.getAttribute('data-target'),\n                selected: node.getAttribute('selected'),\n                html: page ? page.innerHTML : '',\n                bg: page ? page.style.background : '#0bc',\n                style: node.getAttribute('tab-style'),\n            });\n            node.remove();\n            page.remove();\n        }\n        return data;\n    }\n    function addFooter() {\n        const footer = document.createElement('span');\n        footer.setAttribute('name', 'tab-footer');\n        footer.innerHTML = settings.footer;\n        footer.className = 'tab-footer';\n        footer.style.left = '0';\n        footer.style.right = '0';\n        footer.style.bottom = '0';\n        footer.style.padding = '2px';\n        footer.style.display = 'flex';\n        footer.style.justifyContent = 'center';\n        footer.style.alignItems = 'center';\n        // footer.style.background='#030';\n        // footer.style.borderTop='1px solid #020';\n\n        return footer;\n    }\n    function addBanner() {\n        const banner = document.createElement('span');\n        banner.setAttribute('name', 'tab-banner');\n        banner.innerHTML =\n            typeof settings.banner === 'string'\n                ? settings.banner\n                : settings.banner.innerHTML;\n        banner.style.display = 'flex';\n        banner.style.padding = '5px';\n        banner.style.justifyContent = 'center';\n        banner.style.alignItems = 'center';\n        banner.className = 'tab-banner';\n        banner.style.background = 'green';\n\n        return banner;\n    }\n    function mountTab(el, doc, tabPagePanel) {\n        const container =\n            typeof el === 'object' ? el : document.getElementById(el);\n        containerId = container.id;\n\n        container.appendChild(tabPagePanel);\n\n        const tabbar = doc.querySelector('div');\n        let banner;\n        let footer;\n        if (settings.banner) {\n            banner = addBanner(container);\n            container.prepend(banner);\n        }\n        if (settings.bottom) {\n            container.lastChild.after(doc);\n        } else {\n            container.lastChild.before(doc);\n        }\n        if (settings.footer) {\n            footer = addFooter(container);\n            container.lastChild.after(footer);\n        }\n        // container.style.height='100%';\n        // container.style.width='100%';\n        container.style.top =\n            container.style.bottom =\n            container.style.left =\n            container.style.right =\n                '0';\n        const bannerBox = banner ? banner.getBoundingClientRect() : null;\n        const bannerBottom = banner ? bannerBox.bottom - bannerBox.top : 0;\n\n        const footerBox = footer ? footer.getBoundingClientRect() : null;\n        const footerTop = footer ? footerBox.bottom - footerBox.top : 0;\n\n        if (settings.bottom) {\n            // tab bar is at bottom oftab window\n            tabbar.style.bottom = `${footerTop}px`;\n        } else {\n            tabbar.style.top = `${bannerBottom}px`;\n        }\n        tabbar.style.border = '0px none transparent';\n        tabPagePanel.style.border = '0px none transparent';\n    }\n    function applySelection(el, options) {\n        if (!el || !el.parentElement) {\n            return;\n        }\n        const tablinks = el.parentElement.children;\n        // console.log(el.parentElement.parentElement);\n        for (let i = 0; i < tablinks.length; i++) {\n            tablinks[i].classList.remove('active');\n            tablinks[i].style.background = options.bg;\n            tablinks[i].style.color = options.color;\n            // tablinks[i].lastChild.lastChild.style.visibility = \"hidden\";\n        }\n\n        el.classList.add('active');\n        el.style.background = options.activeBg;\n        el.style.color = options.activecolor;\n        // el.lastChild.lastChild.style.visibility = \"visible\";\n    }\n    const createTabs = function (el, options) {\n        const tabIndex = -1;\n        const currentIndex = 0;\n        let selectedTab;\n        let tabBar;\n        let rightBtn;\n        let leftBtn;\n        let addBtn;\n        let leftNavId;\n        let rightNavId;\n        let pagePanelId;\n        let addBtnId;\n        let tabBarId;\n        let themeOptions;\n        let tabSettings;\n        let containerId;\n        let tabButtonsCount;\n        let dragStartPoint;\n        let dragStopPoint;\n        const links = {};\n        const tabs = new Map();\n        const buttons = {};\n        const pages = {};\n        const hiddenTabs = [];\n\n        init(el, options);\n        /**\n         * Initialize tab container\n         * @param {HTMLElement} el HTMLElement to attach tabs\n         * @param {Object} options Additional settings\n         * @returns void\n         */\n        function init(el, options) {\n            themeOptions = options;\n            const data = options.loadFromMarkup ? loadFromMarkup(el) : null;\n            if (data) {\n                themeOptions = Object.assign(themeOptions, data);\n            }\n            applySettings(themeOptions);\n            leftBtn = createButton('left-nav-button', '&lt;', 'left');\n            leftBtn.addEventListener('click', () => {\n                scroll(false);\n            });\n\n            leftNavId = leftBtn.id;\n            addBtn = createButton('add-tab-button', '+', 'left');\n            addBtnId = addBtn.id;\n            if (themeOptions.add) {\n                addBtn.style.visibility = 'visible';\n            } else {\n                addBtn.style.visibility = 'hidden';\n            }\n            addBtn.addEventListener('click', () => {\n                Event.fire('add-tab-click', randomId());\n            });\n            tabBar = createBar();\n            const tabBarWraper = createTabBarWraper();\n            tabBarWraper.append(tabBar);\n            tabBarWraper.appendChild(leftBtn);\n            tabBarWraper.appendChild(addBtn);\n            tabBarId = tabBar.id;\n\n            rightBtn = createButton('right-nav-button', '&gt;', 'right');\n            // rightBtn = rightBtn;\n            tabBarWraper.appendChild(rightBtn);\n            rightBtn.addEventListener('click', () => {\n                scroll(true);\n            });\n            // tabBarWraper.appendChild(rightBtn);\n            rightNavId = rightBtn.id;\n            const pagePanel = createPagePanel();\n            pagePanelId = pagePanel.id;\n            // let tabbar= doc.querySelector('div');\n            const doc = createTable(\n                tabBar.parentElement,\n                pagePanel,\n                themeOptions\n            );\n            const container =\n                typeof el === 'object' ? el : document.getElementById(el);\n            containerId = container.id;\n            container.append(doc);\n            setTheme(themeOptions.theme);\n            attachDomEventListeners(this);\n            if (themeOptions.tabs) {\n                dynamicLoad(themeOptions.tabs);\n            }\n            toggleNavigator(getLeftNavButton(), false);\n            toggleNavigator(getRightNavButton(), false);\n        }\n\n        function getTabAtIndex(index) {\n            let tab = null;\n            let i = 0;\n            for (const value of tabs.values()) {\n                if (i === index) {\n                    tab = value;\n                    break;\n                }\n                i++;\n            }\n            return tab;\n        }\n\n        function unhide() {\n            // const tabs = tabs.entries()\n            const last = getTabAtIndex(tabs.size - 1).linkButton;\n            const visibles = getVisibleTabs();\n            const firstVisible = visibles[0];\n            if (!firstVisible.previousSibling) return;\n            // let lastVisible=visibles[visibles.length-1];\n            const lastHidden = firstVisible.previousSibling || firstVisible;\n            const { width } = lastHidden.getBoundingClientRect();\n            const gap =\n                tabBar.getBoundingClientRect().right -\n                last.getBoundingClientRect().right;\n            if (width < gap) {\n                scrollLinkIntoView(lastHidden);\n            }\n        }\n\n        function attachDomEventListeners() {\n            // let self = this\n            const tabBar = getTabBar();\n            window.addEventListener('resize', () => {\n                debounce(() => {\n                    if (!selectedTab) return false;\n                    if (!isLinkVisible(selectedTab.linkButton)) {\n                        scrollLinkIntoView(selectedTab.linkButton);\n                    } else {\n                        unhide();\n                        scrollLinkIntoView(selectedTab.linkButton);\n                    }\n                    showHideNavButton();\n                }, 200)();\n            });\n\n            tabBar.addEventListener(\n                'keyup',\n                (event) => {\n                    handleKeypress(event);\n                },\n                true\n            );\n\n            tabBar.addEventListener(\n                'drop',\n                (event) => {\n                    event.preventDefault();\n\n                    dragStopPoint = event.clientX;\n                    drop(event);\n                },\n                true\n            );\n\n            tabBar.addEventListener(\n                'dragover',\n                (event) => {\n                    event.preventDefault();\n                },\n                true\n            );\n\n            tabBar.addEventListener('dragstart', (event) => {\n                dragStartPoint = event.clientX;\n                drag(event);\n            });\n        }\n\n        function handleKeypress(e) {\n            const code = e.keyCode;\n            const link = selectedTab.button;\n            // eslint-disable-next-line default-case\n            if (!link) return;\n            switch (code) {\n                case 37:\n                    if (link.previousSibling) {\n                        select(link.previousSibling);\n                    }\n                    break; // left key\n                case 39:\n                    if (link.nextSibling) {\n                        select(link.nextSibling);\n                    }\n                    break; // right key\n                case 38:\n                    break; // up key\n                case 40:\n                    link.blur();\n                    break; // down key\n                case 13:\n                    break; // enter key\n                default:\n                    break;\n            }\n        }\n\n        function showHideNavButton() {\n            // console.log(settings);\n            if (themeOptions.infiniteScroll) {\n                return;\n            }\n            const visibleButtons = getVisibleTabs();\n            const firstVisibleButton = visibleButtons[0];\n            const lastVisibleButton = visibleButtons[visibleButtons.length - 1];\n\n            if (!firstVisibleButton) return;\n            const rBtn = getRightNavButton();\n            const lBtn = getLeftNavButton();\n            if (firstVisibleButton.previousSibling) {\n                toggleNavButton(rBtn, true);\n            } else {\n                toggleNavButton(lBtn, false);\n            }\n            if (lastVisibleButton.nextSibling) {\n                toggleNavButton(rBtn, true);\n            } else {\n                toggleNavButton(rBtn, false);\n            }\n        }\n\n        function toggleNavButton(el, show) {\n            if (show) {\n                el.style.visibility = 'visible';\n            } else {\n                el.style.visibility = 'hidden';\n            }\n        }\n\n        function toggleAddButton(show) {\n            if (show) {\n                getAddButton().style.visibility = 'visible';\n            } else {\n                getAddButton().style.visibility = 'hidden';\n            }\n        }\n\n        function showHideNavigator() {\n            const visibleButtons = getVisibleTabs();\n            const firstVisibleButton = visibleButtons[0];\n            const lastVisibleButton = visibleButtons[visibleButtons.length - 1];\n\n            if (!firstVisibleButton) return;\n            if (firstVisibleButton.previousSibling) {\n                toggleNavigator(getLeftNavButton(), true);\n            } else {\n                toggleNavigator(getLeftNavButton(), false);\n            }\n            if (lastVisibleButton.nextSibling) {\n                toggleNavigator(getRightNavButton(), true);\n            } else {\n                toggleNavigator(getRightNavButton(), false);\n            }\n        }\n\n        function applyTheme(options) {\n            const table = getContainer().querySelector('table');\n            table.style.background = options.bg;\n            table.style.color = options.color;\n            leftBtn.style.color =\n                rightBtn.style.color =\n                addBtn.style.color =\n                    options.color;\n        }\n\n        // Public API\n        /** *\n         * @param theme String\n         * @returns null\n         */\n        function setTheme(theme) {\n            let color = '#ddd';\n            let bg = '#222';\n            let activecolor = '#ddd';\n            let activeBg = '#003355';\n            switch (theme) {\n                case 'dark':\n                    bg = '#002255';\n                    activeBg = '#003355';\n                    color = '#fff';\n                    break;\n                case 'black':\n                    bg = '#111';\n                    activeBg = '#333';\n                    color = '#fff';\n                    break;\n                case 'blue':\n                    bg = 'rgba(8, 68, 117, 1)';\n                    activeBg = 'rgba(10, 100, 186, 1)';\n                    break;\n                case 'green':\n                    bg = 'rgba(0, 149, 120, 1)';\n                    activeBg = '#054';\n                    break;\n                case 'red':\n                    bg = 'rgb(120, 0, 30)';\n                    activeBg = 'rgb(123, 0, 50)';\n                    break;\n                case 'white':\n                    bg = '#bcd';\n                    color = '#000';\n                    activecolor = '#eee';\n                    break;\n                default:\n                    bg = 'rgba(10, 100, 186, 1)';\n                    activeBg = 'rgba(10, 100, 206, 1)';\n                    color = '#fff';\n                    break;\n            }\n            tabSettings = {\n                bg,\n                color,\n                activecolor,\n                activeBg,\n            };\n            applyTheme(tabSettings);\n        }\n\n        function getTheme() {\n            return themeOptions.theme;\n        }\n\n        function toggleNavigator(el, show) {\n            if (show) {\n                el.style.visibility = 'visible';\n            } else {\n                el.style.visibility = 'hidden';\n            }\n        }\n\n        function getSelectedTab() {\n            return selectedTab;\n        }\n\n        function getTab(tabId) {\n            return tabs.get(tabId);\n        }\n\n        function setContent(id, content) {\n            const page = tabs.get(id).pageId;\n            document.getElementById(page).innerHTML = content;\n        }\n\n        function setTitle(id, title) {\n            const link = tabs.get(id).linkId;\n            document.getElementById(link).firstElementChild.innerHTML = title;\n        }\n        function applySettings(options) {\n            const mySettings = {\n                limit: undefined,\n                banner: undefined,\n                footer: undefined,\n                closeOnClick: undefined,\n                infiniteScroll: false,\n                fancy: false,\n                add: false,\n                // width   : '100%',\n                // height  : '100%',\n                theme: '',\n                tabHeight: 32,\n                leftTooltip: '&lt;',\n                rightTooltip: '&gt;',\n                addTooltip: '+',\n                data: null,\n            };\n\n            themeOptions = Object.assign(mySettings, options);\n        }\n        function dynamicLoad(tabs) {\n            if (!tabs) return;\n            let selected = null;\n            tabs.forEach((d) => {\n                if (d.selected) {\n                    selected = d.id;\n                }\n                const tab = add(d);\n                const page = getPage(tab.id);\n                // page.parentElement.style.top='80px';\n                // page.background='#054';\n                page.innerHTML =\n                    typeof d.html === 'function' ? d.html() : d.html;\n                page.setAttribute('contenteditable', true);\n                page.style.overflow = 'auto';\n                page.style.zIndex = '100';\n            });\n            if (selected) {\n                select(selected);\n            }\n        }\n\n        function getPage(tabId) {\n            const tab = tabs.get(tabId);\n            return document.getElementById(tab.pageId);\n        }\n\n        function getLinkButton(linkId) {\n            return document.getElementById(linkId);\n        }\n\n        function getCloswButton(id) {\n            const linkButton = getLinkButton(id);\n            return linkButton ? linkButton.lastElementChild() : null;\n        }\n\n        function getTabPagePanel() {\n            return document.getElementById(pagePanelId);\n        }\n\n        function getRightNavButton() {\n            return rightBtn;\n        }\n\n        function getLeftNavButton() {\n            return leftBtn;\n        }\n\n        function getAddButton() {\n            return addBtn;\n        }\n\n        function getFooter() {\n            return document.getElementById(footerId);\n        }\n\n        function getBanner() {\n            return document.getElementById(bannerId);\n        }\n\n        function getTabBar() {\n            return document.getElementById(tabBarId);\n        }\n\n        function getContainer() {\n            return document.getElementById(containerId);\n        }\n        function hideExtraTabs() {\n            const links = Object.values(links);\n            const numTotal = links.length;\n            const numVisible = Math.min(numTotal, themeOptions.limit);\n            for (let i = 0; i < links.length; i++) {\n                links[i].style.display = 'none'; // hide xo tabs.\n            }\n            for (let j = 0; j < numVisible; j++) {\n                links[j].style.display = 'inline'; // Show visible tabs.\n            }\n        }\n\n        function getLinkTarget(el) {\n            try {\n                while (el.name !== 'tab-link') {\n                    el = el.parentElement;\n                }\n                return el;\n            } catch (e) {\n                // const length = tabs.size - 1\n                return getTabAtIndex(tabs.size - 1).linkButton;\n                // Object.values(tabs)[length].linkButton\n            }\n        }\n\n        function allowDrop(ev) {\n            ev.preventDefault();\n        }\n\n        function drag(ev) {\n            ev.dataTransfer.setData('text', ev.target.id);\n        }\n\n        function drop(ev) {\n            ev.preventDefault();\n            const data = ev.dataTransfer.getData('text');\n            // do not drop on label wrappers or close button\n            const target = getLinkTarget(ev.target);\n            const dataEl = document.getElementById(data);\n\n            if (dragStartPoint > dragStopPoint) {\n                target.before(dataEl);\n            } else {\n                target.after(dataEl);\n            }\n            // target.parentNode.insertBefore(dataEl,dragStartPoint>dragStopPoint?target:target.nextSibling);\n        }\n        function add(options = {}) {\n            const { length } = Object.keys(buttons);\n            const tabId = options.tabId || randomId();\n            const buttonId = `tab-btn-${tabId}`;\n            const target = `tab-page-${tabId}`;\n            const tabLabel = options.label || `Tab${Number(length + 1)}`;\n            const title = options.title || tabLabel;\n\n            const settings = {\n                buttonId,\n                target,\n                label: tabLabel,\n                title,\n                html: options.html || '',\n                closable: options.close || true,\n                data: options.data || null,\n                icon: options.icon || '',\n                bg: options.bg || 'inherit',\n                color: options.color || 'inherit',\n                fancy: themeOptions.fancy,\n            };\n            // options.bg = options.bg === \"transparent\" ? \"\" : options.bg;\n            // if (options.buttonId === null) {\n            // delete options.buttonId;\n            // }\n            const tabSettings = Object.assign(settings, options);\n            const page = createPage(\n                tabSettings.target,\n                tabId,\n                buttonId,\n                tabSettings\n            );\n\n            getTabPagePanel().appendChild(page);\n            const tabBtn = createTabButton(buttonId, tabId, tabSettings);\n            const labelContainer = createLabelContainer(tabSettings);\n            const img = createImage(tabSettings);\n            const label = createLabel(tabSettings.label, tabSettings.title);\n            const closeBtn = createCloseButton(tabId);\n\n            if (!tabSettings.closable) {\n                closeBtn.style.display = 'none';\n                labelContainer.style.paddingRight = '7px';\n            }\n            labelContainer.append(img);\n            labelContainer.append(label);\n            labelContainer.append(closeBtn);\n            tabBtn.append(labelContainer);\n\n            tabBtn.addEventListener('mouseenter', () => {\n                if (selectedTab.linkButton.id === tabBtn.id) return;\n                closeBtn.style.visibility = 'visible';\n            });\n\n            tabBtn.addEventListener('mouseleave', () => {\n                if (selectedTab.linkButton.id === tabBtn.id) return;\n                closeBtn.style.visibility = 'hidden';\n            });\n\n            buttons[tabBtn.id] = tabBtn;\n            // If there was a selected button already, insert after it\n            // otherwise append at the end of tab list\n            if ((selectedTab = getSelectedTab())) {\n                // tab.selected=false;\n                selectedTab.linkButton.after(tabBtn);\n                // getLinkButton(tab.linkId).after(linkButton);\n            } else {\n                getTabBar().appendChild(tabBtn);\n            }\n            tabs.set(tabId, {\n                id: tabId,\n                label: tabSettings.label,\n                text: tabSettings.text,\n                title: tabSettings.title,\n                linkId: tabSettings.buttonId,\n                pageId: tabSettings.target,\n                data: tabSettings.data,\n                selected: tabSettings.selected,\n                linkButton: tabBtn,\n                page,\n            });\n            selectedTab = tabs.get(tabId);\n            showHideNavButton();\n            select(tabBtn);\n            if (tabSettings.selected) {\n                return selectedTab;\n            }\n            return selectedTab;\n        }\n\n        function select(ref, before) {\n            let linkButton = null;\n            console.log(typeof ref);\n            console.log(ref instanceof HTMLElement);\n            if (!ref) {\n                throw new Error('Invalid tab address:');\n            } else if (typeof ref === 'string') {\n                const id = ref;\n                linkButton = getLinkButton(id);\n            } else if (ref.id) {\n                const el = ref;\n                linkButton = el;\n            } else {\n                throw new Error('Invalid Button or ID');\n            }\n\n            if (typeof before === 'function') {\n                const result = before();\n                if (result === false) return false;\n            }\n            for (const tab of tabs.values()) {\n                if (tab.linkButton.id === linkButton.id) {\n                    tab.selected = true;\n                    selectedTab = tab;\n                    document.getElementById(tab.pageId).style.visibility =\n                        'visible';\n                    tab.linkButton.lastChild.lastChild.style.visibility =\n                        'visible';\n                    // console.log(tab.linkButton.lastChild.lastChild);\n                } else {\n                    tab.selected = false;\n                    document.getElementById(tab.pageId).style.visibility =\n                        'hidden';\n                    tab.linkButton.lastChild.lastChild.style.visibility =\n                        'hidden';\n                }\n            }\n            applySelection(linkButton, tabSettings);\n            if (!isLinkVisible(linkButton)) {\n                scrollLinkIntoView(linkButton);\n            }\n            Event.fire('select', selectedTab);\n\n            return selectedTab;\n        }\n\n        function close(el) {\n            let tabId = el;\n            if (!el) {\n                throw new Error('Invalid tab address:');\n            } else if (typeof id === 'string') {\n                // tab id\n            } else if (el.id) {\n                tabId = el.id; // .substr(5);//button Element\n            }\n            const tab = tabs.get(tabId);\n            // console.log(el, tab, tabs);\n            if (!tab) return;\n            const link = tab.linkButton; // getLinkButton(tab.linkId);\n            const next = link.nextSibling;\n            const prev = link.previousSibling;\n            Event.fire('before_close', tab);\n            link.remove();\n            document.getElementById(tab.pageId).remove();\n            selectedTab = null; // delete selectedTab;\n            tabs.delete(tabId);\n\n            Event.fire('close', tab);\n            if (next && next.tagName === 'BUTTON') {\n                select(next);\n            } else if (prev && prev.tagName === 'BUTTON') {\n                select(prev);\n            }\n            showHideNavigator();\n            scroll(true);\n            return tabId;\n        }\n\n        function isLinkVisible(link) {\n            const box = link.getBoundingClientRect();\n            const tabbar = getTabBar();\n            if (!tabbar) return false;\n            const box1 = tabbar.getBoundingClientRect();\n            return box.left >= box1.left && box.right <= box1.right;\n        }\n\n        function getVisibleTabs() {\n            const tabbar = getTabBar();\n            if (!tabbar) return false;\n            const links = Array.prototype.slice.call(\n                tabbar.querySelectorAll('button')\n            );\n            return links.filter((link) => isLinkVisible(link));\n        }\n\n        function getHiddenTabs() {\n            const links = Array.prototype.slice.call(\n                getTabBar().querySelectorAll('button')\n            );\n            return links.filter((link) => !isLinkVisible(link));\n        }\n\n        function scroll(right) {\n            if (themeOptions.infiniteScroll) {\n                infiniteScroll(right);\n            } else {\n                finiteScroll(right);\n                showHideNavigator();\n            }\n        }\n\n        function scrollLinkIntoView(el) {\n            if (isLinkVisible(el)) return;\n            const max = tabs.size;\n            let count = 0;\n            while (!isLinkVisible(el)) {\n                getRightNavButton().click();\n                count++;\n                if (count > max) break;\n            }\n            count = 0;\n            while (!isLinkVisible(el)) {\n                getLeftNavButton().click();\n                count++;\n                if (isLinkVisible(el)) return;\n                if (count > max) break;\n            }\n        }\n\n        function finiteScroll(right) {\n            tabButtonsCount = tabButtonsCount || 1;\n            tabButtonsCount++;\n            const visibleButtons = getVisibleTabs();\n            const firstVisibleButton = visibleButtons[0];\n            const lastVisibleButton = visibleButtons[visibleButtons.length - 1];\n            if (right && lastVisibleButton && lastVisibleButton.nextSibling) {\n                firstVisibleButton.style.display = 'none';\n            } else if (\n                !right &&\n                firstVisibleButton &&\n                firstVisibleButton.previousSibling\n            ) {\n                firstVisibleButton.previousSibling.style.display = '';\n            } else {\n                const tabbar = getTabBar();\n                if (!tabbar) return;\n                const bts = tabbar.querySelectorAll('button');\n                if (bts.length > 0) {\n                    bts[bts.length - 1].style.display = '';\n                }\n            }\n        }\n\n        function infiniteScroll(right) {\n            const tabbar = getTabBar();\n            if (!tabbar) return;\n            const links = tabbar.querySelectorAll('button');\n            if (links.length > 1) {\n                if (right) {\n                    links[links.length - 1].after(links[0]);\n                } else {\n                    links[0].before(links[links.length - 1]);\n                }\n            }\n        }\n\n        function destroy() {\n            // destroy\n            removeListeners();\n        }\n        return {\n            init,\n            add,\n            close,\n            setTheme,\n            getTheme,\n            destroy,\n        };\n    };\n    return {\n        createTabs,\n        randomId,\n        Emitter,\n        Event,\n        debounce,\n    };\n})();\n\nexport default TabView;\n"],"names":["TabView","randomId","Math","random","toString","slice","debounce","func","wait","immediate","timeout","context","args","arguments","later","apply","callNow","clearTimeout","setTimeout","Emitter","fire","event","data","cancelable","bubbles","cntx","document","myEvent","CustomEvent","detail","dispatchEvent","on","listener","addEventListener","off","removeEventListener","Event","_listeners","addListener","type","push","attach","target","Error","Array","listeners","i","len","length","call","trigger","removeListener","splice","createTabButton","linkId","tabId","title","bg","tabBtn","createElement","className","setAttribute","style","position","outline","height","width","border","fontSize","fontWeight","margin","padding","boxShadow","background","color","cursor","display","transition","borderRadius","select","createCloseButton","closeBtn","innerHTML","visibility","marginRight","marginLeft","alignContent","alignItems","e","close","stopImmediatePropagation","createLabel","text","label","paddingRight","paddingLeft","verticalAlign","maxWidth","overflow","whiteSpace","append","createTextNode","createTabBarWraper","tabbarContainer","createBar","tabBar","top","bottom","left","right","createButton","name","float","btn","id","createImage","options","img","icon","createLabelContainer","labelContainer","createTable","tabBarWrapper","pagePanel","settings","banner","footer","addBanner","addFooter","doc","createDocumentFragment","table","thead","bannerRow","minHeight","maxHeight","th","textAlign","appendChild","tbody","linkRow","tabHeight","td","borderCollapse","pageRow","linkRow2","footerRow","firstElementChild","nextSibling","createPage","pageId","page","createPagePanel","panel","loadFromMarkup","el","fn","getElementById","children","markup","querySelector","links","pages","tabs","remove","node","textContent","getAttribute","closable","selected","html","justifyContent","applySelection","parentElement","tablinks","classList","add","activeBg","activecolor","createTabs","selectedTab","rightBtn","leftBtn","addBtn","pagePanelId","tabBarId","themeOptions","tabSettings","containerId","dragStartPoint","dragStopPoint","Map","buttons","init","Object","assign","applySettings","scroll","tabBarWraper","container","setTheme","theme","attachDomEventListeners","dynamicLoad","toggleNavigator","getLeftNavButton","getRightNavButton","getTabAtIndex","index","tab","values","value","unhide","last","size","linkButton","visibles","getVisibleTabs","firstVisible","previousSibling","lastHidden","getBoundingClientRect","gap","scrollLinkIntoView","getTabBar","window","isLinkVisible","showHideNavButton","handleKeypress","preventDefault","clientX","drop","drag","code","keyCode","link","button","blur","infiniteScroll","visibleButtons","firstVisibleButton","lastVisibleButton","rBtn","lBtn","toggleNavButton","show","showHideNavigator","applyTheme","getContainer","getTheme","getSelectedTab","mySettings","limit","undefined","closeOnClick","fancy","leftTooltip","rightTooltip","addTooltip","forEach","d","getPage","zIndex","get","getLinkButton","getTabPagePanel","getLinkTarget","ev","dataTransfer","setData","getData","dataEl","before","after","keys","buttonId","tabLabel","Number","set","ref","console","log","HTMLElement","result","lastChild","next","prev","tagName","box","tabbar","box1","prototype","querySelectorAll","filter","finiteScroll","max","count","click","bts","destroy","removeListeners"],"mappings":"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"}